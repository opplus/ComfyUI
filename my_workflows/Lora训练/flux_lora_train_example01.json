{"last_node_id":137,"last_link_id":241,"nodes":[{"id":38,"type":"SetNode","pos":{"0":1140,"1":0},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":17,"mode":0,"inputs":[{"name":"VALSETTINGS","type":"VALSETTINGS","link":58,"label":"VALSETTINGS"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_validation_settings","properties":{"previousName":"validation_settings"},"widgets_values":["validation_settings"]},{"id":48,"type":"GetNode","pos":{"0":2630,"1":450},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"VALSETTINGS","type":"VALSETTINGS","links":[69],"slot_index":0,"label":"VALSETTINGS"}],"title":"Get_validation_settings","properties":{},"widgets_values":["validation_settings"]},{"id":61,"type":"PreviewImage","pos":{"0":3710,"1":610},"size":{"0":809.35400390625,"1":458.6750793457031},"flags":{},"order":50,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":90,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":63,"type":"GetNode","pos":{"0":3710,"1":460},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"VALSETTINGS","type":"VALSETTINGS","links":[89],"slot_index":0,"label":"VALSETTINGS"}],"title":"Get_validation_settings","properties":{},"widgets_values":["validation_settings"]},{"id":70,"type":"VisualizeLoss","pos":{"0":5586,"1":-246},"size":{"0":254.40000915527344,"1":198},"flags":{},"order":56,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":217,"label":"network_trainer"}],"outputs":[{"name":"plot","type":"IMAGE","links":[138],"slot_index":0,"shape":3,"label":"plot"},{"name":"loss_list","type":"FLOAT","links":null,"shape":3,"label":"loss_list"}],"properties":{"Node name for S&R":"VisualizeLoss"},"widgets_values":["ggplot",1000,true,768,512,false]},{"id":79,"type":"SomethingToString","pos":{"0":1815,"1":1177},"size":{"0":315,"1":82},"flags":{"collapsed":true},"order":28,"mode":0,"inputs":[{"name":"input","type":"*","link":220,"label":"input"}],"outputs":[{"name":"STRING","type":"STRING","links":[111],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"SomethingToString"},"widgets_values":["steps ",""]},{"id":80,"type":"AddLabel","pos":{"0":2982,"1":1177},"size":{"0":315,"1":274},"flags":{"collapsed":true},"order":42,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":119,"label":"image"},{"name":"caption","type":"STRING","link":null,"widget":{"name":"caption"},"label":"caption"},{"name":"text","type":"STRING","link":117,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[201],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Text","up",""]},{"id":81,"type":"SomethingToString","pos":{"0":2774,"1":1177},"size":{"0":315,"1":82},"flags":{"collapsed":true},"order":36,"mode":0,"inputs":[{"name":"input","type":"*","link":235,"label":"input"}],"outputs":[{"name":"STRING","type":"STRING","links":[117],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"SomethingToString"},"widgets_values":["steps ",""]},{"id":82,"type":"SomethingToString","pos":{"0":3909,"1":1177},"size":{"0":315,"1":82},"flags":{"collapsed":true},"order":45,"mode":0,"inputs":[{"name":"input","type":"*","link":234,"label":"input"}],"outputs":[{"name":"STRING","type":"STRING","links":[121],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"SomethingToString"},"widgets_values":["steps ",""]},{"id":83,"type":"AddLabel","pos":{"0":4130,"1":1177},"size":{"0":315,"1":274},"flags":{"collapsed":true},"order":51,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":122,"label":"image"},{"name":"caption","type":"STRING","link":null,"widget":{"name":"caption"},"label":"caption"},{"name":"text","type":"STRING","link":121,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[204],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Text","up",""]},{"id":84,"type":"SomethingToString","pos":{"0":4963,"1":1177},"size":{"0":315,"1":82},"flags":{"collapsed":true},"order":53,"mode":0,"inputs":[{"name":"input","type":"*","link":215,"label":"input"}],"outputs":[{"name":"STRING","type":"STRING","links":[124],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"SomethingToString"},"widgets_values":["steps ",""]},{"id":85,"type":"AddLabel","pos":{"0":5171,"1":1177},"size":{"0":315,"1":274},"flags":{"collapsed":true},"order":59,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":126,"label":"image"},{"name":"caption","type":"STRING","link":null,"widget":{"name":"caption"},"label":"caption"},{"name":"text","type":"STRING","link":124,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[207],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Text","up",""]},{"id":88,"type":"Display Any (rgthree)","pos":{"0":1140,"1":80},"size":{"0":210,"1":76},"flags":{},"order":24,"mode":0,"inputs":[{"name":"source","type":"*","link":182,"dir":3,"label":"source"}],"outputs":[],"title":"Number of epochs","properties":{"Node name for S&R":"Display Any (rgthree)"},"widgets_values":[""]},{"id":90,"type":"SaveImage","pos":{"0":5877,"1":-60},"size":{"0":574.23046875,"1":414.46881103515625},"flags":{},"order":60,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":138,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["flux_lora_loss_plot"]},{"id":113,"type":"Note","pos":{"0":-730,"1":60},"size":{"0":462.68292236328125,"1":79.98078918457031},"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["For multiresolution training, input same source directory with different dataset resolution. From what I hear, Flux likes multiple resolutions.\n\nFor single resolution training, just add single dataset."],"color":"#432","bgcolor":"#653"},{"id":115,"type":"Note","pos":{"0":250,"1":-90},"size":{"0":462.68292236328125,"1":79.98078918457031},"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["You can use same models as you use for inference in Comfy. When fp8_base is enabled, the model is downcasted to torch.float_e4m3fn on initialize, meaning if you load fp8 model here it should also be in same format."],"color":"#432","bgcolor":"#653"},{"id":117,"type":"ImageConcatFromBatch","pos":{"0":6690,"1":410},"size":{"0":315,"1":106},"flags":{},"order":21,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":195,"label":"images"},{"name":"num_columns","type":"INT","link":199,"widget":{"name":"num_columns"},"label":"num_columns"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[210],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageConcatFromBatch"},"widgets_values":[3,false,4096]},{"id":120,"type":"GetImageSizeAndCount","pos":{"0":6830,"1":120},"size":{"0":210,"1":86},"flags":{"collapsed":true},"order":19,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":209,"label":"image"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"image"},{"name":"1024 width","type":"INT","links":null,"shape":3,"label":"1024 width"},{"name":"1072 height","type":"INT","links":null,"shape":3,"label":"1072 height"},{"name":"4 count","type":"INT","links":[199],"slot_index":3,"shape":3,"label":"4 count"}],"properties":{"Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":122,"type":"SetNode","pos":{"0":3128,"1":1177},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":46,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":201,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_Sampler2","properties":{"previousName":"Sampler2"},"widgets_values":["Sampler2"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":124,"type":"GetNode","pos":{"0":6640,"1":230},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[203],"slot_index":0,"label":"IMAGE"}],"title":"Get_Sampler2","properties":{},"widgets_values":["Sampler2"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":125,"type":"SetNode","pos":{"0":4278,"1":1177},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":54,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":204,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":[],"slot_index":0,"label":"*"}],"title":"Set_Sampler3","properties":{"previousName":"Sampler3"},"widgets_values":["Sampler3"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":126,"type":"GetNode","pos":{"0":6650,"1":280},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[206],"slot_index":0,"label":"IMAGE"}],"title":"Get_Sampler3","properties":{},"widgets_values":["Sampler3"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":127,"type":"SetNode","pos":{"0":5319,"1":1177},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":63,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":207,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_Sampler4","properties":{"previousName":"Sampler4"},"widgets_values":["Sampler4"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":128,"type":"GetNode","pos":{"0":6640,"1":330},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[208],"slot_index":0,"label":"IMAGE"}],"title":"Get_Sampler4","properties":{},"widgets_values":["Sampler4"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":46,"type":"PreviewImage","pos":{"0":2650,"1":610},"size":{"0":850.0181274414062,"1":452.6767578125},"flags":{},"order":41,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":70,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":66,"type":"PreviewImage","pos":{"0":4785,"1":628},"size":{"0":850.0181274414062,"1":452.6767578125},"flags":{},"order":58,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":95,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":37,"type":"FluxTrainValidationSettings","pos":{"0":780,"1":20},"size":{"0":315,"1":250},"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"validation_settings","type":"VALSETTINGS","links":[58],"slot_index":0,"shape":3,"label":"validation_settings"}],"properties":{"Node name for S&R":"FluxTrainValidationSettings"},"widgets_values":[20,1024,1024,3,42,"fixed",true,0.5,1.15]},{"id":116,"type":"Note","pos":{"0":780,"1":-110},"size":{"0":308.08209228515625,"1":78.06562805175781},"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["Validation sampling settings are set here for all the sampler nodes."],"color":"#432","bgcolor":"#653"},{"id":9,"type":"PreviewImage","pos":{"0":1550,"1":600},"size":{"0":891.4732666015625,"1":476.6578063964844},"flags":{},"order":32,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":8,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":45,"type":"FluxTrainValidate","pos":{"0":2640,"1":500},"size":{"0":468.5999755859375,"1":46},"flags":{},"order":39,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":227,"label":"network_trainer"},{"name":"validation_settings","type":"VALSETTINGS","link":69,"label":"validation_settings"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[223],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"validation_images","type":"IMAGE","links":[70,119],"slot_index":1,"shape":3,"label":"validation_images"}],"properties":{"Node name for S&R":"FluxTrainValidate"},"widgets_values":[]},{"id":60,"type":"FluxTrainValidate","pos":{"0":3720,"1":510},"size":{"0":468.5999755859375,"1":46},"flags":{},"order":48,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":225,"label":"network_trainer"},{"name":"validation_settings","type":"VALSETTINGS","link":89,"label":"validation_settings"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[226],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"validation_images","type":"IMAGE","links":[90,122],"slot_index":1,"shape":3,"label":"validation_images"}],"properties":{"Node name for S&R":"FluxTrainValidate"},"widgets_values":[]},{"id":47,"type":"FluxTrainSave","pos":{"0":3110,"1":320},"size":{"0":393,"1":122},"flags":{},"order":35,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":222,"label":"network_trainer"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[227],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"lora_path","type":"STRING","links":null,"shape":3,"label":"lora_path"},{"name":"steps","type":"INT","links":[],"slot_index":2,"shape":3,"label":"steps"}],"properties":{"Node name for S&R":"FluxTrainSave"},"widgets_values":[false,false]},{"id":129,"type":"AddLabel","pos":{"0":6937,"1":60},"size":{"0":315,"1":274},"flags":{"collapsed":true},"order":61,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":210,"label":"image"},{"name":"caption","type":"STRING","link":null,"widget":{"name":"caption"},"label":"caption"},{"name":"text","type":"STRING","link":231,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[214],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Text","up",""]},{"id":62,"type":"FluxTrainSave","pos":{"0":4200,"1":330},"size":{"0":393,"1":122},"flags":{},"order":44,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":224,"label":"network_trainer"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[225],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"lora_path","type":"STRING","links":null,"shape":3,"label":"lora_path"},{"name":"steps","type":"INT","links":[],"slot_index":2,"shape":3,"label":"steps"}],"properties":{"Node name for S&R":"FluxTrainSave"},"widgets_values":[false,false]},{"id":134,"type":"FluxTrainSave","pos":{"0":5275,"1":328},"size":{"0":393,"1":122},"flags":{},"order":52,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":232,"label":"network_trainer"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[233],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"lora_path","type":"STRING","links":null,"shape":3,"label":"lora_path"},{"name":"steps","type":"INT","links":[],"slot_index":2,"shape":3,"label":"steps"}],"properties":{"Node name for S&R":"FluxTrainSave"},"widgets_values":[false,false]},{"id":99,"type":"VisualizeLoss","pos":{"0":2950,"1":-650},"size":{"0":254.40000915527344,"1":198},"flags":{},"order":34,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":164,"label":"network_trainer"}],"outputs":[{"name":"plot","type":"IMAGE","links":[163],"slot_index":0,"shape":3,"label":"plot"},{"name":"loss_list","type":"FLOAT","links":null,"shape":3,"label":"loss_list"}],"properties":{"Node name for S&R":"VisualizeLoss"},"widgets_values":["seaborn-v0_8-dark-palette",100,true,768,512,false]},{"id":101,"type":"VisualizeLoss","pos":{"0":4090,"1":-650},"size":{"0":254.40000915527344,"1":198},"flags":{},"order":43,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":166,"label":"network_trainer"}],"outputs":[{"name":"plot","type":"IMAGE","links":[165],"slot_index":0,"shape":3,"label":"plot"},{"name":"loss_list","type":"FLOAT","links":null,"shape":3,"label":"loss_list"}],"properties":{"Node name for S&R":"VisualizeLoss"},"widgets_values":["seaborn-v0_8-dark-palette",100,true,768,512,false]},{"id":98,"type":"SaveImage","pos":{"0":1680,"1":-340},"size":{"0":645.9608764648438,"1":439.37261962890625},"flags":{},"order":29,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":161,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["flux_lora_loss_plot"]},{"id":100,"type":"SaveImage","pos":{"0":2990,"1":-340},"size":{"0":574.23046875,"1":414.46881103515625},"flags":{},"order":38,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":163,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["flux_lora_loss_plot"]},{"id":102,"type":"SaveImage","pos":{"0":4080,"1":-340},"size":{"0":574.23046875,"1":414.46881103515625},"flags":{},"order":47,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":165,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["flux_lora_loss_plot"]},{"id":130,"type":"SaveImage","pos":{"0":7132,"1":121},"size":{"0":619.8221435546875,"1":714.4110107421875},"flags":{},"order":64,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":214,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["flux_lora_trainer_sheet"]},{"id":59,"type":"FluxTrainLoop","pos":{"0":3700,"1":330},"size":{"0":393,"1":78},"flags":{},"order":40,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":223,"label":"network_trainer"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[166,224],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"steps","type":"INT","links":[234],"slot_index":1,"shape":3,"label":"steps"}],"properties":{"Node name for S&R":"FluxTrainLoop"},"widgets_values":[750],"color":"#232","bgcolor":"#353"},{"id":44,"type":"FluxTrainLoop","pos":{"0":2630,"1":330},"size":{"0":393,"1":78},"flags":{},"order":31,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":219,"label":"network_trainer"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[164,222],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"steps","type":"INT","links":[235],"slot_index":1,"shape":3,"label":"steps"}],"properties":{"Node name for S&R":"FluxTrainLoop"},"widgets_values":[750],"color":"#232","bgcolor":"#353"},{"id":4,"type":"FluxTrainLoop","pos":{"0":1520,"1":260},"size":{"0":393,"1":78},"flags":{},"order":23,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":181,"label":"network_trainer"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[162,218],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"steps","type":"INT","links":[220],"slot_index":1,"shape":3,"label":"steps"}],"properties":{"Node name for S&R":"FluxTrainLoop"},"widgets_values":[750],"color":"#232","bgcolor":"#353"},{"id":135,"type":"StringConstantMultiline","pos":{"0":320,"1":730},"size":{"0":400,"1":200},"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[237],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"StringConstantMultiline"},"widgets_values":["cute anime girl blonde messy long hair blue eyes wearing a maid outfit with a long black dress with a gold leaf pattern and a white apron in an old dark victorian mansion with a bright window and very expensive stuff everywhere akihikoyoshida|illustration of a kitten akihikoyoshida|photograph of a turtle akihikoyoshida|portrait of a female red wizard akihikoyoshida",true,true]},{"id":136,"type":"FluxTrainModelSelect","pos":{"0":250,"1":50},"size":{"0":427.607421875,"1":137.3937225341797},"flags":{},"order":10,"mode":0,"inputs":[{"name":"lora_path","type":"STRING","link":null,"widget":{"name":"lora_path"},"label":"lora_path"}],"outputs":[{"name":"flux_models","type":"TRAIN_FLUX_MODELS","links":[238],"shape":3,"label":"flux_models"}],"properties":{"Node name for S&R":"FluxTrainModelSelect"},"widgets_values":["flux/flux1-dev-fp8.safetensors","flux/ae.sft","sd3/clip_l.safetensors","sd3/t5xxl_fp8_e4m3fn.safetensors",""]},{"id":95,"type":"OptimizerConfig","pos":{"0":320,"1":390},"size":{"0":315,"1":244},"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[{"name":"optimizer_settings","type":"ARGS","links":[180],"shape":3,"label":"optimizer_settings"}],"properties":{"Node name for S&R":"OptimizerConfig"},"widgets_values":["CAME",1,"constant",0,1,1,5,"",true]},{"id":105,"type":"Display Any (rgthree)","pos":{"0":470,"1":-800},"size":{"0":1073.7608642578125,"1":492.8503112792969},"flags":{},"order":25,"mode":0,"inputs":[{"name":"source","type":"*","link":183,"dir":3,"label":"source"}],"outputs":[],"properties":{"Node name for S&R":"Display Any (rgthree)"},"widgets_values":[""]},{"id":131,"type":"Note","pos":{"0":480,"1":-920},"size":{"0":210,"1":58},"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["sanity check that all the args are chosen correctly"],"color":"#432","bgcolor":"#653"},{"id":97,"type":"VisualizeLoss","pos":{"0":1700,"1":-650},"size":{"0":303.6300048828125,"1":198},"flags":{},"order":26,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":162,"label":"network_trainer"}],"outputs":[{"name":"plot","type":"IMAGE","links":[161],"slot_index":0,"shape":3,"label":"plot"},{"name":"loss_list","type":"FLOAT","links":null,"shape":3,"label":"loss_list"}],"properties":{"Node name for S&R":"VisualizeLoss"},"widgets_values":["seaborn-v0_8-dark-palette",100,true,768,512,false]},{"id":40,"type":"GetNode","pos":{"0":1550,"1":400},"size":{"0":277.0899353027344,"1":58},"flags":{"collapsed":false},"order":13,"mode":0,"inputs":[],"outputs":[{"name":"VALSETTINGS","type":"VALSETTINGS","links":[60],"slot_index":0,"label":"VALSETTINGS"}],"title":"Get_validation_settings","properties":{},"widgets_values":["validation_settings"]},{"id":14,"type":"FluxTrainSave","pos":{"0":1990,"1":260},"size":{"0":393,"1":122},"flags":{},"order":27,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":218,"label":"network_trainer"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[221],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"lora_path","type":"STRING","links":[],"slot_index":1,"shape":3,"label":"lora_path"},{"name":"steps","type":"INT","links":[],"slot_index":2,"shape":3,"label":"steps"}],"properties":{"Node name for S&R":"FluxTrainSave"},"widgets_values":[false,false]},{"id":8,"type":"FluxTrainValidate","pos":{"0":1550,"1":500},"size":{"0":468.5999755859375,"1":46},"flags":{},"order":30,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":221,"label":"network_trainer"},{"name":"validation_settings","type":"VALSETTINGS","link":60,"label":"validation_settings"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[219],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"validation_images","type":"IMAGE","links":[8,112],"slot_index":1,"shape":3,"label":"validation_images"}],"properties":{"Node name for S&R":"FluxTrainValidate"},"widgets_values":[]},{"id":78,"type":"AddLabel","pos":{"0":2020,"1":1180},"size":{"0":315,"1":274},"flags":{"collapsed":true},"order":33,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":112,"label":"image"},{"name":"caption","type":"STRING","link":null,"widget":{"name":"caption"},"label":"caption"},{"name":"text","type":"STRING","link":111,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[200],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","Text","up",""]},{"id":121,"type":"SetNode","pos":{"0":2170,"1":1180},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":37,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":200,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_Sampler1","properties":{"previousName":"Sampler1"},"widgets_values":["Sampler1"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":119,"type":"ImageBatchMulti","pos":{"0":6820,"1":180},"size":{"0":210,"1":142},"flags":{},"order":18,"mode":0,"inputs":[{"name":"image_1","type":"IMAGE","link":202,"label":"image_1"},{"name":"image_2","type":"IMAGE","link":203,"label":"image_2"},{"name":"image_3","type":"IMAGE","link":206,"label":"image_3"},{"name":"image_4","type":"IMAGE","link":208,"label":"image_4"}],"outputs":[{"name":"images","type":"IMAGE","links":[195],"slot_index":0,"shape":3,"label":"images"}],"properties":{},"widgets_values":[4,null]},{"id":123,"type":"GetNode","pos":{"0":6640,"1":190},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":14,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[202,209],"slot_index":0,"label":"IMAGE"}],"title":"Get_Sampler1","properties":{},"widgets_values":["Sampler1"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":133,"type":"FluxTrainEnd","pos":{"0":5870,"1":490},"size":{"0":317.4000244140625,"1":98},"flags":{},"order":57,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":229,"label":"network_trainer"}],"outputs":[{"name":"lora_name","type":"STRING","links":[231],"slot_index":0,"shape":3,"label":"lora_name"},{"name":"metadata","type":"STRING","links":null,"shape":3,"label":"metadata"},{"name":"lora_path","type":"STRING","links":[236],"slot_index":2,"shape":3,"label":"lora_path"}],"properties":{"Node name for S&R":"FluxTrainEnd"},"widgets_values":[false],"color":"#322","bgcolor":"#533"},{"id":74,"type":"Display Any (rgthree)","pos":{"0":6270,"1":510},"size":{"0":358.62896728515625,"1":76},"flags":{},"order":62,"mode":0,"inputs":[{"name":"source","type":"*","link":236,"dir":3,"label":"source"}],"outputs":[],"properties":{"Node name for S&R":"Display Any (rgthree)"},"widgets_values":[""]},{"id":64,"type":"FluxTrainLoop","pos":{"0":4770,"1":330},"size":{"0":393,"1":78},"flags":{},"order":49,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":226,"label":"network_trainer"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[232],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"steps","type":"INT","links":[215],"slot_index":1,"shape":3,"label":"steps"}],"properties":{"Node name for S&R":"FluxTrainLoop"},"widgets_values":[750],"color":"#232","bgcolor":"#353"},{"id":65,"type":"FluxTrainValidate","pos":{"0":4780,"1":520},"size":{"0":468.5999755859375,"1":46},"flags":{},"order":55,"mode":0,"inputs":[{"name":"network_trainer","type":"NETWORKTRAINER","link":233,"label":"network_trainer"},{"name":"validation_settings","type":"VALSETTINGS","link":94,"label":"validation_settings"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[217,229],"slot_index":0,"shape":3,"label":"network_trainer"},{"name":"validation_images","type":"IMAGE","links":[95,126],"slot_index":1,"shape":3,"label":"validation_images"}],"properties":{"Node name for S&R":"FluxTrainValidate"},"widgets_values":[]},{"id":68,"type":"GetNode","pos":{"0":4770,"1":470},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":15,"mode":0,"inputs":[],"outputs":[{"name":"VALSETTINGS","type":"VALSETTINGS","links":[94],"slot_index":0,"label":"VALSETTINGS"}],"title":"Get_validation_settings","properties":{},"widgets_values":["validation_settings"]},{"id":137,"type":"TrainDatasetGeneralConfig","pos":{"0":-630,"1":240},"size":{"0":316.3266296386719,"1":202},"flags":{},"order":16,"mode":0,"inputs":[],"outputs":[{"name":"dataset_general","type":"JSON","links":[241],"shape":3,"label":"dataset_general"}],"properties":{"Node name for S&R":"TrainDatasetGeneralConfig"},"widgets_values":[false,false,false,0,false,false,".txt"]},{"id":107,"type":"InitFluxLoRATraining","pos":{"0":780,"1":330},"size":{"0":477.3700866699219,"1":877.820068359375},"flags":{},"order":22,"mode":0,"inputs":[{"name":"flux_models","type":"TRAIN_FLUX_MODELS","link":238,"label":"flux_models"},{"name":"dataset","type":"JSON","link":189,"label":"dataset"},{"name":"optimizer_settings","type":"ARGS","link":180,"label":"optimizer_settings"},{"name":"resume_args","type":"ARGS","link":null,"label":"resume_args"},{"name":"block_args","type":"ARGS","link":null,"label":"block_args"},{"name":"sample_prompts","type":"STRING","link":237,"widget":{"name":"sample_prompts"},"label":"sample_prompts"}],"outputs":[{"name":"network_trainer","type":"NETWORKTRAINER","links":[181],"shape":3,"label":"network_trainer"},{"name":"epochs_count","type":"INT","links":[182],"shape":3,"label":"epochs_count"},{"name":"args","type":"KOHYA_ARGS","links":[183],"shape":3,"label":"args"}],"properties":{"Node name for S&R":"InitFluxLoRATraining"},"widgets_values":["flux_akihgj_0924_01","flux_lora_output_path",16,1,0.0004,3000,true,"disk","disk",false,"logit_normal",0,1,1.29,"shift",1,"raw",1,3.1582000000000003,false,true,"bf16","bf16","sdpa","","","disabled",0,0,"enabled",true,true]},{"id":112,"type":"TrainDatasetAdd","pos":{"0":-170,"1":200},"size":{"0":259.5897521972656,"1":338},"flags":{},"order":20,"mode":0,"inputs":[{"name":"dataset_config","type":"JSON","link":241,"label":"dataset_config"},{"name":"regularization","type":"JSON","link":null,"label":"regularization"}],"outputs":[{"name":"dataset","type":"JSON","links":[189],"slot_index":0,"shape":3,"label":"dataset"}],"properties":{"Node name for S&R":"TrainDatasetAdd"},"widgets_values":[1024,1024,1,"/home/star/ssd/ssd_1/ComfyUI/custom_nodes/ComfyUI-FluxTrainer/dataset/hgj","akihgj",true,false,1,256,1024,true,true]}],"links":[[8,8,1,9,0,"IMAGE"],[58,37,0,38,0,"*"],[60,40,0,8,1,"VALSETTINGS"],[69,48,0,45,1,"VALSETTINGS"],[70,45,1,46,0,"IMAGE"],[89,63,0,60,1,"VALSETTINGS"],[90,60,1,61,0,"IMAGE"],[94,68,0,65,1,"VALSETTINGS"],[95,65,1,66,0,"IMAGE"],[111,79,0,78,2,"STRING"],[112,8,1,78,0,"IMAGE"],[117,81,0,80,2,"STRING"],[119,45,1,80,0,"IMAGE"],[121,82,0,83,2,"STRING"],[122,60,1,83,0,"IMAGE"],[124,84,0,85,2,"STRING"],[126,65,1,85,0,"IMAGE"],[138,70,0,90,0,"IMAGE"],[161,97,0,98,0,"IMAGE"],[162,4,0,97,0,"NETWORKTRAINER"],[163,99,0,100,0,"IMAGE"],[164,44,0,99,0,"NETWORKTRAINER"],[165,101,0,102,0,"IMAGE"],[166,59,0,101,0,"NETWORKTRAINER"],[180,95,0,107,2,"ARGS"],[181,107,0,4,0,"NETWORKTRAINER"],[182,107,1,88,0,"*"],[183,107,2,105,0,"*"],[189,112,0,107,1,"JSON"],[195,119,0,117,0,"IMAGE"],[199,120,3,117,1,"INT"],[200,78,0,121,0,"*"],[201,80,0,122,0,"*"],[202,123,0,119,0,"IMAGE"],[203,124,0,119,1,"IMAGE"],[204,83,0,125,0,"*"],[206,126,0,119,2,"IMAGE"],[207,85,0,127,0,"*"],[208,128,0,119,3,"IMAGE"],[209,123,0,120,0,"IMAGE"],[210,117,0,129,0,"IMAGE"],[214,129,0,130,0,"IMAGE"],[215,64,1,84,0,"*"],[217,65,0,70,0,"NETWORKTRAINER"],[218,4,0,14,0,"NETWORKTRAINER"],[219,8,0,44,0,"NETWORKTRAINER"],[220,4,1,79,0,"*"],[221,14,0,8,0,"NETWORKTRAINER"],[222,44,0,47,0,"NETWORKTRAINER"],[223,45,0,59,0,"NETWORKTRAINER"],[224,59,0,62,0,"NETWORKTRAINER"],[225,62,0,60,0,"NETWORKTRAINER"],[226,60,0,64,0,"NETWORKTRAINER"],[227,47,0,45,0,"NETWORKTRAINER"],[229,65,0,133,0,"NETWORKTRAINER"],[231,133,0,129,2,"STRING"],[232,64,0,134,0,"NETWORKTRAINER"],[233,134,0,65,0,"NETWORKTRAINER"],[234,59,1,82,0,"*"],[235,44,1,81,0,"*"],[236,133,2,74,0,"*"],[237,135,0,107,5,"STRING"],[238,136,0,107,0,"TRAIN_FLUX_MODELS"],[241,137,0,112,0,"JSON"]],"groups":[{"title":"Dataset","bounding":[-1190,-150,1362,851],"color":"#3f789e","font_size":24,"flags":{}},{"title":"Train_04","bounding":[4753,127,996,989],"color":"#3f789e","font_size":24,"flags":{}},{"title":"Train_03","bounding":[3680,130,1047,986],"color":"#3f789e","font_size":24,"flags":{}},{"title":"Train_02","bounding":[2600,120,1046,975],"color":"#3f789e","font_size":24,"flags":{}},{"title":"Settings and init","bounding":[200,-190,1223,1511],"color":"#b06634","font_size":24,"flags":{}},{"title":"Train_01","bounding":[1440,120,1107,975],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.7088742511245887,"offset":[734.5290070820901,-185.95138251706442]},"workspace_info":{"id":"Nuy6NtI45_YGOqFyapurS","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}