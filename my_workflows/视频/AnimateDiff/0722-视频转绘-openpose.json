{"last_node_id":40,"last_link_id":60,"nodes":[{"id":30,"type":"PrimitiveNode","pos":[519,867],"size":{"0":210,"1":80},"flags":{},"order":1,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[49,50],"slot_index":0,"widget":{"name":"frame_rate"}}],"properties":{"Run widget replace on values":false},"widgets_values":[30,"fixed"]},{"id":15,"type":"Image Resize","pos":[863,128],"size":{"0":315,"1":178},"flags":{},"order":17,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":23,"label":"图像"},{"name":"resize_width","type":"INT","link":13,"widget":{"name":"resize_width"},"label":"拉伸宽度"},{"name":"resize_height","type":"INT","link":14,"widget":{"name":"resize_height"},"label":"拉伸高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[25,33],"shape":3,"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"Image Resize"},"widgets_values":["resize","false","bilinear",1,1024,1536]},{"id":20,"type":"CLIPTextEncode","pos":[519,1002],"size":{"0":250,"1":120},"flags":{},"order":13,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":26,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[30],"shape":3,"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["A beautiful girl dancing, city street, tall buildings."],"color":"#232","bgcolor":"#353"},{"id":21,"type":"CLIPTextEncode","pos":[517,1170],"size":{"0":250,"1":120},"flags":{},"order":14,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":27,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[31],"shape":3,"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#322","bgcolor":"#533"},{"id":34,"type":"Note","pos":[499,1647],"size":{"0":315.7331237792969,"1":76.61671447753906},"flags":{},"order":2,"mode":0,"properties":{"text":""},"widgets_values":["https://huggingface.co/ByteDance/AnimateDiff-Lightning/tree/main\n(ComfyUI\\models\\animatediff_models)"],"color":"#432","bgcolor":"#653"},{"id":35,"type":"Note","pos":[485,536],"size":{"0":315.7331237792969,"1":76.61671447753906},"flags":{},"order":3,"mode":0,"properties":{"text":""},"widgets_values":["https://siuleeboss.com/comfyui/fix-comfyui-error-occurred-when-executing-dwpreprocessor/"],"color":"#432","bgcolor":"#653"},{"id":28,"type":"VHS_VAEDecodeBatched","pos":[2093,461],"size":{"0":226.8000030517578,"1":78},"flags":{},"order":21,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":44,"label":"Latent"},{"name":"vae","type":"VAE","link":45,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[46],"shape":3,"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"VHS_VAEDecodeBatched"},"widgets_values":{"per_batch":4}},{"id":36,"type":"Note","pos":[1383,83],"size":{"0":304.0321044921875,"1":74.63060760498047},"flags":{},"order":4,"mode":0,"properties":{"text":""},"widgets_values":["https://huggingface.co/lllyasviel/ControlNet-v1-1/tree/main\n(ComfyUI\\models\\controlnet)"],"color":"#432","bgcolor":"#653"},{"id":39,"type":"Note","pos":[1745,847],"size":{"0":304.0321044921875,"1":74.63060760498047},"flags":{},"order":5,"mode":0,"properties":{"text":""},"widgets_values":["empty latent -> denoise 1\n\nencoder latent -> denoise 0.5-0.8"],"color":"#432","bgcolor":"#653"},{"id":40,"type":"Note","pos":[522,746],"size":{"0":210,"1":59.602012634277344},"flags":{},"order":6,"mode":0,"properties":{"text":""},"widgets_values":["FPS"],"color":"#432","bgcolor":"#653"},{"id":14,"type":"ImageGenResolutionFromImage","pos":[500,150],"size":{"0":268.79998779296875,"1":46},"flags":{},"order":10,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":12,"label":"图像"}],"outputs":[{"name":"IMAGE_GEN_WIDTH (INT)","type":"INT","links":[13,53],"shape":3,"slot_index":0,"label":"宽度(整数)"},{"name":"IMAGE_GEN_HEIGHT (INT)","type":"INT","links":[14,54],"shape":3,"slot_index":1,"label":"高度(整数)"}],"properties":{"Node name for S&R":"ImageGenResolutionFromImage"}},{"id":17,"type":"DWPreprocessor","pos":[483,290],"size":{"0":315,"1":198},"flags":{},"order":11,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":21,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[23],"shape":3,"slot_index":0,"label":"图像"},{"name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null,"shape":3,"label":"姿态关键点"}],"properties":{"Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",256,"yolox_l.torchscript.pt","dw-ll_ucoco_384_bs5.torchscript.pt"]},{"id":10,"type":"VHS_LoadVideo","pos":[220,300],"size":[240,690],"flags":{},"order":7,"mode":0,"inputs":[{"name":"meta_batch","type":"VHS_BatchManager","link":null,"label":"批次管理"},{"name":"vae","type":"VAE","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[12,21,57],"shape":3,"slot_index":0,"label":"图像"},{"name":"frame_count","type":"INT","links":[55],"shape":3,"slot_index":1,"label":"帧计数"},{"name":"audio","type":"AUDIO","links":[47,48],"shape":3,"slot_index":2,"label":"音频"},{"name":"video_info","type":"VHS_VIDEOINFO","links":null,"shape":3,"label":"视频信息"}],"properties":{"Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"video-0710-woman-dance-hat.mp4","force_rate":0,"force_size":"Custom Height","custom_width":512,"custom_height":1024,"frame_load_cap":0,"skip_first_frames":0,"select_every_nth":1,"choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"frame_load_cap":0,"skip_first_frames":0,"force_rate":0,"filename":"video-0710-woman-dance-hat.mp4","type":"input","format":"video/mp4","select_every_nth":1,"force_size":"?x1024"}}}},{"id":19,"type":"ControlNetLoader","pos":[1380,220],"size":{"0":315,"1":58},"flags":{},"order":8,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[32],"shape":3,"slot_index":0,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["sd1.5/control_v11p_sd15_openpose.safetensors"]},{"id":13,"type":"VHS_VideoCombine","pos":[870,400],"size":[320,830],"flags":{},"order":18,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":25,"label":"图像"},{"name":"audio","type":"VHS_AUDIO","link":48,"label":"音频"},{"name":"meta_batch","type":"VHS_BatchManager","link":null,"label":"批次管理"},{"name":"frame_rate","type":"INT","link":49,"widget":{"name":"frame_rate"},"label":"帧率"}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3,"label":"文件名"}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":30,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00003-audio.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":30}}}},{"id":37,"type":"VAEEncode","pos":[1340,890],"size":{"0":313.0413818359375,"1":48.725074768066406},"flags":{},"order":15,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":57,"label":"图像"},{"name":"vae","type":"VAE","link":58,"label":"VAE"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[59],"shape":3,"slot_index":0,"label":"Latent"}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":29,"type":"VHS_VideoCombine","pos":[2390,290],"size":[320,760],"flags":{},"order":22,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":46,"label":"图像"},{"name":"audio","type":"VHS_AUDIO","link":47,"label":"音频"},{"name":"meta_batch","type":"VHS_BatchManager","link":null,"label":"批次管理"},{"name":"frame_rate","type":"INT","link":50,"widget":{"name":"frame_rate"},"label":"帧率"}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3,"label":"文件名"}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":30,"loop_count":0,"filename_prefix":"AnimateDiff","format":"image/gif","pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00004.gif","subfolder":"","type":"output","format":"image/gif","frame_rate":30}}}},{"id":33,"type":"ADE_EmptyLatentImageLarge","pos":[1340,740],"size":{"0":310.79998779296875,"1":74},"flags":{},"order":16,"mode":0,"inputs":[{"name":"width","type":"INT","link":53,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":54,"widget":{"name":"height"},"label":"高度"},{"name":"batch_size","type":"INT","link":55,"widget":{"name":"batch_size"},"label":"批次大小"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[],"shape":3,"slot_index":0,"label":"Latent"}],"properties":{"Node name for S&R":"ADE_EmptyLatentImageLarge"},"widgets_values":[512,512,1]},{"id":25,"type":"KSampler","pos":[1740,320],"size":{"0":315,"1":474},"flags":{},"order":20,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":60,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":38,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":39,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":59,"label":"Latent"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[44],"shape":3,"slot_index":0,"label":"Latent"}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[335173728266904,"randomize",4,1,"euler","sgm_uniform",0.7000000000000001]},{"id":23,"type":"ACN_AdvancedControlNetApply","pos":[1380,340],"size":{"0":285.6000061035156,"1":286},"flags":{},"order":19,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":30,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":31,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":32,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":33,"label":"图像"},{"name":"mask_optional","type":"MASK","link":null,"label":"遮罩"},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null,"label":"帧间隔"},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null,"label":"覆盖Latent关键帧"},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null,"label":"覆盖ControlNet权重"},{"name":"model_optional","type":"MODEL","link":36,"label":"模型(可选)"},{"name":"vae_optional","type":"VAE","link":null}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[38],"shape":3,"slot_index":0,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[39],"shape":3,"slot_index":1,"label":"负面条件"},{"name":"model_opt","type":"MODEL","links":[60],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0,1]},{"id":18,"type":"CheckpointLoaderSimple","pos":[140,1300],"size":{"0":315,"1":98},"flags":{},"order":9,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[35],"shape":3,"slot_index":0,"label":"模型"},{"name":"CLIP","type":"CLIP","links":[26,27],"shape":3,"slot_index":1,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[45,58],"shape":3,"slot_index":2,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sd1.5/AingDiffusion_v2.0.safetensors"]},{"id":31,"type":"ADE_StandardStaticContextOptions","pos":[130,1470],"size":{"0":319.20001220703125,"1":198},"flags":{},"order":0,"mode":0,"inputs":[{"name":"prev_context","type":"CONTEXT_OPTIONS","link":null,"slot_index":0,"label":"前上下文"},{"name":"view_opts","type":"VIEW_OPTS","link":null,"label":"视图设置"}],"outputs":[{"name":"CONTEXT_OPTS","type":"CONTEXT_OPTIONS","links":[51],"shape":3,"label":"上下文设置"}],"properties":{"Node name for S&R":"ADE_StandardStaticContextOptions"},"widgets_values":[16,4,"pyramid",false,0,1]},{"id":24,"type":"ADE_AnimateDiffLoaderGen1","pos":[500,1380],"size":{"0":315,"1":222},"flags":{},"order":12,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":35,"label":"模型"},{"name":"context_options","type":"CONTEXT_OPTIONS","link":51,"slot_index":1,"label":"上下文设置"},{"name":"motion_lora","type":"MOTION_LORA","link":null,"label":"动态LoRA"},{"name":"ad_settings","type":"AD_SETTINGS","link":null,"label":"AD设置"},{"name":"ad_keyframes","type":"AD_KEYFRAMES","link":null,"label":"AD关键帧"},{"name":"sample_settings","type":"SAMPLE_SETTINGS","link":null,"label":"采样设置"},{"name":"scale_multival","type":"MULTIVAL","link":null,"label":"缩放多值"},{"name":"effect_multival","type":"MULTIVAL","link":null,"label":"效果多值"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[36],"shape":3,"slot_index":0,"label":"模型"}],"properties":{"Node name for S&R":"ADE_AnimateDiffLoaderGen1"},"widgets_values":["animatediff_lightning_4step_comfyui.safetensors","sqrt_linear (AnimateDiff)"]}],"links":[[12,10,0,14,0,"IMAGE"],[13,14,0,15,1,"INT"],[14,14,1,15,2,"INT"],[21,10,0,17,0,"IMAGE"],[23,17,0,15,0,"IMAGE"],[25,15,0,13,0,"IMAGE"],[26,18,1,20,0,"CLIP"],[27,18,1,21,0,"CLIP"],[30,20,0,23,0,"CONDITIONING"],[31,21,0,23,1,"CONDITIONING"],[32,19,0,23,2,"CONTROL_NET"],[33,15,0,23,3,"IMAGE"],[35,18,0,24,0,"MODEL"],[36,24,0,23,8,"MODEL"],[38,23,0,25,1,"CONDITIONING"],[39,23,1,25,2,"CONDITIONING"],[44,25,0,28,0,"LATENT"],[45,18,2,28,1,"VAE"],[46,28,0,29,0,"IMAGE"],[47,10,2,29,1,"VHS_AUDIO"],[48,10,2,13,1,"VHS_AUDIO"],[49,30,0,13,3,"INT"],[50,30,0,29,3,"INT"],[51,31,0,24,1,"CONTEXT_OPTIONS"],[53,14,0,33,0,"INT"],[54,14,1,33,1,"INT"],[55,10,1,33,2,"INT"],[57,10,0,37,0,"IMAGE"],[58,18,2,37,1,"VAE"],[59,37,0,25,3,"LATENT"],[60,23,2,25,0,"MODEL"]],"groups":[{"title":"Empty or Encoder","bounding":[1299,648,394,332],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{"ds":{"scale":0.6588450000000056,"offset":{"0":173.49481532475858,"1":-619.471729747146}},"workspace_info":{"id":"E87SvKISUnBI6m_rfLw4L","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}