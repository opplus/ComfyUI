{"last_node_id":66,"last_link_id":93,"nodes":[{"id":6,"type":"CLIPTextEncode","pos":[400,720],"size":{"0":210,"1":54},"flags":{"collapsed":false},"order":10,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":10,"label":"CLIP"},{"name":"text","type":"STRING","link":47,"slot_index":1,"widget":{"name":"text"},"label":"文本"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[40],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["",true]},{"id":8,"type":"VAEDecode","pos":[1250,95],"size":{"0":220,"1":46},"flags":{},"order":15,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":24,"label":"Latent"},{"name":"vae","type":"VAE","link":12,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[91,93],"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":10,"type":"VAELoader","pos":[26,379],"size":{"0":320,"1":60},"flags":{},"order":0,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[12,90],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["flux/ae.sft"]},{"id":11,"type":"DualCLIPLoader","pos":[20,210],"size":{"0":320,"1":106},"flags":{},"order":1,"mode":0,"outputs":[{"name":"CLIP","type":"CLIP","links":[10],"slot_index":0,"shape":3,"label":"CLIP"}],"properties":{"Node name for S&R":"DualCLIPLoader"},"widgets_values":["t5xxl_fp8_e4m3fn.safetensors","clip_l.safetensors","flux"]},{"id":13,"type":"SamplerCustomAdvanced","pos":[830,90],"size":{"0":360,"1":540},"flags":{},"order":14,"mode":0,"inputs":[{"name":"noise","type":"NOISE","link":37,"slot_index":0,"label":"噪波生成"},{"name":"guider","type":"GUIDER","link":30,"slot_index":1,"label":"引导"},{"name":"sampler","type":"SAMPLER","link":19,"slot_index":2,"label":"采样器"},{"name":"sigmas","type":"SIGMAS","link":20,"slot_index":3,"label":"Sigmas"},{"name":"latent_image","type":"LATENT","link":89,"slot_index":4,"label":"Latent"}],"outputs":[{"name":"output","type":"LATENT","links":[24],"slot_index":0,"shape":3,"label":"输出"},{"name":"denoised_output","type":"LATENT","links":null,"shape":3,"label":"降噪输出"}],"properties":{"Node name for S&R":"SamplerCustomAdvanced"}},{"id":16,"type":"KSamplerSelect","pos":[430,380],"size":{"0":320,"1":60},"flags":{},"order":2,"mode":0,"outputs":[{"name":"SAMPLER","type":"SAMPLER","links":[19],"shape":3,"label":"采样器"}],"properties":{"Node name for S&R":"KSamplerSelect"},"widgets_values":["euler"]},{"id":17,"type":"BasicScheduler","pos":[430,490],"size":{"0":320,"1":106},"flags":{},"order":11,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":86,"slot_index":0,"label":"模型"}],"outputs":[{"name":"SIGMAS","type":"SIGMAS","links":[20],"shape":3,"label":"Sigmas"}],"properties":{"Node name for S&R":"BasicScheduler"},"widgets_values":["simple",10,0.8]},{"id":22,"type":"BasicGuider","pos":[630,720],"size":{"0":140,"1":50},"flags":{"collapsed":false},"order":13,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":87,"slot_index":0,"label":"模型"},{"name":"conditioning","type":"CONDITIONING","link":40,"slot_index":1,"label":"条件"}],"outputs":[{"name":"GUIDER","type":"GUIDER","links":[30],"slot_index":0,"shape":3,"label":"引导"}],"properties":{"Node name for S&R":"BasicGuider"}},{"id":25,"type":"RandomNoise","pos":[430,240],"size":{"0":320,"1":82},"flags":{},"order":3,"mode":0,"outputs":[{"name":"NOISE","type":"NOISE","links":[37],"shape":3,"label":"噪波生成"}],"properties":{"Node name for S&R":"RandomNoise"},"widgets_values":[917354872681369,"randomize"]},{"id":28,"type":"String Literal","pos":[30,560],"size":{"0":320,"1":200},"flags":{},"order":4,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[47],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"String Literal"},"widgets_values":["man,photo,reality,",true]},{"id":52,"type":"Note","pos":[847,699],"size":{"0":346.2236022949219,"1":58},"flags":{},"order":5,"mode":0,"properties":{"text":""},"widgets_values":["To see the preview, update your ComfyUI and go into the Manager menu. Set \"Preview Method\" to \"Auto\""],"color":"#432","bgcolor":"#653"},{"id":53,"type":"Note","pos":[11,844],"size":{"0":519.1436157226562,"1":287.5044860839844},"flags":{},"order":6,"mode":0,"properties":{"text":""},"widgets_values":["The checkpoint goes in ComfyUI/models/unet (not checkpoints)\nDownload the original weights here:\nhttps://huggingface.co/black-forest-labs/FLUX.1-dev/blob/main/flux1-dev.sft\n\nDownload the fp8 version for <24gb vram systems:\nhttps://huggingface.co/Kijai/flux-fp8/blob/main/flux1-dev-fp8.safetensors\n\nText encoders go in ComfyUI/models/clip:\nhttps://huggingface.co/comfyanonymous/flux_text_encoders/tree/main\n\nVAE (ae.sft) goes in ComfyUI/models/vae:\nhttps://huggingface.co/black-forest-labs/FLUX.1-schnell/blob/main/ae.sft\n\nDownload the fp8 t5xxl for degraded quality but less RAM use\nLaunch ComfyUI with \"--lowvram\" arg (in the .bat file) to offload text encoder to CPU.\n\nI can confirm this runs on:\n- RTX 3090 (24gb) 1.29s/it\n- RTX 4070 (12gb) 85s/it\n- RTX 4080s (16gb) 28.99 seconds\nBoth running the fp8 quantized version. The 4070 is very slow though."],"color":"#432","bgcolor":"#653"},{"id":61,"type":"UNETLoader","pos":[20,80],"size":{"0":315,"1":82},"flags":{},"order":7,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":null,"shape":3,"label":"模型"}],"properties":{"Node name for S&R":"UNETLoader"},"widgets_values":["iclight_sd15_fbc.safetensors","default"]},{"id":62,"type":"UNETLoader","pos":[20,80],"size":{"0":315,"1":82},"flags":{},"order":8,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[86,87],"shape":3,"label":"模型"}],"properties":{"Node name for S&R":"UNETLoader"},"widgets_values":["flux/flux1-dev-fp8.safetensors","fp8_e4m3fn"]},{"id":63,"type":"LoadImage","pos":[440,-350],"size":[320,310],"flags":{},"order":9,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[88,92],"slot_index":0,"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["微信图片_20240816145004.png","image"]},{"id":64,"type":"VAEEncode","pos":[440,100],"size":{"0":300,"1":80},"flags":{},"order":12,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":88,"label":"图像"},{"name":"vae","type":"VAE","link":90,"label":"VAE"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[89],"slot_index":0,"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":65,"type":"Image Comparer (rgthree)","pos":{"0":1490,"1":-370,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":380,"1":390},"flags":{},"order":16,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":91,"label":"图像_A","dir":3},{"name":"image_b","type":"IMAGE","link":92,"label":"图像_B","dir":3}],"outputs":[],"properties":{"comparer_mode":"Slide"},"widgets_values":[[{"name":"A","selected":true,"url":"/api/view?filename=rgthree.compare._temp_pdoft_00019_.png&type=temp&subfolder=&rand=0.7865265762600784"},{"name":"B","selected":true,"url":"/api/view?filename=rgthree.compare._temp_pdoft_00020_.png&type=temp&subfolder=&rand=0.44222334188072443"}]]},{"id":66,"type":"PreviewImage","pos":[1020,-250],"size":[210,250],"flags":{},"order":17,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":93,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}}],"links":[[10,11,0,6,0,"CLIP"],[12,10,0,8,1,"VAE"],[19,16,0,13,2,"SAMPLER"],[20,17,0,13,3,"SIGMAS"],[24,13,0,8,0,"LATENT"],[30,22,0,13,1,"GUIDER"],[37,25,0,13,0,"NOISE"],[40,6,0,22,1,"CONDITIONING"],[47,28,0,6,1,"STRING"],[86,62,0,17,0,"MODEL"],[87,62,0,22,0,"MODEL"],[88,63,0,64,0,"IMAGE"],[89,64,0,13,4,"LATENT"],[90,10,0,64,1,"VAE"],[91,8,0,65,0,"IMAGE"],[92,63,0,65,1,"IMAGE"],[93,8,0,66,0,"IMAGE"]],"groups":[{"title":"Load FLUX.1","bounding":[1,2,367,462],"color":"#3f789e","font_size":24,"locked":false},{"title":"Set Parameters","bounding":[380,0,425,620],"color":"#3f789e","font_size":24,"locked":false},{"title":"FLUX Prompt","bounding":[0,470,368,318],"color":"#3f789e","font_size":24,"locked":false},{"title":"Conditioning","bounding":[380,632,423,158],"color":"#3f789e","font_size":24,"locked":false},{"title":"1st Pass","bounding":[815,1,409,788],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{"ds":{"scale":0.7972024500000072,"offset":[-543.396883343065,260.8593040661072]},"workspace_info":{"id":"PjpWKSLmq0aYmJ1GckOc6","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}