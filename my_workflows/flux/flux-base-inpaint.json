{"last_node_id":72,"last_link_id":112,"nodes":[{"id":9,"type":"SaveImage","pos":[1491,93],"size":{"0":400,"1":500},"flags":{},"order":19,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":9,"label":"图像"}],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["MarkuryFLUX"]},{"id":52,"type":"Note","pos":[847,699],"size":{"0":346.2236022949219,"1":58},"flags":{},"order":0,"mode":0,"properties":{"text":""},"widgets_values":["To see the preview, update your ComfyUI and go into the Manager menu. Set \"Preview Method\" to \"Auto\""],"color":"#432","bgcolor":"#653"},{"id":53,"type":"Note","pos":[11,844],"size":{"0":519.1436157226562,"1":287.5044860839844},"flags":{},"order":1,"mode":0,"properties":{"text":""},"widgets_values":["The checkpoint goes in ComfyUI/models/unet (not checkpoints)\nDownload the original weights here:\nhttps://huggingface.co/black-forest-labs/FLUX.1-dev/blob/main/flux1-dev.sft\n\nDownload the fp8 version for <24gb vram systems:\nhttps://huggingface.co/Kijai/flux-fp8/blob/main/flux1-dev-fp8.safetensors\n\nText encoders go in ComfyUI/models/clip:\nhttps://huggingface.co/comfyanonymous/flux_text_encoders/tree/main\n\nVAE (ae.sft) goes in ComfyUI/models/vae:\nhttps://huggingface.co/black-forest-labs/FLUX.1-schnell/blob/main/ae.sft\n\nDownload the fp8 t5xxl for degraded quality but less RAM use\nLaunch ComfyUI with \"--lowvram\" arg (in the .bat file) to offload text encoder to CPU.\n\nI can confirm this runs on:\n- RTX 3090 (24gb) 1.29s/it\n- RTX 4070 (12gb) 85s/it\n- RTX 4080s (16gb) 28.99 seconds\nBoth running the fp8 quantized version. The 4070 is very slow though."],"color":"#432","bgcolor":"#653"},{"id":61,"type":"UNETLoader","pos":[20,80],"size":{"0":315,"1":82},"flags":{},"order":2,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":null,"shape":3,"label":"模型"}],"properties":{"Node name for S&R":"UNETLoader"},"widgets_values":["iclight_sd15_fbc.safetensors","default"]},{"id":13,"type":"SamplerCustomAdvanced","pos":[830,90],"size":{"0":360,"1":540},"flags":{},"order":17,"mode":0,"inputs":[{"name":"noise","type":"NOISE","link":37,"slot_index":0,"label":"噪波生成"},{"name":"guider","type":"GUIDER","link":30,"slot_index":1,"label":"引导"},{"name":"sampler","type":"SAMPLER","link":19,"slot_index":2,"label":"采样器"},{"name":"sigmas","type":"SIGMAS","link":20,"slot_index":3,"label":"Sigmas"},{"name":"latent_image","type":"LATENT","link":110,"slot_index":4,"label":"Latent"}],"outputs":[{"name":"output","type":"LATENT","links":[24],"shape":3,"slot_index":0,"label":"输出"},{"name":"denoised_output","type":"LATENT","links":null,"shape":3,"label":"降噪输出"}],"properties":{"Node name for S&R":"SamplerCustomAdvanced"}},{"id":25,"type":"RandomNoise","pos":[430,240],"size":{"0":320,"1":82},"flags":{},"order":3,"mode":0,"outputs":[{"name":"NOISE","type":"NOISE","links":[37],"shape":3,"label":"噪波生成"}],"properties":{"Node name for S&R":"RandomNoise"},"widgets_values":[823351654542685,"randomize"]},{"id":22,"type":"BasicGuider","pos":[630,720],"size":{"0":140,"1":50},"flags":{"collapsed":false},"order":16,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":87,"slot_index":0,"label":"模型"},{"name":"conditioning","type":"CONDITIONING","link":106,"slot_index":1,"label":"条件"}],"outputs":[{"name":"GUIDER","type":"GUIDER","links":[30],"shape":3,"slot_index":0,"label":"引导"}],"properties":{"Node name for S&R":"BasicGuider"}},{"id":8,"type":"VAEDecode","pos":[1250,95],"size":{"0":220,"1":46},"flags":{},"order":18,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":24,"label":"Latent"},{"name":"vae","type":"VAE","link":12,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[9,91],"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":65,"type":"Image Comparer (rgthree)","pos":{"0":1490,"1":-370,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":380,"1":390},"flags":{},"order":20,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":91,"label":"图像_A","dir":3},{"name":"image_b","type":"IMAGE","link":92,"label":"图像_B","dir":3}],"outputs":[],"properties":{"comparer_mode":"Slide"},"widgets_values":[["/view?filename=rgthree.compare._temp_cfkpj_00005_.png&type=temp&subfolder=&rand=0.05742851143107597","/view?filename=rgthree.compare._temp_cfkpj_00006_.png&type=temp&subfolder=&rand=0.6961315906138024"]]},{"id":64,"type":"VAEEncode","pos":[440,100],"size":{"0":140,"1":70},"flags":{},"order":10,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":88,"label":"图像"},{"name":"vae","type":"VAE","link":90,"label":"VAE"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[93],"shape":3,"label":"Latent","slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":66,"type":"SetLatentNoiseMask","pos":[600,100],"size":{"0":150,"1":70},"flags":{},"order":14,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":93,"label":"Latent"},{"name":"mask","type":"MASK","link":95,"label":"遮罩"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[],"shape":3,"label":"Latent","slot_index":0}],"properties":{"Node name for S&R":"SetLatentNoiseMask"}},{"id":28,"type":"String Literal","pos":[26,560],"size":{"0":320,"1":200},"flags":{},"order":4,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[47],"shape":3,"slot_index":0,"label":"STRING"}],"properties":{"Node name for S&R":"String Literal"},"widgets_values":["short hair"]},{"id":6,"type":"CLIPTextEncode","pos":[400,720],"size":{"0":210,"1":54},"flags":{"collapsed":false},"order":12,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":10,"label":"CLIP"},{"name":"text","type":"STRING","link":47,"widget":{"name":"text"},"slot_index":1,"label":"文本"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[105],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":63,"type":"LoadImage","pos":[440,-350],"size":[320,310],"flags":{},"order":5,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[88,92,107],"shape":3,"label":"图像","slot_index":0},{"name":"MASK","type":"MASK","links":[95,108],"shape":3,"label":"遮罩","slot_index":1}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["clipspace/clipspace-mask-947533.599999994.png [input]","image"]},{"id":10,"type":"VAELoader","pos":[26,379],"size":{"0":320,"1":60},"flags":{},"order":6,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[12,90,109],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["flux/ae.sft"]},{"id":71,"type":"InpaintModelConditioning","pos":[860,-130],"size":{"0":216.59999084472656,"1":106},"flags":{},"order":15,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":105,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":112,"label":"负面条件"},{"name":"vae","type":"VAE","link":109,"label":"VAE"},{"name":"pixels","type":"IMAGE","link":107,"label":"图像"},{"name":"mask","type":"MASK","link":108,"label":"遮罩"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[106],"shape":3,"label":"正面条件","slot_index":0},{"name":"negative","type":"CONDITIONING","links":null,"shape":3,"label":"负面条件"},{"name":"latent","type":"LATENT","links":[110],"shape":3,"label":"Latent","slot_index":2}],"properties":{"Node name for S&R":"InpaintModelConditioning"}},{"id":72,"type":"CLIPTextEncode","pos":[130,-100],"size":{"0":210,"1":76},"flags":{},"order":13,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":111,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[112],"shape":3,"label":"条件","slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":16,"type":"KSamplerSelect","pos":[430,380],"size":{"0":320,"1":60},"flags":{},"order":7,"mode":0,"outputs":[{"name":"SAMPLER","type":"SAMPLER","links":[19],"shape":3,"label":"采样器"}],"properties":{"Node name for S&R":"KSamplerSelect"},"widgets_values":["dpmpp_2m"]},{"id":62,"type":"UNETLoader","pos":[20,80],"size":{"0":315,"1":82},"flags":{},"order":8,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[86,87],"shape":3,"label":"模型"}],"properties":{"Node name for S&R":"UNETLoader"},"widgets_values":["flux/flux1-dev.safetensors","fp8_e4m3fn"]},{"id":11,"type":"DualCLIPLoader","pos":[20,210],"size":{"0":320,"1":106},"flags":{},"order":9,"mode":0,"outputs":[{"name":"CLIP","type":"CLIP","links":[10,111],"shape":3,"slot_index":0,"label":"CLIP"}],"properties":{"Node name for S&R":"DualCLIPLoader"},"widgets_values":["sd3/t5xxl_fp16.safetensors","clip_l.safetensors","flux"]},{"id":17,"type":"BasicScheduler","pos":[432,491],"size":{"0":320,"1":106},"flags":{},"order":11,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":86,"slot_index":0,"label":"模型"}],"outputs":[{"name":"SIGMAS","type":"SIGMAS","links":[20],"shape":3,"label":"Sigmas"}],"properties":{"Node name for S&R":"BasicScheduler"},"widgets_values":["sgm_uniform",10,0.8]}],"links":[[9,8,0,9,0,"IMAGE"],[10,11,0,6,0,"CLIP"],[12,10,0,8,1,"VAE"],[19,16,0,13,2,"SAMPLER"],[20,17,0,13,3,"SIGMAS"],[24,13,0,8,0,"LATENT"],[30,22,0,13,1,"GUIDER"],[37,25,0,13,0,"NOISE"],[47,28,0,6,1,"STRING"],[86,62,0,17,0,"MODEL"],[87,62,0,22,0,"MODEL"],[88,63,0,64,0,"IMAGE"],[90,10,0,64,1,"VAE"],[91,8,0,65,0,"IMAGE"],[92,63,0,65,1,"IMAGE"],[93,64,0,66,0,"LATENT"],[95,63,1,66,1,"MASK"],[105,6,0,71,0,"CONDITIONING"],[106,71,0,22,1,"CONDITIONING"],[107,63,0,71,3,"IMAGE"],[108,63,1,71,4,"MASK"],[109,10,0,71,2,"VAE"],[110,71,2,13,4,"LATENT"],[111,11,0,72,0,"CLIP"],[112,72,0,71,1,"CONDITIONING"]],"groups":[{"title":"Load FLUX.1","bounding":[1,2,367,462],"color":"#3f789e","font_size":24,"locked":false},{"title":"Set Parameters","bounding":[379,0,425,620],"color":"#3f789e","font_size":24,"locked":false},{"title":"FLUX Prompt","bounding":[1,473,368,318],"color":"#3f789e","font_size":24,"locked":false},{"title":"Conditioning","bounding":[380,632,423,158],"color":"#3f789e","font_size":24,"locked":false},{"title":"1st Pass","bounding":[815,1,409,788],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{"ds":{"scale":0.7247295000000017,"offset":[441.522354172994,120.96876660744955]},"workspace_info":{"id":"0GiVcCD8hSMBU_arguKUh","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}