{"last_node_id":1019,"last_link_id":2273,"nodes":[{"id":619,"type":"Reroute","pos":{"0":420,"1":-250},"size":[75,26],"flags":{},"order":56,"mode":0,"inputs":[{"name":"","type":"*","link":2213}],"outputs":[{"name":"","type":"IMAGE","links":[2062],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":876,"type":"Reroute","pos":{"0":-2430,"1":1570},"size":[75,26],"flags":{},"order":43,"mode":0,"inputs":[{"name":"","type":"*","link":2225}],"outputs":[{"name":"MASK","type":"MASK","links":[2216],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":879,"type":"List of strings [Crystools]","pos":{"0":-1930,"1":1610},"size":{"0":320,"1":270},"flags":{},"order":21,"mode":0,"inputs":[{"name":"string_1","type":"STRING","link":1963,"slot_index":0,"widget":{"name":"string_1"},"label":"字符串_1"},{"name":"string_2","type":"STRING","link":1964,"widget":{"name":"string_2"},"label":"字符串_2"},{"name":"string_3","type":"STRING","link":null,"widget":{"name":"string_3"},"label":"字符串_3"}],"outputs":[{"name":"concatenated","type":"STRING","links":[1958],"slot_index":0,"shape":3,"label":"字符串合并"},{"name":"list_string","type":"ListString","links":null,"shape":6,"label":"字符串列表"}],"properties":{"Node name for S&R":"List of strings [Crystools]"},"widgets_values":["","","","","","","","",","]},{"id":882,"type":"KSampler (Efficient)","pos":{"0":40,"1":1600},"size":{"0":330,"1":560},"flags":{},"order":62,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2263,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":1966,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":1967,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":1968,"label":"Latent"},{"name":"optional_vae","type":"VAE","link":1969,"label":"VAE(可选)"},{"name":"script","type":"SCRIPT","link":null,"slot_index":5,"label":"脚本"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":[],"slot_index":3,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[],"slot_index":4,"shape":3,"label":"VAE"},{"name":"IMAGE","type":"IMAGE","links":[2217],"slot_index":5,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[683979475968105,null,8,2,"dpmpp_sde","karras",0.8,"none","true"],"color":"#222233","bgcolor":"#333355","shape":1},{"id":883,"type":"INPAINT_VAEEncodeInpaintConditioning","pos":{"0":-340,"1":1780},"size":{"0":292.20001220703125,"1":106},"flags":{},"order":61,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":2264,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":2265,"label":"负面条件"},{"name":"vae","type":"VAE","link":1972,"label":"VAE"},{"name":"pixels","type":"IMAGE","link":2215,"label":"图像"},{"name":"mask","type":"MASK","link":2216,"label":"遮罩"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1966],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[1967],"slot_index":1,"shape":3,"label":"负面条件"},{"name":"latent_inpaint","type":"LATENT","links":[],"slot_index":2,"shape":3,"label":"局部重绘Latent"},{"name":"latent_samples","type":"LATENT","links":[1968],"slot_index":3,"shape":3,"label":"采样Latent"}],"properties":{"Node name for S&R":"INPAINT_VAEEncodeInpaintConditioning"}},{"id":932,"type":"CR LoRA Stack","pos":{"0":-1580,"1":1590},"size":{"0":315,"1":342},"flags":{},"order":0,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"label":"LoRA堆"}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[2072],"shape":3},{"name":"show_help","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"CR LoRA Stack"},"widgets_values":["On","train_lora/prod_lora/20240806/20240806085732_f14b08eccaff43c4be566ce6c62aaeac/spmf_12019_r_2024080608/spmf_12019_r_2024080608.safetensors",0.8,1,"Off","None",1,1,"Off","None",1,1]},{"id":946,"type":"Reroute","pos":{"0":-2400,"1":620},"size":[82,26],"flags":{},"order":25,"mode":0,"inputs":[{"name":"","type":"*","link":2170}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2142],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":948,"type":"Reroute","pos":{"0":-2400,"1":860},"size":[75,26],"flags":{},"order":26,"mode":0,"inputs":[{"name":"","type":"*","link":2172}],"outputs":[{"name":"","type":"IMAGE","links":[2141],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":949,"type":"ControlNetLoader","pos":{"0":-2210,"1":450},"size":{"0":315,"1":58},"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[2134,2135],"slot_index":0,"shape":3,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union-sdxl-promax-1.0.safetensors"]},{"id":952,"type":"Reroute","pos":{"0":-2400,"1":410},"size":[75,26],"flags":{},"order":37,"mode":0,"inputs":[{"name":"","type":"*","link":2165}],"outputs":[{"name":"","type":"CONDITIONING","links":[2143],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":953,"type":"Reroute","pos":{"0":-2400,"1":450},"size":[75,26],"flags":{},"order":38,"mode":0,"inputs":[{"name":"","type":"*","link":2166}],"outputs":[{"name":"","type":"CONDITIONING","links":[2144],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":964,"type":"Reroute","pos":{"0":-2430,"1":2520},"size":[82,26],"flags":{},"order":28,"mode":0,"inputs":[{"name":"","type":"*","link":2178}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2152]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":965,"type":"Reroute","pos":{"0":-2430,"1":2760},"size":[75,26],"flags":{},"order":29,"mode":0,"inputs":[{"name":"","type":"*","link":2179}],"outputs":[{"name":"","type":"IMAGE","links":[2156]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":968,"type":"Reroute","pos":{"0":-2430,"1":2260},"size":[75,26],"flags":{},"order":40,"mode":0,"inputs":[{"name":"","type":"*","link":2173}],"outputs":[{"name":"","type":"CONDITIONING","links":[2150]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":969,"type":"Reroute","pos":{"0":-2430,"1":2310},"size":[75,26],"flags":{},"order":41,"mode":0,"inputs":[{"name":"","type":"*","link":2174}],"outputs":[{"name":"","type":"CONDITIONING","links":[2151]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":958,"type":"workflow/controlnet","pos":{"0":-2210,"1":570},"size":{"0":315,"1":190},"flags":{},"order":44,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":2134,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":2143,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":2144,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":2142,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[2133],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[2137],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnet"},"widgets_values":["canny/lineart/anime_lineart/mlsd",0.5,0,1]},{"id":960,"type":"workflow/controlnet","pos":{"0":-2210,"1":810},"size":{"0":315,"1":190},"flags":{},"order":46,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":2135,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":2133,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":2137,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":2141,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[2220],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[2221],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnet"},"widgets_values":["openpose",0.5,0,1]},{"id":623,"type":"List of strings [Crystools]","pos":{"0":-1920,"1":-210},"size":{"0":320,"1":270},"flags":{},"order":20,"mode":0,"inputs":[{"name":"string_1","type":"STRING","link":1859,"slot_index":0,"widget":{"name":"string_1"},"label":"字符串_1"},{"name":"string_2","type":"STRING","link":1792,"widget":{"name":"string_2"},"label":"字符串_2"},{"name":"string_3","type":"STRING","link":null,"widget":{"name":"string_3"},"label":"字符串_3"}],"outputs":[{"name":"concatenated","type":"STRING","links":[1215],"slot_index":0,"shape":3,"label":"字符串合并"},{"name":"list_string","type":"ListString","links":null,"shape":6,"label":"字符串列表"}],"properties":{"Node name for S&R":"List of strings [Crystools]"},"widgets_values":["","","","","","","","",","]},{"id":611,"type":"Reroute","pos":{"0":-2390,"1":-210},"size":[75,26],"flags":{},"order":42,"mode":0,"inputs":[{"name":"","type":"*","link":2223,"slot_index":0}],"outputs":[{"name":"MASK","type":"MASK","links":[2212],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":977,"type":"ColorToMask","pos":{"0":-2740,"1":-210},"size":{"0":315,"1":178},"flags":{},"order":24,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2163,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[2222],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ColorToMask"},"widgets_values":[true,100,100,100,100,12]},{"id":995,"type":"ImpactGaussianBlurMask","pos":{"0":-2760,"1":40},"size":{"0":315,"1":82},"flags":{},"order":33,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2222,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2223],"shape":3,"label":"遮罩","slot_index":0}],"properties":{"Node name for S&R":"ImpactGaussianBlurMask"},"widgets_values":[10,10]},{"id":982,"type":"ColorToMask","pos":{"0":-2890,"1":1590},"size":{"0":315,"1":178},"flags":{},"order":27,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2191,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[2224],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ColorToMask"},"widgets_values":[true,100,100,100,100,12]},{"id":996,"type":"ImpactGaussianBlurMask","pos":{"0":-2880,"1":1820},"size":{"0":315,"1":82},"flags":{},"order":34,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2224,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2225],"shape":3,"label":"遮罩","slot_index":0}],"properties":{"Node name for S&R":"ImpactGaussianBlurMask"},"widgets_values":[10,10]},{"id":631,"type":"KSampler (Efficient)","pos":{"0":-10,"1":-220},"size":{"0":330,"1":560},"flags":{},"order":55,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2228,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":1431,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":1432,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":1837,"label":"Latent"},{"name":"optional_vae","type":"VAE","link":1239,"label":"VAE(可选)"},{"name":"script","type":"SCRIPT","link":null,"slot_index":5,"label":"脚本"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":[],"slot_index":3,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[],"slot_index":4,"shape":3,"label":"VAE"},{"name":"IMAGE","type":"IMAGE","links":[2213],"slot_index":5,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[976931946697756,null,8,2,"dpmpp_sde","karras",0.8,"none","true"],"color":"#222233","bgcolor":"#333355","shape":1},{"id":632,"type":"INPAINT_VAEEncodeInpaintConditioning","pos":{"0":-410,"1":-60},"size":{"0":292.20001220703125,"1":106},"flags":{},"order":54,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":2253,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":2254,"label":"负面条件"},{"name":"vae","type":"VAE","link":1228,"label":"VAE"},{"name":"pixels","type":"IMAGE","link":2211,"label":"图像"},{"name":"mask","type":"MASK","link":2212,"label":"遮罩"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1431],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[1432],"slot_index":1,"shape":3,"label":"负面条件"},{"name":"latent_inpaint","type":"LATENT","links":[],"slot_index":2,"shape":3,"label":"局部重绘Latent"},{"name":"latent_samples","type":"LATENT","links":[1837],"slot_index":3,"shape":3,"label":"采样Latent"}],"properties":{"Node name for S&R":"INPAINT_VAEEncodeInpaintConditioning"}},{"id":972,"type":"workflow/controlnet","pos":{"0":-2240,"1":2470},"size":{"0":315,"1":190},"flags":{},"order":45,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":2149,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":2150,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":2151,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":2152,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[2154],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[2155],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnet"},"widgets_values":["canny/lineart/anime_lineart/mlsd",0.5,0,1]},{"id":973,"type":"workflow/controlnet","pos":{"0":-2240,"1":2710},"size":{"0":315,"1":190},"flags":{},"order":47,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":2153,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":2154,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":2155,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":2156,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[2232],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[2233],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnet"},"widgets_values":["openpose",0.5,0,1]},{"id":966,"type":"ControlNetLoader","pos":{"0":-2240,"1":2350},"size":{"0":315,"1":58},"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[2149,2153],"slot_index":0,"shape":3,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union-sdxl-promax-1.0.safetensors"]},{"id":1005,"type":"Reroute","pos":{"0":-1050,"1":690},"size":[82,26],"flags":{},"order":35,"mode":0,"inputs":[{"name":"","type":"*","link":2258,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2239]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1006,"type":"Reroute","pos":{"0":-1050,"1":550},"size":[82,26],"flags":{},"order":36,"mode":0,"inputs":[{"name":"","type":"*","link":2256,"label":""}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2238]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1013,"type":"Reroute","pos":{"0":-1010,"1":1060},"size":[82,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":2260,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2248]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1014,"type":"Reroute","pos":{"0":-1010,"1":1150},"size":[82,26],"flags":{},"order":58,"mode":0,"inputs":[{"name":"","type":"*","link":2270,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2250]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1015,"type":"Reroute","pos":{"0":-1010,"1":1010},"size":[82,26],"flags":{},"order":39,"mode":0,"inputs":[{"name":"","type":"*","link":2261,"label":""}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2249]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":962,"type":"Reroute","pos":{"0":-1250,"1":480},"size":[75,26],"flags":{},"order":48,"mode":0,"inputs":[{"name":"","type":"*","link":2220}],"outputs":[{"name":"","type":"CONDITIONING","links":[2251],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":963,"type":"Reroute","pos":{"0":-1250,"1":540},"size":[75,26],"flags":{},"order":49,"mode":0,"inputs":[{"name":"","type":"*","link":2221}],"outputs":[{"name":"","type":"CONDITIONING","links":[2252],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":1000,"type":"ApplyInstantIDAdvanced","pos":{"0":-360,"1":570},"size":{"0":315,"1":338},"flags":{},"order":52,"mode":0,"inputs":[{"name":"instantid","type":"INSTANTID","link":2234,"slot_index":0,"label":"InstantID"},{"name":"insightface","type":"FACEANALYSIS","link":2235,"slot_index":1,"label":"InsightFace"},{"name":"control_net","type":"CONTROL_NET","link":2236,"slot_index":2,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":2237,"label":"图像"},{"name":"model","type":"MODEL","link":2238,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":2251,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":2252,"label":"负面条件"},{"name":"image_kps","type":"IMAGE","link":2239,"label":"图像_kps"},{"name":"mask","type":"MASK","link":null,"label":"遮罩"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2255],"slot_index":0,"shape":3,"label":"模型"},{"name":"positive","type":"CONDITIONING","links":[2253],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[2254],"slot_index":2,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"ApplyInstantIDAdvanced"},"widgets_values":[0.8,0.8,0,1,0.1,"average"]},{"id":350,"type":"Efficient Loader","pos":{"0":-890,"1":-210},"size":{"0":370,"1":470},"flags":{},"order":31,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":2073,"slot_index":0,"label":"LoRA堆"},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":null,"slot_index":1,"label":"ControlNet堆"},{"name":"positive","type":"STRING","link":1215,"widget":{"name":"positive"},"label":"正面条件"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2256],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[2165],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[2166],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":[],"slot_index":3,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[1228,1239],"slot_index":4,"shape":3,"label":"VAE"},{"name":"CLIP","type":"CLIP","links":[],"slot_index":5,"shape":3,"label":"CLIP"},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":[],"slot_index":6,"shape":3,"label":"依赖"}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["sdxl/dreamshaperXL_v21TurboDPMSDE.safetensors","Baked VAE",-2,"None",1.3,1,"a female,vividly,skin_texture,Vivid,light and shadow of details, beautiful face,headshot,,best quality,highres,bright,Ultra clear details","embedding:negativeXL_D.safetensors, NSFW, worst quality, normal quality, low quality, low res, blurry, text, watermark, logo, banner, extra digits, cropped, jpeg artifacts, signature, username, error, sketch, duplicate, ugly, monochrome, horror, geometry, mutation, disgusting ","mean","comfy",512,512,1,true,true],"color":"#332233","bgcolor":"#553355","shape":1},{"id":1004,"type":"Reroute","pos":{"0":-1050,"1":600},"size":[82,26],"flags":{},"order":23,"mode":0,"inputs":[{"name":"","type":"*","link":2257,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2237]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":603,"type":"Reroute","pos":{"0":-2390,"1":-260},"size":[82,26],"flags":{},"order":30,"mode":0,"inputs":[{"name":"","type":"*","link":2112}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2211,2258],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":999,"type":"DifferentialDiffusion","pos":{"0":-390,"1":170},"size":{"0":210,"1":26},"flags":{},"order":53,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2255,"label":"模型"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2228],"shape":3,"label":"模型","slot_index":0}],"properties":{"Node name for S&R":"DifferentialDiffusion"}},{"id":1018,"type":"DifferentialDiffusion","pos":{"0":-290,"1":1650},"size":{"0":210,"1":26},"flags":{},"order":60,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2262,"label":"模型"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2263],"shape":3,"label":"模型","slot_index":0}],"properties":{"Node name for S&R":"DifferentialDiffusion"}},{"id":1009,"type":"ApplyInstantIDAdvanced","pos":{"0":-730,"1":1040},"size":{"0":315,"1":338},"flags":{},"order":59,"mode":0,"inputs":[{"name":"instantid","type":"INSTANTID","link":2271,"slot_index":0,"label":"InstantID"},{"name":"insightface","type":"FACEANALYSIS","link":2272,"slot_index":1,"label":"InsightFace"},{"name":"control_net","type":"CONTROL_NET","link":2273,"slot_index":2,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":2248,"label":"图像"},{"name":"model","type":"MODEL","link":2249,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":2266,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":2267,"label":"负面条件"},{"name":"image_kps","type":"IMAGE","link":2250,"label":"图像_kps"},{"name":"mask","type":"MASK","link":null,"label":"遮罩"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2262],"slot_index":0,"shape":3,"label":"模型"},{"name":"positive","type":"CONDITIONING","links":[2264],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[2265],"slot_index":2,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"ApplyInstantIDAdvanced"},"widgets_values":[0.8,0.8,0,1,0.1,"average"]},{"id":975,"type":"Reroute","pos":{"0":-1280,"1":2380},"size":[75,26],"flags":{},"order":50,"mode":0,"inputs":[{"name":"","type":"*","link":2232}],"outputs":[{"name":"","type":"CONDITIONING","links":[2266],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":976,"type":"Reroute","pos":{"0":-1280,"1":2440},"size":[75,26],"flags":{},"order":51,"mode":0,"inputs":[{"name":"","type":"*","link":2233}],"outputs":[{"name":"","type":"CONDITIONING","links":[2267],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":874,"type":"Efficient Loader","pos":{"0":-840,"1":1610},"size":{"0":370,"1":470},"flags":{},"order":32,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":2072,"slot_index":0,"label":"LoRA堆"},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":null,"slot_index":1,"label":"ControlNet堆"},{"name":"positive","type":"STRING","link":1958,"widget":{"name":"positive"},"label":"正面条件"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2261],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[2173],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[2174],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":[],"slot_index":3,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[1969,1972],"slot_index":4,"shape":3,"label":"VAE"},{"name":"CLIP","type":"CLIP","links":[],"slot_index":5,"shape":3,"label":"CLIP"},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":[],"slot_index":6,"shape":3,"label":"依赖"}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["sdxl/dreamshaperXL_v21TurboDPMSDE.safetensors","Baked VAE",-2,"None",1.3,1,"a female,vividly,skin_texture,Vivid,light and shadow of details, beautiful face,headshot,,best quality,highres,bright,Ultra clear details","embedding:negativeXL_D.safetensors, NSFW, worst quality, normal quality, low quality, low res, blurry, text, watermark, logo, banner, extra digits, cropped, jpeg artifacts, signature, username, error, sketch, duplicate, ugly, monochrome, horror, geometry, mutation, disgusting ","mean","comfy",512,512,1,true,true],"color":"#332233","bgcolor":"#553355","shape":1},{"id":878,"type":"Reroute","pos":{"0":470,"1":1570},"size":[75,26],"flags":{},"order":63,"mode":0,"inputs":[{"name":"","type":"*","link":2217}],"outputs":[{"name":"","type":"IMAGE","links":[2268],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":1019,"type":"ReActorRestoreFace","pos":{"0":670,"1":1640},"size":{"0":315,"1":130},"flags":{},"order":64,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2268,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2269],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ReActorRestoreFace"},"widgets_values":["retinaface_resnet50","codeformer-v0.1.0.pth",1,0.5]},{"id":945,"type":"Save Image To OSS And Display","pos":{"0":1050,"1":1630},"size":{"0":315,"1":82},"flags":{},"order":65,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2269,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["comfyui","JPEG"]},{"id":917,"type":"Reroute","pos":{"0":-2430,"1":1520},"size":[82,26],"flags":{},"order":57,"mode":0,"inputs":[{"name":"","type":"*","link":2062}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2215,2270],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":624,"type":"Primitive string multiline [Crystools]","pos":{"0":-2240,"1":-160},"size":[230,81],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"string","type":"STRING","links":[1859],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["face1_prompt1",true]},{"id":625,"type":"Primitive string multiline [Crystools]","pos":{"0":-2270,"1":20},"size":[280,81],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"string","type":"STRING","links":[1792],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["face1_prompt2",true]},{"id":880,"type":"Primitive string multiline [Crystools]","pos":{"0":-2350,"1":1620},"size":{"0":380,"1":130},"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"string","type":"STRING","links":[1963],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["face2_prompt1",true]},{"id":881,"type":"Primitive string multiline [Crystools]","pos":{"0":-2340,"1":1810},"size":{"0":390,"1":140},"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"string","type":"STRING","links":[1964],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["face2_prompt2",true]},{"id":1017,"type":"LoadBatchImageByUrl","pos":{"0":-1700,"1":1240},"size":{"0":400,"1":200},"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"images","type":"IMAGE","links":[2260],"shape":3,"label":"images","slot_index":0}],"properties":{"Node name for S&R":"LoadBatchImageByUrl"},"widgets_values":["face2_batch2",true,true]},{"id":1016,"type":"LoadBatchImageByUrl","pos":{"0":-1750,"1":460},"size":{"0":400,"1":200},"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"images","type":"IMAGE","links":[2257],"shape":3,"label":"images","slot_index":0}],"properties":{"Node name for S&R":"LoadBatchImageByUrl"},"widgets_values":["face1_batch",true,true]},{"id":935,"type":"Load Image From Url","pos":{"0":-3230,"1":-190},"size":{"0":400,"1":140},"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2163],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["face1_mask",true]},{"id":937,"type":"Load Image From Url","pos":{"0":-3220,"1":90},"size":{"0":400,"1":150},"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2170],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["face1_canny",true]},{"id":939,"type":"Load Image From Url","pos":{"0":-3230,"1":340},"size":{"0":420,"1":160},"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2172],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["face1_openpose",true]},{"id":940,"type":"Load Image From Url","pos":{"0":-3380,"1":1600},"size":{"0":430,"1":200},"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2191],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["face2_mask",true]},{"id":942,"type":"Load Image From Url","pos":{"0":-3350,"1":2130},"size":{"0":410,"1":120},"flags":{},"order":13,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2178],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["face2_canny",true]},{"id":944,"type":"Load Image From Url","pos":{"0":-3350,"1":2390},"size":{"0":400,"1":170},"flags":{},"order":14,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2179],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["face2_openpose",true]},{"id":933,"type":"CR LoRA Stack","pos":{"0":-1570,"1":-210},"size":[250,340],"flags":{},"order":15,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"label":"LoRA堆"}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[2073],"slot_index":0,"shape":3},{"name":"show_help","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"CR LoRA Stack"},"widgets_values":["On","train_lora/prod_lora/20240721/20240721150623_ac8537d21164455b8e5c9932c23c05e8/spmf_4_r_2024072115/spmf_4_r_2024072115.safetensors",0.8,1,"Off","None",1,1,"Off","None",1,1]},{"id":934,"type":"Load Image From Url","pos":{"0":-3230,"1":-450},"size":{"0":400,"1":160},"flags":{},"order":16,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2112],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["pose",true]},{"id":1001,"type":"InstantIDModelLoader","pos":{"0":-790,"1":600},"size":{"0":315,"1":58},"flags":{},"order":17,"mode":0,"inputs":[],"outputs":[{"name":"INSTANTID","type":"INSTANTID","links":[2234,2271],"shape":3,"label":"INSTANTID","slot_index":0}],"properties":{"Node name for S&R":"InstantIDModelLoader"},"widgets_values":["ip-adapter_instant_id_sdxl.bin"]},{"id":1002,"type":"InstantIDFaceAnalysis","pos":{"0":-790,"1":720},"size":{"0":315,"1":58},"flags":{},"order":18,"mode":0,"inputs":[],"outputs":[{"name":"FACEANALYSIS","type":"FACEANALYSIS","links":[2235,2272],"shape":3,"label":"面部分析","slot_index":0}],"properties":{"Node name for S&R":"InstantIDFaceAnalysis"},"widgets_values":["CUDA"]},{"id":1003,"type":"ControlNetLoader","pos":{"0":-780,"1":850},"size":{"0":315,"1":58},"flags":{},"order":19,"mode":0,"inputs":[],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[2236,2273],"shape":3,"label":"ControlNet","slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["control_instant_id_sdxl.safetensors"]}],"links":[[1215,623,0,350,2,"STRING"],[1228,350,4,632,2,"VAE"],[1239,350,4,631,4,"VAE"],[1431,632,0,631,1,"CONDITIONING"],[1432,632,1,631,2,"CONDITIONING"],[1792,625,0,623,1,"STRING"],[1837,632,3,631,3,"LATENT"],[1859,624,0,623,0,"STRING"],[1958,879,0,874,2,"STRING"],[1963,880,0,879,0,"STRING"],[1964,881,0,879,1,"STRING"],[1966,883,0,882,1,"CONDITIONING"],[1967,883,1,882,2,"CONDITIONING"],[1968,883,3,882,3,"LATENT"],[1969,874,4,882,4,"VAE"],[1972,874,4,883,2,"VAE"],[2062,619,0,917,0,"*"],[2072,932,0,874,0,"LORA_STACK"],[2073,933,0,350,0,"LORA_STACK"],[2112,934,0,603,0,"*"],[2133,958,0,960,1,"CONDITIONING"],[2134,949,0,958,0,"CONTROL_NET"],[2135,949,0,960,0,"CONTROL_NET"],[2137,958,1,960,2,"CONDITIONING"],[2141,948,0,960,3,"IMAGE"],[2142,946,0,958,3,"IMAGE"],[2143,952,0,958,1,"CONDITIONING"],[2144,953,0,958,2,"CONDITIONING"],[2149,966,0,972,0,"CONTROL_NET"],[2150,968,0,972,1,"CONDITIONING"],[2151,969,0,972,2,"CONDITIONING"],[2152,964,0,972,3,"IMAGE"],[2153,966,0,973,0,"CONTROL_NET"],[2154,972,0,973,1,"CONDITIONING"],[2155,972,1,973,2,"CONDITIONING"],[2156,965,0,973,3,"IMAGE"],[2163,935,0,977,0,"IMAGE"],[2165,350,1,952,0,"*"],[2166,350,2,953,0,"*"],[2170,937,0,946,0,"*"],[2172,939,0,948,0,"*"],[2173,874,1,968,0,"*"],[2174,874,2,969,0,"*"],[2178,942,0,964,0,"*"],[2179,944,0,965,0,"*"],[2191,940,0,982,0,"IMAGE"],[2211,603,0,632,3,"IMAGE"],[2212,611,0,632,4,"MASK"],[2213,631,5,619,0,"*"],[2215,917,0,883,3,"IMAGE"],[2216,876,0,883,4,"MASK"],[2217,882,5,878,0,"*"],[2220,960,0,962,0,"*"],[2221,960,1,963,0,"*"],[2222,977,0,995,0,"MASK"],[2223,995,0,611,0,"*"],[2224,982,0,996,0,"MASK"],[2225,996,0,876,0,"*"],[2228,999,0,631,0,"MODEL"],[2232,973,0,975,0,"*"],[2233,973,1,976,0,"*"],[2234,1001,0,1000,0,"INSTANTID"],[2235,1002,0,1000,1,"FACEANALYSIS"],[2236,1003,0,1000,2,"CONTROL_NET"],[2237,1004,0,1000,3,"IMAGE"],[2238,1006,0,1000,4,"MODEL"],[2239,1005,0,1000,7,"IMAGE"],[2248,1013,0,1009,3,"IMAGE"],[2249,1015,0,1009,4,"MODEL"],[2250,1014,0,1009,7,"IMAGE"],[2251,962,0,1000,5,"CONDITIONING"],[2252,963,0,1000,6,"CONDITIONING"],[2253,1000,1,632,0,"CONDITIONING"],[2254,1000,2,632,1,"CONDITIONING"],[2255,1000,0,999,0,"MODEL"],[2256,350,0,1006,0,"*"],[2257,1016,0,1004,0,"*"],[2258,603,0,1005,0,"*"],[2260,1017,0,1013,0,"*"],[2261,874,0,1015,0,"*"],[2262,1009,0,1018,0,"MODEL"],[2263,1018,0,882,0,"MODEL"],[2264,1009,1,883,0,"CONDITIONING"],[2265,1009,2,883,1,"CONDITIONING"],[2266,975,0,1009,5,"CONDITIONING"],[2267,976,0,1009,6,"CONDITIONING"],[2268,878,0,1019,0,"IMAGE"],[2269,1019,0,945,0,"IMAGE"],[2270,917,0,1014,0,"*"],[2271,1001,0,1009,0,"INSTANTID"],[2272,1002,0,1009,1,"FACEANALYSIS"],[2273,1003,0,1009,2,"CONTROL_NET"]],"groups":[{"title":"IP","bounding":[-1020,490,1005,487],"color":"#3f789e","font_size":24,"flags":{}},{"title":"step1-inpaint","bounding":[-1010,-310,1489,745],"color":"#3f789e","font_size":24,"flags":{}},{"title":"输入条件","bounding":[-2350,-310,1130,550],"color":"#3f789e","font_size":24,"flags":{}},{"title":"face2-输入条件","bounding":[-2400,1460,1180,560],"color":"#3f789e","font_size":24,"flags":{}},{"title":"face2-sample","bounding":[-960,1450,1467,738],"color":"#3f789e","font_size":24,"flags":{}},{"title":"controlnet","bounding":[-2370,360,1150,700],"color":"#3f789e","font_size":24,"flags":{}},{"title":"controlnet_2","bounding":[-2400,2200,1160,760],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.6588450000000345,"offset":[1629.0151232087348,-552.4967675834247]},"groupNodes":{"controlnet":{"nodes":[{"type":"SetUnionControlNetType","pos":[2680,790],"size":{"0":315,"1":58},"flags":{},"order":23,"mode":0,"inputs":[{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[],"shape":3,"label":"ControlNet","slot_index":0}],"properties":{"Node name for S&R":"SetUnionControlNetType"},"widgets_values":["canny/lineart/anime_lineart/mlsd"],"index":0},{"type":"ControlNetApplyAdvanced","pos":[2670,580],"size":{"0":315,"1":166},"flags":{},"order":36,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":null,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":null,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":null,"label":"图像"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[],"shape":3,"label":"正面条件","slot_index":0},{"name":"negative","type":"CONDITIONING","links":[],"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.3,0,1],"index":1}],"links":[[0,0,1,2,956,"CONTROL_NET"]],"external":[]},"inpaint_pre":{"nodes":[{"type":"InpaintPreprocessor","pos":[3100,440],"size":{"0":210,"1":46},"flags":{},"order":23,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":null,"label":"图像"},{"name":"mask","type":"MASK","link":null,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"InpaintPreprocessor"},"index":0},{"type":"Images to RGB","pos":[3110,530],"size":{"0":210,"1":26},"flags":{},"order":35,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":null,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"Images to RGB"},"index":1}],"links":[[null,0,1,0,950,"*"]],"external":[[1,0,"IMAGE"]]}},"workspace_info":{"id":"ZuYHGR7zSFhrw9-PU9Emn"}},"version":0.4}