{"last_node_id":160,"last_link_id":111,"nodes":[{"id":96,"type":"CLIPTextEncode","pos":[1132,-153],"size":{"0":400,"1":200},"flags":{"collapsed":true},"order":7,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":104,"label":"CLIP"},{"name":"text","type":"STRING","link":10,"widget":{"name":"text"},"label":"文本"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[5],"shape":3,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":141,"type":"Reroute","pos":[1945,-639],"size":[75,26],"flags":{},"order":9,"mode":0,"inputs":[{"name":"","type":"*","link":110}],"outputs":[{"name":"","type":"IMAGE","links":[84,85,97],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":65,"type":"CheckpointLoaderSimple","pos":[995,285],"size":{"0":315,"1":98},"flags":{},"order":0,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[106,108],"shape":3,"label":"模型"},{"name":"CLIP","type":"CLIP","links":[107,109],"shape":3,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[4],"shape":3,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sdxl/dreamshaperXL_v21TurboDPMSDE.safetensors"]},{"id":102,"type":"Load Image From Url","pos":[1113,-400],"size":{"0":400,"1":200},"flags":{},"order":1,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[42],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["http://dlm-ai.oss-cn-hangzhou.aliyuncs.com/retake/input/8db8efcf26b4c06bc0084e3e76394bd.jpg"]},{"id":72,"type":"ImageResize+","pos":[1550,-394],"size":{"0":315,"1":218},"flags":{},"order":6,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":42,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[110],"shape":3,"label":"图像","slot_index":0},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[768,1024,"lanczos",false,"always",8]},{"id":97,"type":"CLIPTextEncode","pos":[1327,-69],"size":{"0":400,"1":200},"flags":{},"order":8,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":105,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[6],"shape":3,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["worst quality, normal quality, low quality, low res, blurry, text, watermark, logo, banner, extra digits, cropped, jpeg artifacts, signature, username, error, sketch, duplicate, ugly, monochrome, horror, geometry, mutation, disgusting "]},{"id":159,"type":"workflow/lora","pos":[1035,462],"size":{"0":405.5999755859375,"1":238},"flags":{},"order":5,"mode":0,"inputs":[{"name":"模型","type":"MODEL","link":106,"label":"模型"},{"name":"CLIP","type":"CLIP","link":107,"label":"CLIP"},{"name":"LoraLoader model","type":"MODEL","link":108,"label":"LoraLoader model"},{"name":"LoraLoader clip","type":"CLIP","link":109,"label":"LoraLoader clip"}],"outputs":[{"name":"模型","type":"MODEL","links":null,"shape":3,"label":"模型"},{"name":"CLIP","type":"CLIP","links":null,"shape":3,"label":"CLIP"},{"name":"LoraLoader 模型","type":"MODEL","links":[102],"shape":3,"label":"LoraLoader 模型"},{"name":"LoraLoader CLIP","type":"CLIP","links":[103,104,105],"shape":3,"label":"LoraLoader CLIP"}],"properties":{"Node name for S&R":"workflow/lora"},"widgets_values":["add-detail-xl.safetensors",0.73,0.76,"train_lora/20240617/0fc34073-501a-4626-8b58-c62b1b19fa54/spmf_20_w_0615/spmf_20_w_0615.safetensors",1,1]},{"id":18,"type":"FaceDetailer","pos":[2267,-11],"size":{"0":506.4000244140625,"1":880},"flags":{"collapsed":true},"order":13,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":98,"label":"图像","slot_index":0},{"name":"model","type":"MODEL","link":102,"label":"模型"},{"name":"clip","type":"CLIP","link":103,"label":"CLIP"},{"name":"vae","type":"VAE","link":4,"label":"VAE"},{"name":"positive","type":"CONDITIONING","link":5,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":6,"label":"负面条件"},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":7,"label":"BBox检测"},{"name":"sam_model_opt","type":"SAM_MODEL","link":8,"label":"SAM模型"},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null,"label":"Segm检测"},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"细化约束"}],"outputs":[{"name":"image","type":"IMAGE","links":[91],"shape":3,"label":"图像","slot_index":0},{"name":"cropped_refined","type":"IMAGE","links":null,"shape":6,"label":"细化图像"},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":null,"shape":6,"label":"细化部分"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"遮罩"},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":[],"shape":3,"label":"细化节点束","slot_index":4},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6,"label":"ControlNet图像"}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[400,true,1024,858394555160101,"randomize",7,3,"dpmpp_sde","karras",0.5,10,true,true,0.5,10,3,"horizontal-2",5,0.5,10,0.5,"Small",25,"",2,true,20]},{"id":158,"type":"Save Image To OSS And Display","pos":[2445,245],"size":{"0":315,"1":58},"flags":{},"order":15,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":99,"label":"images"}],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["comfyui"]},{"id":152,"type":"ImageSharpen","pos":[2269,75],"size":{"0":315,"1":106},"flags":{"collapsed":true},"order":14,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":91,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[99],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageSharpen"},"widgets_values":[1,0.4,0.65]},{"id":17,"type":"SAMLoader","pos":[2083,129],"size":{"0":315,"1":82},"flags":{"collapsed":true},"order":2,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[8],"shape":3,"label":"SAM模型"}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_h_4b8939.pth","Prefer GPU"]},{"id":35,"type":"UltralyticsDetectorProvider","pos":[2088,62],"size":{"0":315,"1":78},"flags":{"collapsed":true},"order":3,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[7],"shape":3,"label":"BBox检测"},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null,"shape":3,"label":"SEGM检测"}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":153,"type":"ImageBatch","pos":[2164,-627],"size":{"0":210,"1":46},"flags":{},"order":10,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":84,"label":"图像1"},{"name":"image2","type":"IMAGE","link":85,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[87,88],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageBatch"}},{"id":157,"type":"ImageBatch","pos":[2158,-432],"size":{"0":210,"1":46},"flags":{},"order":12,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":100,"label":"图像1"},{"name":"image2","type":"IMAGE","link":97,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[98],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageBatch"}},{"id":154,"type":"ImageBatch","pos":[2159,-532],"size":{"0":210,"1":46},"flags":{},"order":11,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":87,"label":"图像1"},{"name":"image2","type":"IMAGE","link":88,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[100],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageBatch"}},{"id":95,"type":"String Literal","pos":[885,-60],"size":{"0":400,"1":200},"flags":{},"order":4,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[10],"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"String Literal"},"widgets_values":["1man,vividly,handsome,handsome_eyes,(smile:0.8),skin_texture,Vivid,light and shadow of details, handsome face,headshot,,best quality,highres,bright,Ultra clear details"]}],"links":[[4,65,2,18,3,"VAE"],[5,96,0,18,4,"CONDITIONING"],[6,97,0,18,5,"CONDITIONING"],[7,35,0,18,6,"BBOX_DETECTOR"],[8,17,0,18,7,"SAM_MODEL"],[10,95,0,96,1,"STRING"],[42,102,0,72,0,"IMAGE"],[84,141,0,153,0,"IMAGE"],[85,141,0,153,1,"IMAGE"],[87,153,0,154,0,"IMAGE"],[88,153,0,154,1,"IMAGE"],[91,18,0,152,0,"IMAGE"],[97,141,0,157,1,"IMAGE"],[98,157,0,18,0,"IMAGE"],[99,152,0,158,0,"IMAGE"],[100,154,0,157,0,"IMAGE"],[102,159,2,18,1,"MODEL"],[103,159,3,18,2,"CLIP"],[104,159,3,96,0,"CLIP"],[105,159,3,97,0,"CLIP"],[106,65,0,159,0,"MODEL"],[107,65,1,159,1,"CLIP"],[108,65,0,159,2,"MODEL"],[109,65,1,159,3,"CLIP"],[110,72,0,141,0,"*"]],"groups":[{"title":"Group","bounding":[2141,-679,239,305],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{"ds":{"scale":0.45,"offset":{"0":1985.666520245877,"1":1154.6666097005236}},"groupNodes":{"lora":{"nodes":[{"type":"LoraLoader","pos":[492,527],"size":{"0":315,"1":126},"flags":{},"order":6,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":null,"label":"模型"},{"name":"clip","type":"CLIP","link":null,"label":"CLIP"}],"outputs":[{"name":"MODEL","type":"MODEL","links":null,"shape":3,"label":"模型"},{"name":"CLIP","type":"CLIP","links":null,"shape":3,"label":"CLIP"}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["add-detail-xl.safetensors",0.73,0.76],"index":0},{"type":"LoraLoader","pos":[484,370],"size":{"0":315,"1":126},"flags":{},"order":7,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":null,"label":"模型"},{"name":"clip","type":"CLIP","link":null,"label":"CLIP"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"shape":3,"label":"模型"},{"name":"CLIP","type":"CLIP","links":[],"shape":3,"label":"CLIP"}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["train_lora/20240617/f368cf66-5777-46dc-b73d-3c3e99e798f8/spmf_20_w_0615/spmf_20_w_0615.safetensors",1,1],"index":1}],"links":[[null,0,0,0,65,"MODEL"],[null,1,0,1,65,"CLIP"],[null,0,1,0,65,"MODEL"],[null,1,1,1,65,"CLIP"]],"external":[[1,0,"MODEL"],[1,1,"CLIP"]]}},"workspace_info":{"id":"xQqnux9lzqPPeyNJqFVFN"}},"version":0.4}