{"last_node_id":101,"last_link_id":170,"nodes":[{"id":83,"type":"Reroute","pos":[-255,-179],"size":[82,26],"flags":{},"order":9,"mode":0,"inputs":[{"name":"","type":"*","link":156}],"outputs":[{"name":"MODEL","type":"MODEL","links":[117],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":73,"type":"Reroute","pos":[-250,-108],"size":[75,26],"flags":{},"order":7,"mode":0,"inputs":[{"name":"","type":"*","link":102}],"outputs":[{"name":"VAE","type":"VAE","links":[103],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":84,"type":"Reroute","pos":[-247,-29],"size":[75,26],"flags":{},"order":10,"mode":0,"inputs":[{"name":"","type":"*","link":157}],"outputs":[{"name":"CLIP","type":"CLIP","links":[118,161,162],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":17,"type":"SAMLoader","pos":[-67,874],"size":{"0":315,"1":82},"flags":{},"order":0,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[51],"shape":3,"label":"SAM模型","slot_index":0}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_h_4b8939.pth","Prefer GPU"]},{"id":35,"type":"UltralyticsDetectorProvider","pos":[-85,737],"size":{"0":315,"1":78},"flags":{},"order":1,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[50],"shape":3,"label":"BBox检测","slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null,"shape":3,"label":"SEGM检测"}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":22,"type":"MaskToImage","pos":[1030,430],"size":{"0":210,"1":26},"flags":{},"order":17,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":39,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[40],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":47,"type":"Reroute","pos":[511,-8],"size":[82,26],"flags":{},"order":5,"mode":0,"inputs":[{"name":"","type":"*","link":146}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[97],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":97,"type":"CLIPTextEncode","pos":[-250,621],"size":{"0":310,"1":90},"flags":{},"order":12,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":162,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[164],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["worst quality, normal quality, low quality, low res, blurry, text, watermark, logo, banner, extra digits, cropped, jpeg artifacts, signature, username, error, sketch, duplicate, ugly, monochrome, horror, geometry, mutation, disgusting "],"color":"#332922","bgcolor":"#593930"},{"id":96,"type":"CLIPTextEncode","pos":[-240,440],"size":{"0":320,"1":70},"flags":{},"order":11,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":161,"label":"CLIP"},{"name":"text","type":"STRING","link":160,"widget":{"name":"text"},"label":"文本","slot_index":1}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[163],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":95,"type":"String Literal","pos":[-830,650],"size":{"0":420,"1":250},"flags":{},"order":2,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[160],"shape":3,"label":"STRING","slot_index":0}],"properties":{"Node name for S&R":"String Literal"},"widgets_values":["vividly,beautiful,skin_texture,Vivid,light and shadow of details, beautiful makeup,headshot,,best quality,highres,bright,Ultra clear details"],"color":"#90cf2e","bgcolor":"#7cbb1a"},{"id":72,"type":"ImageResize+","pos":[90,20],"size":{"0":320,"1":220},"flags":{"collapsed":true},"order":8,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":97,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[99],"shape":3,"label":"图像","slot_index":0},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[1024,0,"lanczos",true,"always",8]},{"id":23,"type":"PreviewImage","pos":[1320,370],"size":{"0":210,"1":246},"flags":{},"order":20,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":40,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":27,"type":"PreviewImage","pos":[1540,250],"size":{"0":220,"1":250},"flags":{},"order":16,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":44,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":18,"type":"FaceDetailer","pos":[370,100],"size":{"0":506.4000244140625,"1":880},"flags":{},"order":13,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":99,"label":"图像","slot_index":0},{"name":"model","type":"MODEL","link":117,"label":"模型"},{"name":"clip","type":"CLIP","link":118,"label":"CLIP"},{"name":"vae","type":"VAE","link":103,"label":"VAE"},{"name":"positive","type":"CONDITIONING","link":163,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":164,"label":"负面条件"},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":50,"label":"BBox检测"},{"name":"sam_model_opt","type":"SAM_MODEL","link":51,"label":"SAM模型"},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null,"label":"Segm检测","slot_index":8},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"细化约束","slot_index":9}],"outputs":[{"name":"image","type":"IMAGE","links":[127],"shape":3,"label":"图像","slot_index":0},{"name":"cropped_refined","type":"IMAGE","links":[43],"shape":6,"label":"细化图像","slot_index":1},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":[44],"shape":6,"label":"细化部分","slot_index":2},{"name":"mask","type":"MASK","links":[39],"shape":3,"label":"遮罩","slot_index":3},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":[],"shape":3,"label":"细化节点束","slot_index":4},{"name":"cnet_images","type":"IMAGE","links":[],"shape":6,"label":"ControlNet图像","slot_index":5}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[400,true,1024,464167175761696,"randomize",7,3,"dpmpp_sde","karras",0.3,10,true,true,0.5,10,3,"horizontal-2",5,0.5,10,0.5,"Small",25,"",2,true,20]},{"id":86,"type":"Reroute","pos":[1094,30],"size":[82,26],"flags":{},"order":14,"mode":0,"inputs":[{"name":"","type":"*","link":127}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[147,169],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":43,"type":"Image Comparer (rgthree)","pos":{"0":1510,"1":-510,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":548.2069702148438,"1":604.4353637695312},"flags":{},"order":21,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":110,"label":"图像_A","dir":3},{"name":"image_b","type":"IMAGE","link":170,"label":"图像_B","dir":3}],"outputs":[],"properties":{"comparer_mode":"Slide"},"widgets_values":[["/view?filename=rgthree.compare._temp_teszt_00131_.png&type=temp&subfolder=&rand=0.5662343394025882","/view?filename=rgthree.compare._temp_teszt_00132_.png&type=temp&subfolder=&rand=0.037152521770631"]]},{"id":89,"type":"SaveImage","pos":[980,260],"size":{"0":320,"1":270},"flags":{},"order":18,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":147,"label":"图像"}],"properties":{},"widgets_values":["ComfyUI"]},{"id":91,"type":"workflow/lora","pos":[-800,330],"size":{"0":405.5999755859375,"1":238},"flags":{},"order":6,"mode":0,"inputs":[{"name":"模型","type":"MODEL","link":152,"label":"模型"},{"name":"CLIP","type":"CLIP","link":153,"label":"CLIP"},{"name":"LoraLoader model","type":"MODEL","link":150,"label":"LoraLoader model"},{"name":"LoraLoader clip","type":"CLIP","link":151,"label":"LoraLoader clip"}],"outputs":[{"name":"模型","type":"MODEL","links":[],"shape":3,"label":"模型","slot_index":0},{"name":"CLIP","type":"CLIP","links":[],"shape":3,"label":"CLIP","slot_index":1},{"name":"LoraLoader 模型","type":"MODEL","links":[156],"shape":3,"label":"LoraLoader 模型","slot_index":2},{"name":"LoraLoader CLIP","type":"CLIP","links":[157],"shape":3,"label":"LoraLoader CLIP","slot_index":3}],"properties":{"Node name for S&R":"workflow/lora"},"widgets_values":["add-detail-xl.safetensors",0.73,0.76,"train_lora/20240615/2185c882-8949-4781-b211-b63b3b447ea4/spmf_20_w_0612/spmf_20_w_0612.safetensors",1,1]},{"id":25,"type":"LoadImage","pos":[580,-500],"size":{"0":340,"1":400},"flags":{},"order":3,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[110,146],"shape":3,"label":"图像","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["89166456b770cdbc498581d68e89939 (1).png","image"]},{"id":101,"type":"ImageSharpen","pos":[1760,140],"size":{"0":315,"1":106},"flags":{},"order":19,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":169,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[170],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageSharpen"},"widgets_values":[1,0.4,0.65]},{"id":26,"type":"PreviewImage","pos":[2070,310],"size":{"0":433.1789855957031,"1":460.10040283203125},"flags":{},"order":15,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":43,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":65,"type":"CheckpointLoaderSimple","pos":[-750,100],"size":{"0":315,"1":98},"flags":{},"order":4,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[150,152],"slot_index":0,"label":"模型"},{"name":"CLIP","type":"CLIP","links":[151,153],"slot_index":1,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[102],"slot_index":2,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sdxl/dreamshaperXL_v21TurboDPMSDE.safetensors"]}],"links":[[39,18,3,22,0,"MASK"],[40,22,0,23,0,"IMAGE"],[43,18,1,26,0,"IMAGE"],[44,18,2,27,0,"IMAGE"],[50,35,0,18,6,"BBOX_DETECTOR"],[51,17,0,18,7,"SAM_MODEL"],[97,47,0,72,0,"IMAGE"],[99,72,0,18,0,"IMAGE"],[102,65,2,73,0,"*"],[103,73,0,18,3,"VAE"],[110,25,0,43,0,"IMAGE"],[117,83,0,18,1,"MODEL"],[118,84,0,18,2,"CLIP"],[127,18,0,86,0,"*"],[146,25,0,47,0,"*"],[147,86,0,89,0,"IMAGE"],[150,65,0,91,2,"MODEL"],[151,65,1,91,3,"CLIP"],[152,65,0,91,0,"MODEL"],[153,65,1,91,1,"CLIP"],[156,91,2,83,0,"*"],[157,91,3,84,0,"*"],[160,95,0,96,1,"STRING"],[161,84,0,96,0,"CLIP"],[162,84,0,97,0,"CLIP"],[163,96,0,18,4,"CONDITIONING"],[164,97,0,18,5,"CONDITIONING"],[169,86,0,101,0,"IMAGE"],[170,101,0,43,1,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.45,"offset":{"0":2583.6111111111113,"1":961.2794731987847}},"groupNodes":{"lora":{"nodes":[{"type":"LoraLoader","pos":[-800,640],"size":{"0":355.24432373046875,"1":262.62286376953125},"flags":{},"order":4,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":null,"label":"模型","slot_index":0},{"name":"clip","type":"CLIP","link":null,"label":"CLIP","slot_index":1}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"shape":3,"label":"模型","slot_index":0},{"name":"CLIP","type":"CLIP","links":[],"shape":3,"label":"CLIP","slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["add-detail-xl.safetensors",1,1],"index":0},{"type":"LoraLoader","pos":[-790,330],"size":{"0":355.24432373046875,"1":262.62286376953125},"flags":{},"order":5,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":null,"label":"模型","slot_index":0},{"name":"clip","type":"CLIP","link":null,"label":"CLIP","slot_index":1}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"shape":3,"label":"模型","slot_index":0},{"name":"CLIP","type":"CLIP","links":[],"shape":3,"label":"CLIP","slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["train_lora/20240615/660cb022-3640-4828-ab40-023795fee8b6/spmf_20_w_0615/spmf_20_w_0615.safetensors",1,1],"index":1}],"links":[[null,0,1,0,65,"MODEL"],[null,1,1,1,65,"CLIP"]],"external":[[1,0,"MODEL"],[1,1,"CLIP"]]}},"workspace_info":{"id":"Rg3aWbBamIcnTF1CDaBSF"}},"version":0.4}