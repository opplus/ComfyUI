{"last_node_id":283,"last_link_id":717,"nodes":[{"id":6,"type":"LoadImage","pos":[920,-180],"size":{"0":430,"1":530},"flags":{},"order":4,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[434,441],"slot_index":0,"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":[],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["16 (4).png","image"]},{"id":128,"type":"Reroute","pos":[-1780,560],"size":[75,26],"flags":{},"order":6,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"","type":"IMAGE","links":[477,481,501,503,561],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":184,"type":"Image Comparer (rgthree)","pos":{"0":1390,"1":-200,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":390,"1":550},"flags":{},"order":34,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":661,"label":"图像_A","dir":3},{"name":"image_b","type":"IMAGE","link":434,"label":"图像_B","dir":3}],"outputs":[],"properties":{"comparer_mode":"Slide"},"widgets_values":[[{"name":"A","selected":true,"url":"/api/view?filename=rgthree.compare._temp_ftast_00025_.png&type=temp&subfolder=&rand=0.753635824008027"},{"name":"B","selected":true,"url":"/api/view?filename=rgthree.compare._temp_ftast_00026_.png&type=temp&subfolder=&rand=0.09789312366458569"}]]},{"id":191,"type":"ImageToMask","pos":[-460,1030],"size":{"0":370,"1":60},"flags":{},"order":23,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":506,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[510],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":192,"type":"Primitive string multiline [Crystools]","pos":[-850,260],"size":{"0":310,"1":81},"flags":{},"order":5,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[670],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["pixie_hairstyle,hair",true]},{"id":208,"type":"LayerMask: PersonMaskUltra V2","pos":[-1640,610],"size":{"0":315,"1":414},"flags":{},"order":8,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":477,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":[489],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[true,true,false,false,false,false,0.3,"VITMatte",1,6,0.01,0.99,true,"cuda",2]},{"id":210,"type":"MaskToImage","pos":[-1270,830],"size":{"0":300,"1":30},"flags":{},"order":16,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":488,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[483,683],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":211,"type":"LayerMask: PersonMaskUltra V2","pos":[-1650,1100],"size":{"0":315,"1":414},"flags":{},"order":9,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":481,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":[490],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[false,true,false,false,false,false,0.3,"VITMatte",1,6,0.01,0.99,true,"cuda",2]},{"id":213,"type":"PreviewImage","pos":[-930,630],"size":{"0":210,"1":250},"flags":{},"order":19,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":483,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":214,"type":"PreviewImage","pos":[-910,1120],"size":{"0":210,"1":250},"flags":{},"order":20,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":492,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":216,"type":"MaskFix+","pos":[-1280,620],"size":{"0":315,"1":154},"flags":{},"order":12,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":489,"label":"mask"}],"outputs":[{"name":"MASK","type":"MASK","links":[488],"slot_index":0,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,20,0,0,0]},{"id":217,"type":"MaskFix+","pos":[-1280,1110],"size":{"0":315,"1":154},"flags":{},"order":13,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":490,"label":"mask"}],"outputs":[{"name":"MASK","type":"MASK","links":[491],"slot_index":0,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,0,0,0,0]},{"id":218,"type":"MaskToImage","pos":[-1270,1320],"size":{"0":310,"1":30},"flags":{},"order":17,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":491,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[492,684],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":220,"type":"LayerMask: PersonMaskUltra V2","pos":[-1640,1580],"size":{"0":315,"1":414},"flags":{},"order":10,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":501,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":[500],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[true,true,true,true,true,false,0.4,"VITMatte",6,6,0.01,0.99,true,"cuda",2]},{"id":221,"type":"MaskFix+","pos":[-1260,1590],"size":{"0":315,"1":154},"flags":{},"order":14,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":500,"label":"mask"}],"outputs":[{"name":"MASK","type":"MASK","links":[499],"slot_index":0,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,0,0,0,0]},{"id":222,"type":"MaskToImage","pos":[-1250,1800],"size":{"0":310,"1":30},"flags":{},"order":18,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":499,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[502,507],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":223,"type":"PreviewImage","pos":[-910,1590],"size":{"0":210,"1":250},"flags":{},"order":21,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":502,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":224,"type":"GetHairInpaintMask","pos":[-460,770],"size":{"0":380,"1":190},"flags":{},"order":22,"mode":0,"inputs":[{"name":"person_image","type":"IMAGE","link":503,"label":"person_image"},{"name":"body_mask","type":"IMAGE","link":507,"label":"body_mask"},{"name":"head_mask","type":"IMAGE","link":683,"label":"head_mask"},{"name":"hair_mask","type":"IMAGE","link":684,"label":"hair_mask"},{"name":"hair_config","type":"STRING","link":517,"widget":{"name":"hair_config"},"label":"hair_config"}],"outputs":[{"name":"hair_inpaint_mask","type":"IMAGE","links":[506],"slot_index":0,"shape":3,"label":"hair_inpaint_mask"}],"properties":{"Node name for S&R":"GetHairInpaintMask"},"widgets_values":["ori_hair","{}",50,""]},{"id":227,"type":"MaskFix+","pos":[-470,1170],"size":{"0":390,"1":160},"flags":{},"order":24,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":510,"label":"mask"}],"outputs":[{"name":"MASK","type":"MASK","links":[562],"slot_index":0,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,10,0,0,0]},{"id":228,"type":"MaskToImage","pos":[450,370],"size":{"0":280,"1":30},"flags":{"collapsed":true},"order":29,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":717,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[548],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":230,"type":"Primitive string multiline [Crystools]","pos":[-480,590],"size":{"0":400,"1":110},"flags":{},"order":0,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[517],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["{\n  \"hair_bangs\":true,\n  \"hair_subtype\":\"all\"\n}",true]},{"id":239,"type":"ImageCompositeMasked","pos":[660,370],"size":{"0":315,"1":146},"flags":{"collapsed":true},"order":31,"mode":0,"inputs":[{"name":"destination","type":"IMAGE","link":677,"label":"目标图像"},{"name":"source","type":"IMAGE","link":548,"label":"源图像"},{"name":"mask","type":"MASK","link":678,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[551],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,false]},{"id":240,"type":"PreviewImage","pos":[450,-200],"size":{"0":380,"1":510},"flags":{},"order":33,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":551,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":248,"type":"InpaintCrop","pos":[-480,1410],"size":{"0":440,"1":390},"flags":{},"order":25,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":561,"label":"image"},{"name":"mask","type":"MASK","link":562,"label":"mask"},{"name":"optional_context_mask","type":"MASK","link":null,"label":"optional_context_mask"}],"outputs":[{"name":"stitch","type":"STITCH","links":[656],"slot_index":0,"shape":3,"label":"stitch"},{"name":"cropped_image","type":"IMAGE","links":[636],"slot_index":1,"shape":3,"label":"cropped_image"},{"name":"cropped_mask","type":"MASK","links":[635],"slot_index":2,"shape":3,"label":"cropped_mask"}],"properties":{"Node name for S&R":"InpaintCrop"},"widgets_values":[0,1,true,0,false,16,"bicubic","ranged size",1024,1024,1,512,512,768,768,32]},{"id":256,"type":"Reroute","pos":[210,800],"size":[75,26],"flags":{},"order":11,"mode":0,"inputs":[{"name":"","type":"*","link":671,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"STRING","links":[685],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":257,"type":"KSampler (Efficient)","pos":[1460,700],"size":[330,560],"flags":{},"order":30,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":712,"slot_index":0,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":713,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":714,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":715,"slot_index":3,"label":"Latent"},{"name":"optional_vae","type":"VAE","link":622,"slot_index":4,"label":"VAE(可选)"},{"name":"script","type":"SCRIPT","link":null,"label":"脚本"}],"outputs":[{"name":"MODEL","type":"MODEL","links":null,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":null,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":null,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":null,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":null,"shape":3,"label":"VAE"},{"name":"IMAGE","type":"IMAGE","links":[633],"slot_index":5,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[-1,null,25,8,"dpmpp_sde","karras",1,"auto","true"],"color":"#443322","bgcolor":"#665533","shape":1},{"id":258,"type":"Reroute","pos":[200,730],"size":[75,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":635}],"outputs":[{"name":"","type":"MASK","links":[678,711,717],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":259,"type":"Efficient Loader","pos":[420,700],"size":{"0":400,"1":470},"flags":{},"order":15,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":682,"label":"LoRA堆"},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":null,"slot_index":1,"label":"ControlNet堆"},{"name":"positive","type":"STRING","link":685,"widget":{"name":"positive"},"label":"正面条件"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[703],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[709],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[710],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":null,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[622,704],"slot_index":4,"shape":3,"label":"VAE"},{"name":"CLIP","type":"CLIP","links":[708],"slot_index":5,"shape":3,"label":"CLIP"},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":null,"shape":3,"label":"依赖"}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["sd1.5/dreamshaper_8.safetensors","Baked VAE",-1,"None",1,1,"more hair","embedding:realisticvision-negative-embedding.pt,flowers,hand,(greyscale:1.2),\npaintings, sketches, (worst quality:2), (low quality:2), (normal quality:2), lowres, normal quality, ((monochrome)), ((grayscale)), skin spots, acnes, skin blemishes, age spot, glans,2D,3D,cartoon,anime","none","comfy++",512,512,1,true,true],"color":"#332233","bgcolor":"#553355","shape":1},{"id":263,"type":"Reroute","pos":[200,660],"size":[75,26],"flags":{},"order":26,"mode":0,"inputs":[{"name":"","type":"*","link":636}],"outputs":[{"name":"","type":"IMAGE","links":[677,706],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":266,"type":"InpaintStitch","pos":[1960,740],"size":{"0":315,"1":78},"flags":{},"order":32,"mode":0,"inputs":[{"name":"stitch","type":"STITCH","link":656,"label":"stitch"},{"name":"inpainted_image","type":"IMAGE","link":633,"label":"inpainted_image"}],"outputs":[{"name":"image","type":"IMAGE","links":[661],"slot_index":0,"shape":3,"label":"image"}],"properties":{"Node name for S&R":"InpaintStitch"},"widgets_values":["bislerp"]},{"id":268,"type":"BrushNetLoader","pos":[980,1140],"size":{"0":315,"1":82},"flags":{},"order":3,"mode":0,"outputs":[{"name":"brushnet","type":"BRMODEL","links":[707],"slot_index":0,"shape":3,"label":"BrushNet"}],"properties":{"Node name for S&R":"BrushNetLoader"},"widgets_values":["powerpaint/powerpaint_v2_brushnet_fp16.safetensors","float16"]},{"id":274,"type":"LoRA Stacker","pos":[-470,80],"size":{"0":320,"1":154},"flags":{},"order":1,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"label":"LoRA堆"}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[682],"slot_index":0,"shape":3,"label":"LoRA堆"}],"properties":{"Node name for S&R":"LoRA Stacker"},"widgets_values":["advanced",1,"sd1.5/hairstyle/pixie_hairstyle-05.safetensors",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1,"None",1,1,1],"color":"#222233","bgcolor":"#333355","shape":1},{"id":275,"type":"Primitive string multiline [Crystools]","pos":[-850,400],"size":{"0":310,"1":81},"flags":{},"order":2,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[672],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["4k, high-res, masterpiece, best quality,real",true]},{"id":277,"type":"JoinStringMulti","pos":[-470,320],"size":{"0":320,"1":150},"flags":{},"order":7,"mode":0,"inputs":[{"name":"string_1","type":"STRING","link":670,"widget":{"name":"string_1"},"label":"字符串_1"},{"name":"string_2","type":"STRING","link":672,"widget":{"name":"string_2"},"label":"字符串_2"}],"outputs":[{"name":"string","type":"STRING","links":[671],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"JoinStringMulti"},"widgets_values":[2,"","",",",false,null]},{"id":282,"type":"PowerPaint","pos":[980,770],"size":{"0":315,"1":318},"flags":{},"order":28,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":703,"label":"模型"},{"name":"vae","type":"VAE","link":704,"label":"VAE"},{"name":"image","type":"IMAGE","link":706,"label":"图像"},{"name":"mask","type":"MASK","link":711,"label":"遮罩"},{"name":"powerpaint","type":"BRMODEL","link":707,"label":"PowerPaint"},{"name":"clip","type":"CLIP","link":708,"label":"CLIP"},{"name":"positive","type":"CONDITIONING","link":709,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":710,"label":"负面条件"}],"outputs":[{"name":"model","type":"MODEL","links":[712],"slot_index":0,"shape":3,"label":"模型"},{"name":"positive","type":"CONDITIONING","links":[713],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[714],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"latent","type":"LATENT","links":[715],"slot_index":3,"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"PowerPaint"},"widgets_values":[1,"text guided",1,0,10000,"none"]}],"links":[[434,6,0,184,1,"IMAGE"],[441,6,0,128,0,"*"],[477,128,0,208,0,"IMAGE"],[481,128,0,211,0,"IMAGE"],[483,210,0,213,0,"IMAGE"],[488,216,0,210,0,"MASK"],[489,208,1,216,0,"MASK"],[490,211,1,217,0,"MASK"],[491,217,0,218,0,"MASK"],[492,218,0,214,0,"IMAGE"],[499,221,0,222,0,"MASK"],[500,220,1,221,0,"MASK"],[501,128,0,220,0,"IMAGE"],[502,222,0,223,0,"IMAGE"],[503,128,0,224,0,"IMAGE"],[506,224,0,191,0,"IMAGE"],[507,222,0,224,1,"IMAGE"],[510,191,0,227,0,"MASK"],[517,230,0,224,4,"STRING"],[548,228,0,239,1,"IMAGE"],[551,239,0,240,0,"IMAGE"],[561,128,0,248,0,"IMAGE"],[562,227,0,248,1,"MASK"],[622,259,4,257,4,"VAE"],[633,257,5,266,1,"IMAGE"],[635,248,2,258,0,"*"],[636,248,1,263,0,"*"],[656,248,0,266,0,"STITCH"],[661,266,0,184,0,"IMAGE"],[670,192,0,277,0,"STRING"],[671,277,0,256,0,"*"],[672,275,0,277,1,"STRING"],[677,263,0,239,0,"IMAGE"],[678,258,0,239,2,"MASK"],[682,274,0,259,0,"LORA_STACK"],[683,210,0,224,2,"IMAGE"],[684,218,0,224,3,"IMAGE"],[685,256,0,259,2,"STRING"],[703,259,0,282,0,"MODEL"],[704,259,4,282,1,"VAE"],[706,263,0,282,2,"IMAGE"],[707,268,0,282,4,"BRMODEL"],[708,259,5,282,5,"CLIP"],[709,259,1,282,6,"CONDITIONING"],[710,259,2,282,7,"CONDITIONING"],[711,258,0,282,3,"MASK"],[712,282,0,257,0,"MODEL"],[713,282,1,257,1,"CONDITIONING"],[714,282,2,257,2,"CONDITIONING"],[715,282,3,257,3,"LATENT"],[717,258,0,228,0,"MASK"]],"groups":[{"title":"效果查看","bounding":[290,-330,1610,710],"color":"#3f789e","font_size":24,"locked":false},{"title":"头发mask区域绘制","bounding":[-1730,510,1750,1560],"color":"#3f789e","font_size":24,"locked":false},{"title":"sd1.5-brushnet","bounding":[240,530,1616,813],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{"ds":{"scale":1.191817653772858,"offset":[-966.1553823573134,222.56620323212232]},"0246.VERSION":[0,0,4],"workspace_info":{"id":"2wQT3stLNuJykn4f0WsmC","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}