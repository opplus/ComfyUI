{"last_node_id":318,"last_link_id":780,"nodes":[{"id":6,"type":"LoadImage","pos":[920,-180],"size":{"0":430,"1":530},"flags":{},"order":0,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[434,441],"slot_index":0,"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":[],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["17.png","image"]},{"id":128,"type":"Reroute","pos":[-1780,560],"size":[75,26],"flags":{},"order":7,"mode":0,"inputs":[{"name":"","type":"*","link":441}],"outputs":[{"name":"","type":"IMAGE","links":[477,481,501,737,746],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":184,"type":"Image Comparer (rgthree)","pos":{"0":1430,"1":-210,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":390,"1":550},"flags":{},"order":34,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":777,"label":"图像_A","dir":3},{"name":"image_b","type":"IMAGE","link":434,"label":"图像_B","dir":3}],"outputs":[],"properties":{"comparer_mode":"Slide"},"widgets_values":[[{"name":"A","selected":true,"url":"/api/view?filename=rgthree.compare._temp_ytfyf_00005_.png&type=temp&subfolder=&rand=0.1656960798694267"},{"name":"B","selected":true,"url":"/api/view?filename=rgthree.compare._temp_ytfyf_00006_.png&type=temp&subfolder=&rand=0.6335483982232784"}]]},{"id":191,"type":"ImageToMask","pos":[-460,930],"size":{"0":370,"1":60},"flags":{},"order":25,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":750,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[510],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":208,"type":"LayerMask: PersonMaskUltra V2","pos":[-1640,610],"size":{"0":315,"1":414},"flags":{},"order":10,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":477,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":[489],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[true,true,false,false,false,false,0.3,"VITMatte",1,6,0.01,0.99,true,"cuda",2]},{"id":210,"type":"MaskToImage","pos":[-1270,830],"size":{"0":300,"1":30},"flags":{},"order":18,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":488,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[483,748],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":211,"type":"LayerMask: PersonMaskUltra V2","pos":[-1650,1100],"size":{"0":315,"1":414},"flags":{},"order":11,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":481,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":[490],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[false,true,false,false,false,false,0.3,"VITMatte",1,6,0.01,0.99,true,"cuda",2]},{"id":213,"type":"PreviewImage","pos":[-930,630],"size":{"0":210,"1":250},"flags":{},"order":21,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":483,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":214,"type":"PreviewImage","pos":[-910,1120],"size":{"0":210,"1":250},"flags":{},"order":22,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":492,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":216,"type":"MaskFix+","pos":[-1280,620],"size":{"0":315,"1":154},"flags":{},"order":15,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":489,"label":"mask"}],"outputs":[{"name":"MASK","type":"MASK","links":[488],"slot_index":0,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,20,0,0,0]},{"id":217,"type":"MaskFix+","pos":[-1280,1110],"size":{"0":315,"1":154},"flags":{},"order":16,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":490,"label":"mask"}],"outputs":[{"name":"MASK","type":"MASK","links":[491],"slot_index":0,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,0,0,0,0]},{"id":218,"type":"MaskToImage","pos":[-1270,1320],"size":{"0":310,"1":30},"flags":{},"order":19,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":491,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[492,749],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":220,"type":"LayerMask: PersonMaskUltra V2","pos":[-1640,1580],"size":{"0":315,"1":414},"flags":{},"order":12,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":501,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":[500],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[true,true,true,true,true,false,0.4,"VITMatte",6,6,0.01,0.99,true,"cuda",2]},{"id":221,"type":"MaskFix+","pos":[-1260,1590],"size":{"0":315,"1":154},"flags":{},"order":17,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":500,"label":"mask"}],"outputs":[{"name":"MASK","type":"MASK","links":[499],"slot_index":0,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,0,0,0,0]},{"id":222,"type":"MaskToImage","pos":[-1250,1800],"size":{"0":310,"1":30},"flags":{},"order":20,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":499,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[502,747],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":223,"type":"PreviewImage","pos":[-910,1590],"size":{"0":210,"1":250},"flags":{},"order":23,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":502,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":227,"type":"MaskFix+","pos":[-470,1040],"size":{"0":390,"1":160},"flags":{},"order":26,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":510,"label":"mask"}],"outputs":[{"name":"MASK","type":"MASK","links":[736],"slot_index":0,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,10,0,0,0]},{"id":228,"type":"MaskToImage","pos":[470,370],"size":{"0":280,"1":30},"flags":{"collapsed":true},"order":28,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":739,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[548],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":239,"type":"ImageCompositeMasked","pos":[650,370],"size":{"0":315,"1":146},"flags":{"collapsed":true},"order":30,"mode":0,"inputs":[{"name":"destination","type":"IMAGE","link":677,"label":"目标图像"},{"name":"source","type":"IMAGE","link":548,"label":"源图像"},{"name":"mask","type":"MASK","link":740,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[551],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,false]},{"id":240,"type":"PreviewImage","pos":[450,-200],"size":{"0":380,"1":510},"flags":{},"order":32,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":551,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":256,"type":"Reroute","pos":[200,600],"size":[75,26],"flags":{},"order":9,"mode":0,"inputs":[{"name":"","type":"*","link":764,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"STRING","links":[780],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":258,"type":"Reroute","pos":[200,730],"size":[75,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":736}],"outputs":[{"name":"","type":"MASK","links":[739,740,779],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":263,"type":"Reroute","pos":[200,660],"size":[75,26],"flags":{},"order":13,"mode":0,"inputs":[{"name":"","type":"*","link":737}],"outputs":[{"name":"","type":"IMAGE","links":[677,778],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":292,"type":"Primitive string multiline [Crystools]","pos":[-810,150],"size":{"0":400,"1":110},"flags":{},"order":6,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[764],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["头发",true]},{"id":294,"type":"GetHairInpaintMask","pos":[-470,640],"size":{"0":380,"1":210},"flags":{},"order":24,"mode":0,"inputs":[{"name":"person_image","type":"IMAGE","link":746,"label":"person_image"},{"name":"body_mask","type":"IMAGE","link":747,"label":"body_mask"},{"name":"head_mask","type":"IMAGE","link":748,"label":"head_mask"},{"name":"hair_mask","type":"IMAGE","link":749,"label":"hair_mask"},{"name":"hair_type","type":"COMBO","link":753,"widget":{"name":"hair_type"},"label":"hair_type"},{"name":"hair_subtype","type":"COMBO","link":754,"widget":{"name":"hair_subtype"},"label":"hair_subtype"}],"outputs":[{"name":"hair_inpaint_mask","type":"IMAGE","links":[750],"shape":3,"label":"hair_inpaint_mask"}],"properties":{"Node name for S&R":"GetHairInpaintMask"},"widgets_values":["bangs","right_bangs","",50,""]},{"id":296,"type":"PrimitiveNode","pos":[-890,330],"size":{"0":210,"1":110},"flags":{},"order":1,"mode":0,"outputs":[{"name":"COMBO","type":"COMBO","links":[753],"widget":{"name":"hair_type"}}],"properties":{"Run widget replace on values":false},"widgets_values":["bangs","fixed",""]},{"id":297,"type":"PrimitiveNode","pos":[-600,330],"size":{"0":210,"1":110},"flags":{},"order":2,"mode":0,"outputs":[{"name":"COMBO","type":"COMBO","links":[754],"widget":{"name":"hair_subtype"}}],"properties":{"Run widget replace on values":false},"widgets_values":["right_bangs","fixed",""]},{"id":308,"type":"MZ_KolorsUNETLoaderV2","pos":[430,620],"size":{"0":315,"1":58},"flags":{},"order":3,"mode":0,"outputs":[{"name":"model","type":"MODEL","links":[765],"slot_index":0,"shape":3,"label":"模型"}],"properties":{"Node name for S&R":"MZ_KolorsUNETLoaderV2"},"widgets_values":["kolors/kolors-inpaint.safetensors"]},{"id":309,"type":"KSampler","pos":[1230,620],"size":{"0":395,"1":640},"flags":{},"order":31,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":765,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":766,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":767,"slot_index":2,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":768,"slot_index":3,"label":"Latent"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[774],"slot_index":0,"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[953948651774832,"randomize",25,4.98,"euler","ddim_uniform",1]},{"id":310,"type":"MZ_ChatGLM3Loader","pos":[430,730],"size":{"0":315,"1":58},"flags":{},"order":4,"mode":0,"outputs":[{"name":"chatglm3_model","type":"CHATGLM3MODEL","links":[769,770],"slot_index":0,"shape":3,"label":"ChatGLM3"}],"properties":{"Node name for S&R":"MZ_ChatGLM3Loader"},"widgets_values":["chatglm3-4bit.safetensors"]},{"id":311,"type":"MZ_ChatGLM3_V2","pos":[810,620],"size":{"0":390,"1":170},"flags":{},"order":14,"mode":0,"inputs":[{"name":"chatglm3_model","type":"CHATGLM3MODEL","link":769,"label":"ChatGLM3"},{"name":"text","type":"STRING","link":780,"widget":{"name":"text"},"label":"文本"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[766],"slot_index":0,"shape":3,"label":"条件"}],"properties":{"Node name for S&R":"MZ_ChatGLM3_V2"},"widgets_values":["穿着美少女战士的衣服，一件类似于水手服风格的衣服，包括一个白色紧身上衣，前胸搭配一个大大的红色蝴蝶结。衣服的领子部分呈蓝色，并且有白色条纹。她还穿着一条蓝色百褶裙，超高清，辛烷渲染，高级质感，32k，高分辨率，最好的质量，超级细节，景深",true]},{"id":312,"type":"MZ_ChatGLM3_V2","pos":[800,840],"size":{"0":390,"1":185},"flags":{},"order":8,"mode":0,"inputs":[{"name":"chatglm3_model","type":"CHATGLM3MODEL","link":770,"label":"ChatGLM3"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[767],"shape":3,"label":"条件"}],"properties":{"Node name for S&R":"MZ_ChatGLM3_V2"},"widgets_values":["nsfw，脸部阴影，低分辨率，jpeg伪影、模糊、糟糕，黑脸，霓虹灯",true]},{"id":313,"type":"VAEEncodeForInpaint","pos":[810,1070],"size":{"0":385,"1":185},"flags":{},"order":29,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":778,"slot_index":0,"label":"图像"},{"name":"vae","type":"VAE","link":772,"slot_index":1,"label":"VAE"},{"name":"mask","type":"MASK","link":779,"slot_index":2,"label":"遮罩"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[768],"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"VAEEncodeForInpaint"},"widgets_values":[5]},{"id":314,"type":"VAELoader","pos":[430,840],"size":{"0":315,"1":60},"flags":{},"order":5,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[772,775],"shape":3}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["sdxl_vae.safetensors"]},{"id":316,"type":"VAEDecode","pos":[1640,620],"size":{"0":140,"1":50},"flags":{},"order":33,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":774,"label":"Latent"},{"name":"vae","type":"VAE","link":775,"slot_index":1,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[777],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"}}],"links":[[434,6,0,184,1,"IMAGE"],[441,6,0,128,0,"*"],[477,128,0,208,0,"IMAGE"],[481,128,0,211,0,"IMAGE"],[483,210,0,213,0,"IMAGE"],[488,216,0,210,0,"MASK"],[489,208,1,216,0,"MASK"],[490,211,1,217,0,"MASK"],[491,217,0,218,0,"MASK"],[492,218,0,214,0,"IMAGE"],[499,221,0,222,0,"MASK"],[500,220,1,221,0,"MASK"],[501,128,0,220,0,"IMAGE"],[502,222,0,223,0,"IMAGE"],[510,191,0,227,0,"MASK"],[548,228,0,239,1,"IMAGE"],[551,239,0,240,0,"IMAGE"],[677,263,0,239,0,"IMAGE"],[736,227,0,258,0,"*"],[737,128,0,263,0,"*"],[739,258,0,228,0,"MASK"],[740,258,0,239,2,"MASK"],[746,128,0,294,0,"IMAGE"],[747,222,0,294,1,"IMAGE"],[748,210,0,294,2,"IMAGE"],[749,218,0,294,3,"IMAGE"],[750,294,0,191,0,"IMAGE"],[753,296,0,294,4,"COMBO"],[754,297,0,294,5,"COMBO"],[764,292,0,256,0,"*"],[765,308,0,309,0,"MODEL"],[766,311,0,309,1,"CONDITIONING"],[767,312,0,309,2,"CONDITIONING"],[768,313,0,309,3,"LATENT"],[769,310,0,311,0,"CHATGLM3MODEL"],[770,310,0,312,0,"CHATGLM3MODEL"],[772,314,0,313,1,"VAE"],[774,309,0,316,0,"LATENT"],[775,314,0,316,1,"VAE"],[777,316,0,184,0,"IMAGE"],[778,263,0,313,0,"IMAGE"],[779,258,0,313,2,"MASK"],[780,256,0,311,1,"STRING"]],"groups":[{"title":"效果查看","bounding":[290,-330,1610,710],"color":"#3f789e","font_size":24,"locked":false},{"title":"头发mask区域绘制","bounding":[-1730,510,1750,1560],"color":"#3f789e","font_size":24,"locked":false},{"title":"sd1.5-brushnet","bounding":[240,530,1616,813],"color":"#3f789e","font_size":24,"locked":false},{"title":"发型模板定义","bounding":[-970,60,690,410],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{"ds":{"scale":0.5054470284993011,"offset":[933.2839137293919,-200.2558095915677]},"0246.VERSION":[0,0,4],"workspace_info":{"id":"CWutdeSBepxaOD0cHVl3L","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}