{"last_node_id":1058,"last_link_id":2468,"nodes":[{"id":760,"type":"ImageResize+","pos":{"0":-2640,"1":-170},"size":{"0":315,"1":218},"flags":{"collapsed":true},"order":56,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1690,"label":"图像"},{"name":"width","type":"INT","link":1691,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":1692,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1687],"slot_index":0,"shape":3,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[768,1024,"nearest","stretch","always",0]},{"id":766,"type":"Reroute","pos":{"0":-3190,"1":-470},"size":[82,26],"flags":{},"order":30,"mode":0,"inputs":[{"name":"","type":"*","link":1697,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1700,1728,1877],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":778,"type":"ImageCompositedMaskedWeight","pos":{"0":-2000,"1":-190},"size":{"0":315,"1":78},"flags":{},"order":85,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1712,"label":"source"},{"name":"mask","type":"IMAGE","link":1713,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1710],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[0]},{"id":779,"type":"ImageBlend","pos":{"0":-2040,"1":-410},"size":{"0":375.8050537109375,"1":102},"flags":{},"order":68,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":1714,"label":"图像1"},{"name":"image2","type":"IMAGE","link":2219,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1713,1723],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageBlend"},"widgets_values":[1,"difference"]},{"id":781,"type":"ImageCompositedMaskedWeight","pos":{"0":-2430,"1":20},"size":{"0":315,"1":78},"flags":{},"order":82,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1717,"label":"source"},{"name":"mask","type":"IMAGE","link":1718,"slot_index":1,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1722],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[1]},{"id":782,"type":"ImageResize+","pos":{"0":-2620,"1":70},"size":{"0":315,"1":218},"flags":{"collapsed":true},"order":55,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1719,"label":"图像"},{"name":"width","type":"INT","link":1720,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":1721,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1717],"slot_index":0,"shape":3,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[768,1024,"nearest","stretch","always",0]},{"id":944,"type":"Reroute","pos":{"0":-2740,"1":-440},"size":[75,26],"flags":{},"order":59,"mode":0,"inputs":[{"name":"","type":"*","link":2218,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2219],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":787,"type":"AIO_Preprocessor","pos":{"0":-3040,"1":-320},"size":{"0":320,"1":80},"flags":{"collapsed":false},"order":43,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1728,"label":"图像"},{"name":"resolution","type":"INT","link":1867,"widget":{"name":"resolution"},"label":"分辨率"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1690],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["AnyLineArtPreprocessor_aux",768]},{"id":768,"type":"AIO_Preprocessor","pos":{"0":-3040,"1":-140},"size":{"0":320,"1":80},"flags":{},"order":42,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1700,"label":"图像"},{"name":"resolution","type":"INT","link":1868,"widget":{"name":"resolution"},"label":"分辨率"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1719],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["DepthAnythingV2Preprocessor",768]},{"id":758,"type":"ImageCompositedMaskedWeight","pos":{"0":-2430,"1":-190},"size":{"0":315,"1":78},"flags":{},"order":81,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1687,"label":"source"},{"name":"mask","type":"IMAGE","link":1688,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1712],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[1]},{"id":767,"type":"ImageBlend","pos":{"0":-2430,"1":-410},"size":{"0":315,"1":102},"flags":{},"order":77,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":1698,"label":"图像1"},{"name":"image2","type":"IMAGE","link":1699,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1688,1718],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageBlend"},"widgets_values":[1,"difference"]},{"id":755,"type":"GetImageSize+","pos":{"0":-3110,"1":-990},"size":{"0":142.8000030517578,"1":66},"flags":{},"order":29,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1684,"label":"图像"}],"outputs":[{"name":"width","type":"INT","links":[1691,1720,1742,1867,1868,1880],"slot_index":0,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":[1692,1721,1743],"slot_index":1,"shape":3,"label":"高度"},{"name":"count","type":"INT","links":null,"shape":3,"label":"count"}],"properties":{"Node name for S&R":"GetImageSize+"}},{"id":765,"type":"PreviewImage","pos":{"0":-4380,"1":-2820},"size":{"0":480,"1":540},"flags":{},"order":87,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2271,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":929,"type":"Florence2toCoordinates","pos":{"0":-4530,"1":430},"size":{"0":210,"1":102},"flags":{},"order":28,"mode":0,"inputs":[{"name":"data","type":"JSON","link":2192,"label":"data"}],"outputs":[{"name":"coordinates","type":"STRING","links":[2194],"slot_index":0,"shape":3,"label":"coordinates"},{"name":"bboxes","type":"BBOX","links":[2195],"slot_index":1,"shape":3,"label":"bboxes"}],"properties":{"Node name for S&R":"Florence2toCoordinates"},"widgets_values":["0",false]},{"id":930,"type":"Sam2Segmentation","pos":{"0":-4550,"1":570},"size":{"0":314.5386047363281,"1":182},"flags":{},"order":40,"mode":0,"inputs":[{"name":"sam2_model","type":"SAM2MODEL","link":2193,"label":"sam2_model"},{"name":"image","type":"IMAGE","link":2196,"label":"image"},{"name":"bboxes","type":"BBOX","link":2195,"label":"bboxes"},{"name":"coordinates_positive","type":"STRING","link":2194,"widget":{"name":"coordinates_positive"},"label":"coordinates_positive"},{"name":"coordinates_negative","type":"STRING","link":null,"widget":{"name":"coordinates_negative"},"label":"coordinates_negative"},{"name":"coordinates_negative","type":"STRING","link":null,"widget":{"name":"coordinates_negative"},"label":"coordinates_negative"}],"outputs":[{"name":"mask","type":"MASK","links":[2197,2202],"slot_index":0,"shape":3,"label":"mask"}],"properties":{"Node name for S&R":"Sam2Segmentation"},"widgets_values":[false,"","",false]},{"id":907,"type":"MaskToImage","pos":{"0":-4480,"1":-860},"size":{"0":264.5999755859375,"1":26},"flags":{},"order":50,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2216,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2218,2224],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":932,"type":"MaskToImage","pos":{"0":-4180,"1":440},"size":{"0":264.5999755859375,"1":26},"flags":{},"order":52,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2197,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2227],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":771,"type":"SolidMask","pos":{"0":-3190,"1":-820},"size":{"0":315,"1":106},"flags":{},"order":41,"mode":0,"inputs":[{"name":"width","type":"INT","link":1742,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":1743,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"MASK","type":"MASK","links":[1705],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"SolidMask"},"widgets_values":[1,512,512]},{"id":772,"type":"MaskToImage","pos":{"0":-2800,"1":-810},"size":{"0":176.39999389648438,"1":26},"flags":{},"order":54,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1705,"slot_index":0,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1694],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":762,"type":"Reroute","pos":{"0":-2790,"1":-710},"size":[82,26],"flags":{},"order":62,"mode":0,"inputs":[{"name":"","type":"*","link":1694,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1698,1714,2243],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":903,"type":"LayerMask: PersonMaskUltra V2","pos":{"0":-5360,"1":-920},"size":{"0":365.4000244140625,"1":414},"flags":{},"order":17,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2151,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":[2246],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[true,false,false,false,false,false,0.4,"VITMatte",6,6,0.01,0.99,true,"cuda",2],"color":"rgba(27, 80, 119, 0.7)"},{"id":943,"type":"LayerMask: MaskGrow","pos":{"0":-4920,"1":-680},"size":{"0":315,"1":106},"flags":{},"order":38,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2247,"label":"遮罩"}],"outputs":[{"name":"mask","type":"MASK","links":[2216],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: MaskGrow"},"widgets_values":[false,25,0],"color":"rgba(27, 80, 119, 0.7)"},{"id":935,"type":"ImageToMask","pos":{"0":-4970,"1":70},"size":{"0":315,"1":58},"flags":{},"order":26,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2201,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[2203,2252],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":936,"type":"Masks Subtract","pos":{"0":-4630,"1":200},"size":{"0":210,"1":46},"flags":{},"order":53,"mode":0,"inputs":[{"name":"masks_a","type":"MASK","link":2202,"label":"masks_a"},{"name":"masks_b","type":"MASK","link":2203,"label":"masks_b"}],"outputs":[{"name":"MASKS","type":"MASK","links":[2254],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"Masks Subtract"}},{"id":956,"type":"Masks Subtract","pos":{"0":-4590,"1":-60},"size":{"0":210,"1":46},"flags":{},"order":58,"mode":0,"inputs":[{"name":"masks_a","type":"MASK","link":2251,"label":"masks_a"},{"name":"masks_b","type":"MASK","link":2252,"label":"masks_b"}],"outputs":[{"name":"MASKS","type":"MASK","links":[2253],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"Masks Subtract"}},{"id":931,"type":"DownloadAndLoadSAM2Model","pos":{"0":-5410,"1":640},"size":{"0":351.7801513671875,"1":130},"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"sam2_model","type":"SAM2MODEL","links":[2193],"slot_index":0,"shape":3,"label":"sam2_model"}],"properties":{"Node name for S&R":"DownloadAndLoadSAM2Model"},"widgets_values":["sam2_hiera_base_plus.safetensors","single_image","cuda","bf16"]},{"id":928,"type":"DownloadAndLoadFlorence2Model","pos":{"0":-5400,"1":470},"size":{"0":315,"1":106},"flags":{},"order":1,"mode":0,"inputs":[{"name":"lora","type":"PEFTLORA","link":null,"label":"lora"}],"outputs":[{"name":"florence2_model","type":"FL2MODEL","links":[2191],"slot_index":0,"shape":3,"label":"florence2_model"}],"properties":{"Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["microsoft/Florence-2-large-ft","fp16","sdpa"]},{"id":922,"type":"AliPersonMaskSegment","pos":{"0":-5390,"1":40},"size":{"0":315,"1":326},"flags":{},"order":18,"mode":0,"inputs":[{"name":"person_image","type":"IMAGE","link":2182,"label":"person_image"}],"outputs":[{"name":"head","type":"IMAGE","links":null,"shape":3,"label":"head"},{"name":"hair","type":"IMAGE","links":null,"shape":3,"label":"hair"},{"name":"body","type":"IMAGE","links":[],"slot_index":2,"shape":3,"label":"body"},{"name":"skin","type":"IMAGE","links":[],"slot_index":3,"shape":3,"label":"skin"},{"name":"face","type":"IMAGE","links":null,"shape":3,"label":"face"},{"name":"cloth","type":"IMAGE","links":[2201,2225],"slot_index":5,"shape":3,"label":"cloth"}],"properties":{"Node name for S&R":"AliPersonMaskSegment"},"widgets_values":[false,false,false,false,false,true,"",false]},{"id":955,"type":"LayerMask: MaskGrow","pos":{"0":-4960,"1":-230},"size":{"0":315,"1":106},"flags":{},"order":45,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2257,"label":"遮罩"}],"outputs":[{"name":"mask","type":"MASK","links":[2251],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: MaskGrow"},"widgets_values":[false,25,0],"color":"rgba(27, 80, 119, 0.7)"},{"id":953,"type":"LayerMask: PersonMaskUltra V2","pos":{"0":-5380,"1":-440},"size":{"0":365.4000244140625,"1":414},"flags":{},"order":21,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2248,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":[2256],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[true,true,false,false,false,false,0.4,"VITMatte",6,6,0.01,0.99,true,"cuda",2],"color":"rgba(27, 80, 119, 0.7)"},{"id":761,"type":"Reroute","pos":{"0":-3570,"1":-1200},"size":[82,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":2217,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1684,1697],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":764,"type":"Reroute","pos":{"0":-3550,"1":-1090},"size":[82,26],"flags":{},"order":75,"mode":0,"inputs":[{"name":"","type":"*","link":2232,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1699,2244],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":945,"type":"PreviewImage","pos":{"0":-5350,"1":-2820},"size":{"0":450,"1":580},"flags":{},"order":32,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2269,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":961,"type":"Reroute","pos":{"0":-1150,"1":-1760},"size":[75,26],"flags":{"pinned":true},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":2260,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2269,2320,2429],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":938,"type":"PreviewImage","pos":{"0":-4860,"1":-2840},"size":{"0":420,"1":570},"flags":{},"order":79,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2270,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":948,"type":"Reroute","pos":{"0":-3810,"1":-90},"size":[75,26],"flags":{},"order":74,"mode":0,"inputs":[{"name":"","type":"*","link":2344,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2232,2261],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":950,"type":"ImageCompositedMaskedWeight","pos":{"0":-2330,"1":-840},"size":{"0":315,"1":78},"flags":{},"order":78,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":2243,"label":"source"},{"name":"mask","type":"IMAGE","link":2244,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2262],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[0.6000000000000001]},{"id":832,"type":"DWPreprocessor","pos":{"0":-3050,"1":40},"size":{"0":320,"1":200},"flags":{},"order":44,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1877,"label":"图像"},{"name":"resolution","type":"INT","link":1880,"widget":{"name":"resolution"},"label":"分辨率"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2263],"slot_index":0,"shape":3,"label":"图像"},{"name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null,"shape":3,"label":"姿态关键点"}],"properties":{"Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","disable",512,"yolox_l.onnx","dw-ll_ucoco_384_bs5.torchscript.pt","disable"]},{"id":759,"type":"PreviewImage","pos":{"0":-3380,"1":-2830},"size":{"0":470,"1":550},"flags":{},"order":94,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2273,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":776,"type":"Reroute","pos":{"0":-1610,"1":-190},"size":[75,26],"flags":{},"order":89,"mode":0,"inputs":[{"name":"","type":"*","link":1710,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2264],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":784,"type":"ImageCompositedMaskedWeight","pos":{"0":-2020,"1":30},"size":{"0":315,"1":78},"flags":{},"order":86,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1722,"label":"source"},{"name":"mask","type":"IMAGE","link":1723,"slot_index":1,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1709],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[0]},{"id":769,"type":"PreviewImage","pos":{"0":-2810,"1":-2820},"size":{"0":440,"1":530},"flags":{},"order":96,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2274,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":775,"type":"Reroute","pos":{"0":-1600,"1":10},"size":[75,26],"flags":{},"order":90,"mode":0,"inputs":[{"name":"","type":"*","link":1709,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2265],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":917,"type":"PreviewImage","pos":{"0":-5380,"1":-2070},"size":{"0":380,"1":600},"flags":{},"order":70,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2275,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":923,"type":"PreviewImage","pos":{"0":-4910,"1":-2100},"size":{"0":470,"1":590},"flags":{},"order":51,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2276,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":947,"type":"Reroute","pos":{"0":-3790,"1":-590},"size":[75,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":2225,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2267],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":946,"type":"Reroute","pos":{"0":-3790,"1":-900},"size":[75,26],"flags":{},"order":60,"mode":0,"inputs":[{"name":"","type":"*","link":2224,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2266],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":933,"type":"PreviewImage","pos":{"0":-4340,"1":-2090},"size":{"0":540,"1":570},"flags":{},"order":71,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2277,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":949,"type":"Reroute","pos":{"0":-3790,"1":300},"size":[75,26],"flags":{},"order":61,"mode":0,"inputs":[{"name":"","type":"*","link":2227,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2268],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":963,"type":"Reroute","pos":{"0":-1150,"1":-1540},"size":[75,26],"flags":{},"order":83,"mode":0,"inputs":[{"name":"","type":"*","link":2262,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2271],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":966,"type":"Reroute","pos":{"0":-1150,"1":-1197.6392822265625},"size":[75,26],"flags":{},"order":93,"mode":0,"inputs":[{"name":"","type":"*","link":2265,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2274],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":967,"type":"Reroute","pos":{"0":-1150,"1":-1060},"size":[75,26],"flags":{},"order":66,"mode":0,"inputs":[{"name":"","type":"*","link":2266,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2275],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":968,"type":"Reroute","pos":{"0":-1150,"1":-936.6714477539062},"size":[75,26],"flags":{},"order":39,"mode":0,"inputs":[{"name":"","type":"*","link":2267,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2276],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":969,"type":"Reroute","pos":{"0":-1150,"1":-844.3035278320312},"size":[75,26],"flags":{},"order":67,"mode":0,"inputs":[{"name":"","type":"*","link":2268,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2277],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":979,"type":"JoinStrings","pos":{"0":680,"1":-1090},"size":{"0":315,"1":106},"flags":{},"order":24,"mode":0,"inputs":[{"name":"string1","type":"STRING","link":2294,"widget":{"name":"string1"},"label":"字符串1"},{"name":"string2","type":"STRING","link":2295,"widget":{"name":"string2"},"label":"字符串2"}],"outputs":[{"name":"STRING","type":"STRING","links":[2279],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"JoinStrings"},"widgets_values":["","",","]},{"id":981,"type":"ControlNetLoader","pos":{"0":1350,"1":120},"size":{"0":315,"1":58},"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[2296,2314],"slot_index":0,"shape":3,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union-sdxl-promax-1.0.safetensors"]},{"id":984,"type":"Reroute","pos":{"0":1120,"1":50},"size":[75,26],"flags":{},"order":48,"mode":0,"inputs":[{"name":"","type":"*","link":2302,"label":""}],"outputs":[{"name":"","type":"CONDITIONING","links":[2297],"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":985,"type":"Reroute","pos":{"0":1120,"1":90},"size":[75,26],"flags":{},"order":49,"mode":0,"inputs":[{"name":"","type":"*","link":2303,"label":""}],"outputs":[{"name":"","type":"CONDITIONING","links":[2298],"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":998,"type":"Reroute","pos":{"0":1120,"1":500},"size":[75,26],"flags":{},"order":64,"mode":0,"inputs":[{"name":"","type":"*","link":2323,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2317],"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":964,"type":"Reroute","pos":{"0":-1150,"1":-1440},"size":[75,26],"flags":{},"order":57,"mode":0,"inputs":[{"name":"","type":"*","link":2263,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2272,2323],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":833,"type":"PreviewImage","pos":{"0":-3840,"1":-2810},"size":{"0":420,"1":530},"flags":{},"order":63,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2272,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":978,"type":"Reroute","pos":{"0":1120,"1":240},"size":[82,26],"flags":{},"order":95,"mode":0,"inputs":[{"name":"","type":"*","link":2324,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2299],"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":965,"type":"Reroute","pos":{"0":-1150,"1":-1330},"size":[75,26],"flags":{},"order":92,"mode":0,"inputs":[{"name":"","type":"*","link":2264,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2273,2324],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":962,"type":"Reroute","pos":{"0":-1150,"1":-1640},"size":[75,26],"flags":{},"order":76,"mode":0,"inputs":[{"name":"","type":"*","link":2261,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2270,2341],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":937,"type":"MaskToImage","pos":{"0":-4060,"1":80},"size":{"0":264.5999755859375,"1":26},"flags":{},"order":72,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2346,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2343],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":952,"type":"MaskFix+","pos":{"0":-4930,"1":-910},"size":{"0":315,"1":154},"flags":{},"order":25,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2246,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2247],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,10,3,3,0]},{"id":958,"type":"MaskFix+","pos":{"0":-4980,"1":-440},"size":{"0":315,"1":154},"flags":{},"order":31,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2256,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2257],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,10,3,3,0]},{"id":957,"type":"Masks Add","pos":{"0":-4350,"1":80},"size":{"0":210,"1":46},"flags":{},"order":65,"mode":0,"inputs":[{"name":"masks_a","type":"MASK","link":2253,"label":"masks_a"},{"name":"masks_b","type":"MASK","link":2254,"label":"masks_b"}],"outputs":[{"name":"MASKS","type":"MASK","links":[2345],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"Masks Add"}},{"id":1007,"type":"MaskFix+","pos":{"0":-4400,"1":-290},"size":{"0":315,"1":154},"flags":{},"order":69,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2345,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2346],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,10,8,5,0]},{"id":1006,"type":"Images to RGB","pos":{"0":-4050,"1":-60},"size":{"0":210,"1":26},"flags":{},"order":73,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2343,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2344],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"Images to RGB"}},{"id":980,"type":"workflow/controlnet","pos":{"0":1340,"1":300},"size":{"0":315,"1":190},"flags":{},"order":97,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":2296,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":2297,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":2298,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":2299,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[2315],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[2316],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnet"},"widgets_values":["canny/lineart/anime_lineart/mlsd",0.5,0,1]},{"id":997,"type":"workflow/controlnet","pos":{"0":1350,"1":560},"size":{"0":315,"1":190},"flags":{},"order":98,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":2314,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":2315,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":2316,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":2317,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[2328],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[2329],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnet"},"widgets_values":["openpose",0.5,0,1]},{"id":1016,"type":"Reroute","pos":{"0":2050,"1":140},"size":[82,26],"flags":{},"order":46,"mode":0,"inputs":[{"name":"","type":"*","link":2372,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2366]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1012,"type":"InstantIDModelLoader","pos":{"0":2210,"1":360},"size":{"0":315,"1":58},"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"INSTANTID","type":"INSTANTID","links":[2361],"shape":3,"label":"INSTANTID"}],"properties":{"Node name for S&R":"InstantIDModelLoader"},"widgets_values":["ip-adapter_instant_id_sdxl.bin"]},{"id":1013,"type":"InstantIDFaceAnalysis","pos":{"0":2210,"1":470},"size":{"0":315,"1":58},"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"FACEANALYSIS","type":"FACEANALYSIS","links":[2362],"shape":3,"label":"面部分析"}],"properties":{"Node name for S&R":"InstantIDFaceAnalysis"},"widgets_values":["CUDA"]},{"id":1014,"type":"ControlNetLoader","pos":{"0":2210,"1":590},"size":{"0":315,"1":58},"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[2363],"shape":3,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["control_instant_id_sdxl.safetensors"]},{"id":1018,"type":"Reroute","pos":{"0":2050,"1":0},"size":[82,26],"flags":{},"order":47,"mode":0,"inputs":[{"name":"","type":"*","link":2422,"label":""}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2365],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":982,"type":"Reroute","pos":{"0":1820,"1":20},"size":[75,26],"flags":{},"order":99,"mode":0,"inputs":[{"name":"","type":"*","link":2328,"label":""}],"outputs":[{"name":"","type":"CONDITIONING","links":[2374],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":983,"type":"Reroute","pos":{"0":1820,"1":70},"size":[75,26],"flags":{},"order":100,"mode":0,"inputs":[{"name":"","type":"*","link":2329,"label":""}],"outputs":[{"name":"","type":"CONDITIONING","links":[2375],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":924,"type":"Florence2Run","pos":{"0":-4970,"1":460},"size":{"0":400,"1":357},"flags":{},"order":19,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2185,"label":"image"},{"name":"florence2_model","type":"FL2MODEL","link":2191,"label":"florence2_model"}],"outputs":[{"name":"image","type":"IMAGE","links":null,"slot_index":0,"shape":3,"label":"image"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"mask"},{"name":"caption","type":"STRING","links":null,"shape":3,"label":"caption"},{"name":"data","type":"JSON","links":[2192],"slot_index":3,"shape":3,"label":"data"}],"properties":{"Node name for S&R":"Florence2Run"},"widgets_values":["body","caption_to_phrase_grounding",true,false,1024,3,true,"",791014929951642,"fixed",true]},{"id":1010,"type":"PreviewImage","pos":{"0":2330,"1":-1430},"size":{"0":280,"1":370},"flags":{},"order":105,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2359,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1002,"type":"PreviewImage","pos":{"0":2670,"1":-1440},"size":{"0":290,"1":380},"flags":{},"order":108,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2327,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":971,"type":"Reroute","pos":{"0":1100,"1":-870},"size":[82,26],"flags":{},"order":33,"mode":0,"inputs":[{"name":"","type":"*","link":2320,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2291,2372],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1005,"type":"ImageToMask","pos":{"0":120,"1":-850},"size":{"0":315,"1":58},"flags":{},"order":80,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2341,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[2342],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":977,"type":"INPAINT_VAEEncodeInpaintConditioning","pos":{"0":1770,"1":-640},"size":{"0":292.20001220703125,"1":106},"flags":{},"order":103,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":2392,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":2393,"label":"负面条件"},{"name":"vae","type":"VAE","link":2290,"label":"VAE"},{"name":"pixels","type":"IMAGE","link":2291,"label":"图像"},{"name":"mask","type":"MASK","link":2292,"label":"遮罩"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[2408],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[2409],"slot_index":1,"shape":3,"label":"负面条件"},{"name":"latent_inpaint","type":"LATENT","links":[],"slot_index":2,"shape":3,"label":"局部重绘Latent"},{"name":"latent_samples","type":"LATENT","links":[2410],"slot_index":3,"shape":3,"label":"采样Latent"}],"properties":{"Node name for S&R":"INPAINT_VAEEncodeInpaintConditioning"}},{"id":1036,"type":"DifferentialDiffusion","pos":{"0":1810,"1":-810},"size":{"0":210,"1":26},"flags":{},"order":102,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2453,"label":"模型"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2424],"slot_index":0,"shape":3,"label":"模型"}],"properties":{"Node name for S&R":"DifferentialDiffusion"}},{"id":974,"type":"Primitive string multiline [Crystools]","pos":{"0":-80,"1":-1080},"size":{"0":260,"1":81},"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"string","type":"STRING","links":[2294],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["spmf_22173_r_2024092118,a woman",true]},{"id":901,"type":"LoadImage","pos":{"0":-6740,"1":-1050},"size":{"0":680,"1":920},"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2151,2182,2185,2196,2217,2248,2260],"slot_index":0,"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":[],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["pose (21).png","image"]},{"id":1022,"type":"LoadImage","pos":{"0":-150,"1":70},"size":{"0":250,"1":310},"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2379],"slot_index":0,"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["1ddebfbe-73d7-40c4-a4bc-efd0e0fc7537.png","image"]},{"id":1024,"type":"LoadImage","pos":{"0":420,"1":70},"size":{"0":240,"1":310},"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2381],"slot_index":0,"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["593b9df7-705b-45ff-bcd0-a7de52e31aa7.png","image"]},{"id":1023,"type":"LoadImage","pos":{"0":140,"1":70},"size":{"0":230,"1":310},"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2380],"slot_index":0,"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["d69d3ba0-662c-41e9-80d1-442f739d14a2.png","image"]},{"id":1032,"type":"LoadImage","pos":{"0":-140,"1":410},"size":{"0":250,"1":310},"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2413],"slot_index":0,"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["eac473db-5ebf-433d-8d34-cd89e503ca8b.png","image"]},{"id":1033,"type":"LoadImage","pos":{"0":150,"1":410},"size":{"0":230,"1":310},"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2414],"slot_index":0,"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["f24427b4-753a-4745-a015-6baff821667c.png","image"]},{"id":1034,"type":"LoadImage","pos":{"0":430,"1":410},"size":{"0":240,"1":310},"flags":{},"order":13,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["02e96602-b58b-4741-abfc-006c1ec760f6.png","image"]},{"id":1025,"type":"ImageBatchMulti","pos":{"0":610,"1":-260},"size":{"0":210,"1":162},"flags":{},"order":23,"mode":0,"inputs":[{"name":"image_1","type":"IMAGE","link":2379,"label":"图像_1"},{"name":"image_2","type":"IMAGE","link":2380,"label":"图像_2"},{"name":"image_3","type":"IMAGE","link":2381,"label":"图像_3"},{"name":"image_4","type":"IMAGE","link":2413,"label":"图像_4"},{"name":"image_5","type":"IMAGE","link":2414,"label":"图像_5"}],"outputs":[{"name":"images","type":"IMAGE","links":[2378,2428],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageBatchMulti"},"widgets_values":[5,null]},{"id":1037,"type":"PreviewImage","pos":{"0":750,"1":60},"size":{"0":210,"1":250},"flags":{},"order":36,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2428,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":975,"type":"Primitive string multiline [Crystools]","pos":{"0":240,"1":-1090},"size":{"0":390,"1":100},"flags":{},"order":14,"mode":0,"inputs":[],"outputs":[{"name":"string","type":"STRING","links":[2295],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["real photos,fair_skin,exquisite skin",true]},{"id":993,"type":"CR LoRA Stack","pos":{"0":550,"1":-690},"size":{"0":315,"1":342},"flags":{},"order":15,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"label":"LoRA堆"}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[2278],"shape":3,"label":"LORA_STACK"},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR LoRA Stack"},"widgets_values":["On","train_lora/prod_lora/20240921/20240921184945_f50e8256d988470eb88ab6c04928b4cf/spmf_22173_r_2024092118/spmf_22173_r_2024092118.safetensors",0.8,1,"On","sdxl/skin/DESKINXL.safetensors",1,1,"On","sdxl/skin/skin_linhe.safetensors",0.8,1]},{"id":1038,"type":"PreviewImage","pos":{"0":1920,"1":-1410},"size":{"0":290,"1":360},"flags":{},"order":34,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2429,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1015,"type":"Reroute","pos":{"0":2050,"1":50},"size":[82,26],"flags":{},"order":35,"mode":0,"inputs":[{"name":"","type":"*","link":2378,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2364],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1011,"type":"ApplyInstantIDAdvanced","pos":{"0":2570,"1":80},"size":{"0":315,"1":338},"flags":{},"order":101,"mode":0,"inputs":[{"name":"instantid","type":"INSTANTID","link":2361,"slot_index":0,"label":"InstantID"},{"name":"insightface","type":"FACEANALYSIS","link":2362,"slot_index":1,"label":"InsightFace"},{"name":"control_net","type":"CONTROL_NET","link":2363,"slot_index":2,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":2364,"label":"图像"},{"name":"model","type":"MODEL","link":2365,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":2374,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":2375,"label":"负面条件"},{"name":"image_kps","type":"IMAGE","link":2366,"label":"图像_kps"},{"name":"mask","type":"MASK","link":null,"label":"遮罩"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2453],"slot_index":0,"shape":3,"label":"模型"},{"name":"positive","type":"CONDITIONING","links":[2392],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[2393],"slot_index":2,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"ApplyInstantIDAdvanced"},"widgets_values":[0.6,0.6,0,1,0.1,"average"]},{"id":999,"type":"ImpactGaussianBlurMask","pos":{"0":560,"1":-850},"size":{"0":315,"1":82},"flags":{},"order":84,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2342,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2281],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImpactGaussianBlurMask"},"widgets_values":[10,10]},{"id":972,"type":"Reroute","pos":{"0":1100,"1":-810},"size":[75,26],"flags":{},"order":88,"mode":0,"inputs":[{"name":"","type":"*","link":2281,"slot_index":0,"label":""}],"outputs":[{"name":"MASK","type":"MASK","links":[2292,2458],"slot_index":0,"label":"MASK"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1001,"type":"ReActorRestoreFace","pos":{"0":3780,"1":-960},"size":{"0":315,"1":130},"flags":{},"order":106,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2360,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2327],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ReActorRestoreFace"},"widgets_values":["retinaface_resnet50","GFPGANv1.4.pth",1,0]},{"id":976,"type":"KSampler (Efficient)","pos":{"0":2240,"1":-860},"size":[330,560],"flags":{},"order":104,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2424,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":2408,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":2409,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":2410,"label":"Latent"},{"name":"optional_vae","type":"VAE","link":2287,"label":"VAE(可选)"},{"name":"script","type":"SCRIPT","link":null,"slot_index":5,"label":"脚本"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":[],"slot_index":3,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[],"slot_index":4,"shape":3,"label":"VAE"},{"name":"IMAGE","type":"IMAGE","links":[2359,2360,2462],"slot_index":5,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[243392020859379,null,20,3,"dpmpp_2m","karras",0.8,"auto","true"],"color":"#222233","bgcolor":"#333355","shape":1},{"id":970,"type":"Efficient Loader","pos":{"0":1300,"1":-830},"size":{"0":370,"1":470},"flags":{},"order":37,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":2278,"slot_index":0,"label":"LoRA堆"},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":null,"slot_index":1,"label":"ControlNet堆"},{"name":"positive","type":"STRING","link":2279,"widget":{"name":"positive"},"label":"正面条件"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2422],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[2302],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[2303],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":[],"slot_index":3,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[2287,2290],"slot_index":4,"shape":3,"label":"VAE"},{"name":"CLIP","type":"CLIP","links":[],"slot_index":5,"shape":3,"label":"CLIP"},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":[],"slot_index":6,"shape":3,"label":"依赖"}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["sdxl/HelloWorld_V7.safetensors","Baked VAE",-2,"None",1.3,1,"a female,vividly,skin_texture,Vivid,light and shadow of details, beautiful face,headshot,,best quality,highres,bright,Ultra clear details","embedding:negativeXL_D.safetensors, NSFW, worst quality, normal quality, low quality, low res, blurry, text, watermark, logo, banner, extra digits, cropped, jpeg artifacts, signature, username, error, sketch, duplicate, ugly, monochrome, horror, geometry, mutation, disgusting ","mean","comfy",512,512,1,true,true],"color":"#332233","bgcolor":"#553355","shape":1},{"id":1056,"type":"Efficient Loader","pos":{"0":2750,"1":-820},"size":[370,470],"flags":{},"order":16,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"slot_index":0,"label":"LoRA堆"},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":null,"slot_index":1,"label":"ControlNet堆"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2463],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[2464],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[2465],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":[],"slot_index":3,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[2467],"slot_index":4,"shape":3,"label":"VAE"},{"name":"CLIP","type":"CLIP","links":[2466],"slot_index":5,"shape":3,"label":"CLIP"},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":[],"slot_index":6,"shape":3,"label":"依赖"}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["sdxl/AWPortrait_XL_ver1.1.safetensors","Baked VAE",-1,"None",1.3,1,"beautify woman,best quantity","embedding:negativeXL_D.safetensors, NSFW, worst quality, normal quality, low quality, low res, blurry, text, watermark, logo, banner, extra digits, cropped, jpeg artifacts, signature, username, error, sketch, duplicate, ugly, monochrome, horror, geometry, mutation, disgusting ","mean","comfy",512,512,1,true,true],"color":"#332233","bgcolor":"#553355","shape":1},{"id":1057,"type":"PreviewImage","pos":{"0":3820,"1":-720},"size":{"0":210,"1":26},"flags":{},"order":109,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2468,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1055,"type":"DetailerForEach","pos":{"0":3290,"1":-840},"size":{"0":400,"1":620},"flags":{},"order":107,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2462,"label":"图像"},{"name":"segs","type":"SEGS","link":2461,"label":"Seg"},{"name":"model","type":"MODEL","link":2463,"label":"模型"},{"name":"clip","type":"CLIP","link":2466,"label":"CLIP"},{"name":"vae","type":"VAE","link":2467,"label":"VAE"},{"name":"positive","type":"CONDITIONING","link":2464,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":2465,"label":"负面条件"},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"细化约束"},{"name":"scheduler_func_opt","type":"SCHEDULER_FUNC","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2468],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"DetailerForEach"},"widgets_values":[512,true,1024,865269703464331,"fixed",20,8,"dpmpp_2m_sde","karras",0.2,5,true,true,"",1,false,20,true]},{"id":1054,"type":"ImpactSegsAndMask","pos":{"0":2850,"1":-990},"size":{"0":210,"1":46},"flags":{},"order":91,"mode":0,"inputs":[{"name":"segs","type":"SEGS","link":null,"label":"Seg"},{"name":"mask","type":"MASK","link":2458,"label":"遮罩"}],"outputs":[{"name":"SEGS","type":"SEGS","links":[2461],"shape":3,"label":"Seg","slot_index":0}],"properties":{"Node name for S&R":"ImpactSegsAndMask"}}],"links":[[1684,761,0,755,0,"IMAGE"],[1687,760,0,758,0,"IMAGE"],[1688,767,0,758,1,"IMAGE"],[1690,787,0,760,0,"IMAGE"],[1691,755,0,760,1,"INT"],[1692,755,1,760,2,"INT"],[1694,772,0,762,0,"*"],[1697,761,0,766,0,"*"],[1698,762,0,767,0,"IMAGE"],[1699,764,0,767,1,"IMAGE"],[1700,766,0,768,0,"IMAGE"],[1705,771,0,772,0,"MASK"],[1709,784,0,775,0,"*"],[1710,778,0,776,0,"*"],[1712,758,0,778,0,"IMAGE"],[1713,779,0,778,1,"IMAGE"],[1714,762,0,779,0,"IMAGE"],[1717,782,0,781,0,"IMAGE"],[1718,767,0,781,1,"IMAGE"],[1719,768,0,782,0,"IMAGE"],[1720,755,0,782,1,"INT"],[1721,755,1,782,2,"INT"],[1722,781,0,784,0,"IMAGE"],[1723,779,0,784,1,"IMAGE"],[1728,766,0,787,0,"IMAGE"],[1742,755,0,771,0,"INT"],[1743,755,1,771,1,"INT"],[1867,755,0,787,1,"INT"],[1868,755,0,768,1,"INT"],[1877,766,0,832,0,"IMAGE"],[1880,755,0,832,1,"INT"],[2151,901,0,903,0,"IMAGE"],[2182,901,0,922,0,"IMAGE"],[2185,901,0,924,0,"IMAGE"],[2191,928,0,924,1,"FL2MODEL"],[2192,924,3,929,0,"JSON"],[2193,931,0,930,0,"SAM2MODEL"],[2194,929,0,930,3,"STRING"],[2195,929,1,930,2,"BBOX"],[2196,901,0,930,1,"IMAGE"],[2197,930,0,932,0,"MASK"],[2201,922,5,935,0,"IMAGE"],[2202,930,0,936,0,"MASK"],[2203,935,0,936,1,"MASK"],[2216,943,0,907,0,"MASK"],[2217,901,0,761,0,"*"],[2218,907,0,944,0,"*"],[2219,944,0,779,1,"IMAGE"],[2224,907,0,946,0,"*"],[2225,922,5,947,0,"*"],[2227,932,0,949,0,"*"],[2232,948,0,764,0,"*"],[2243,762,0,950,0,"IMAGE"],[2244,764,0,950,1,"IMAGE"],[2246,903,1,952,0,"MASK"],[2247,952,0,943,0,"MASK"],[2248,901,0,953,0,"IMAGE"],[2251,955,0,956,0,"MASK"],[2252,935,0,956,1,"MASK"],[2253,956,0,957,0,"MASK"],[2254,936,0,957,1,"MASK"],[2256,953,1,958,0,"MASK"],[2257,958,0,955,0,"MASK"],[2260,901,0,961,0,"*"],[2261,948,0,962,0,"*"],[2262,950,0,963,0,"*"],[2263,832,0,964,0,"*"],[2264,776,0,965,0,"*"],[2265,775,0,966,0,"*"],[2266,946,0,967,0,"*"],[2267,947,0,968,0,"*"],[2268,949,0,969,0,"*"],[2269,961,0,945,0,"IMAGE"],[2270,962,0,938,0,"IMAGE"],[2271,963,0,765,0,"IMAGE"],[2272,964,0,833,0,"IMAGE"],[2273,965,0,759,0,"IMAGE"],[2274,966,0,769,0,"IMAGE"],[2275,967,0,917,0,"IMAGE"],[2276,968,0,923,0,"IMAGE"],[2277,969,0,933,0,"IMAGE"],[2278,993,0,970,0,"LORA_STACK"],[2279,979,0,970,2,"STRING"],[2281,999,0,972,0,"*"],[2287,970,4,976,4,"VAE"],[2290,970,4,977,2,"VAE"],[2291,971,0,977,3,"IMAGE"],[2292,972,0,977,4,"MASK"],[2294,974,0,979,0,"STRING"],[2295,975,0,979,1,"STRING"],[2296,981,0,980,0,"CONTROL_NET"],[2297,984,0,980,1,"CONDITIONING"],[2298,985,0,980,2,"CONDITIONING"],[2299,978,0,980,3,"IMAGE"],[2302,970,1,984,0,"*"],[2303,970,2,985,0,"*"],[2314,981,0,997,0,"CONTROL_NET"],[2315,980,0,997,1,"CONDITIONING"],[2316,980,1,997,2,"CONDITIONING"],[2317,998,0,997,3,"IMAGE"],[2320,961,0,971,0,"*"],[2323,964,0,998,0,"*"],[2324,965,0,978,0,"*"],[2327,1001,0,1002,0,"IMAGE"],[2328,997,0,982,0,"*"],[2329,997,1,983,0,"*"],[2341,962,0,1005,0,"IMAGE"],[2342,1005,0,999,0,"MASK"],[2343,937,0,1006,0,"IMAGE"],[2344,1006,0,948,0,"*"],[2345,957,0,1007,0,"MASK"],[2346,1007,0,937,0,"MASK"],[2359,976,5,1010,0,"IMAGE"],[2360,976,5,1001,0,"IMAGE"],[2361,1012,0,1011,0,"INSTANTID"],[2362,1013,0,1011,1,"FACEANALYSIS"],[2363,1014,0,1011,2,"CONTROL_NET"],[2364,1015,0,1011,3,"IMAGE"],[2365,1018,0,1011,4,"MODEL"],[2366,1016,0,1011,7,"IMAGE"],[2372,971,0,1016,0,"*"],[2374,982,0,1011,5,"CONDITIONING"],[2375,983,0,1011,6,"CONDITIONING"],[2378,1025,0,1015,0,"*"],[2379,1022,0,1025,0,"IMAGE"],[2380,1023,0,1025,1,"IMAGE"],[2381,1024,0,1025,2,"IMAGE"],[2392,1011,1,977,0,"CONDITIONING"],[2393,1011,2,977,1,"CONDITIONING"],[2408,977,0,976,1,"CONDITIONING"],[2409,977,1,976,2,"CONDITIONING"],[2410,977,3,976,3,"LATENT"],[2413,1032,0,1025,3,"IMAGE"],[2414,1033,0,1025,4,"IMAGE"],[2422,970,0,1018,0,"*"],[2424,1036,0,976,0,"MODEL"],[2428,1025,0,1037,0,"IMAGE"],[2429,961,0,1038,0,"IMAGE"],[2453,1011,0,1036,0,"MODEL"],[2458,972,0,1054,1,"MASK"],[2461,1054,0,1055,1,"SEGS"],[2462,976,5,1055,0,"IMAGE"],[2463,1056,0,1055,2,"MODEL"],[2464,1056,1,1055,5,"CONDITIONING"],[2465,1056,2,1055,6,"CONDITIONING"],[2466,1056,5,1055,3,"CLIP"],[2467,1056,4,1055,4,"VAE"],[2468,1055,0,1057,0,"IMAGE"]],"groups":[{"title":"模板预处理结果","bounding":[-5530,-2960,3950,1600],"color":"#8A8","font_size":24,"flags":{}},{"title":"生图验证","bounding":[-280,-1660,4450,2690],"color":"#3f789e","font_size":24,"flags":{}},{"title":"prompt","bounding":[-160,-1250,1190,320],"color":"#3f789e","font_size":24,"flags":{}},{"title":"人体mask","bounding":[-5530,-1110,1800,1950],"color":"#3f789e","font_size":24,"flags":{}},{"title":"mask","bounding":[-3210,-1090,1693,422],"color":"#3f789e","font_size":24,"flags":{}},{"title":"Sample","bounding":[1150,-960,1540,680],"color":"#3f789e","font_size":24,"flags":{}},{"title":"ControlNet图像预处理","bounding":[-3250,-530,1698,940],"color":"#3f789e","font_size":24,"flags":{}},{"title":"controlnet","bounding":[1140,-60,730,850],"color":"#3f789e","font_size":24,"flags":{}},{"title":"IP-Adapter","bounding":[2080,-60,1380,840],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.7972024500000168,"offset":[-1871.6003479103256,1215.6326889452025]},"groupNodes":{"controlnet":{"nodes":[{"type":"SetUnionControlNetType","pos":[-1690,-80],"size":{"0":315,"1":58},"flags":{},"order":8,"mode":0,"inputs":[{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[],"shape":3,"label":"ControlNet","slot_index":0}],"properties":{"Node name for S&R":"SetUnionControlNetType"},"widgets_values":["auto"],"index":0},{"type":"ControlNetApplyAdvanced","pos":[-1670,-300],"size":{"0":315,"1":166},"flags":{},"order":14,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":null,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":null,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":null,"label":"图像"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":null,"shape":3,"label":"正面条件","slot_index":0},{"name":"negative","type":"CONDITIONING","links":null,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[1,0,1],"index":1}],"links":[[0,0,1,2,855,"CONTROL_NET"]],"external":[]}},"workspace_info":{"id":"eqCqZuk3AwXNnUxY8Pg-Y","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}