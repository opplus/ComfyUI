{"last_node_id":901,"last_link_id":2112,"nodes":[{"id":603,"type":"Reroute","pos":{"0":-1030,"1":-120},"size":[82,26],"flags":{},"order":8,"mode":0,"inputs":[{"name":"","type":"*","link":2019}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1738],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":790,"type":"Reroute","pos":{"0":-1030,"1":680},"size":[82,26],"flags":{},"order":10,"mode":0,"inputs":[{"name":"","type":"*","link":2022}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2003],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":854,"type":"JoinStrings","pos":{"0":-1470,"1":-670},"size":{"0":315,"1":106},"flags":{},"order":12,"mode":0,"inputs":[{"name":"string1","type":"STRING","link":1933,"widget":{"name":"string1"},"label":"字符串1"},{"name":"string2","type":"STRING","link":1934,"widget":{"name":"string2"},"label":"字符串2"}],"outputs":[{"name":"STRING","type":"STRING","links":[1935],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"JoinStrings"},"widgets_values":["","",","]},{"id":857,"type":"workflow/controlnet","pos":{"0":-810,"1":720},"size":{"0":315,"1":190},"flags":{},"order":18,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":1937,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":1942,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":1943,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":2003,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[2081],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[2082],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnet"},"widgets_values":["canny/lineart/anime_lineart/mlsd",0.3,0,1]},{"id":858,"type":"ControlNetLoader","pos":{"0":-800,"1":540},"size":{"0":315,"1":58},"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[1937,2083],"slot_index":0,"shape":3,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union-sdxl-promax-1.0.safetensors"]},{"id":861,"type":"Reroute","pos":{"0":-1030,"1":470},"size":[75,26],"flags":{},"order":16,"mode":0,"inputs":[{"name":"","type":"*","link":1940}],"outputs":[{"name":"","type":"CONDITIONING","links":[1942],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":862,"type":"Reroute","pos":{"0":-1030,"1":510},"size":[75,26],"flags":{},"order":17,"mode":0,"inputs":[{"name":"","type":"*","link":1941}],"outputs":[{"name":"","type":"CONDITIONING","links":[1943],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":872,"type":"Load Image From Url","pos":{"0":-2250,"1":-260},"size":{"0":450,"1":140},"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2019],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["pose",true]},{"id":873,"type":"Load Image From Url","pos":{"0":-2240,"1":-70},"size":{"0":440,"1":130},"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2066],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["mask",true]},{"id":875,"type":"Load Image From Url","pos":{"0":-2250,"1":150},"size":{"0":450,"1":321},"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2022],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["canny",true]},{"id":892,"type":"Load Image From Url","pos":{"0":-2260,"1":370},"size":{"0":450,"1":150},"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2079],"slot_index":0,"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["openpose",true]},{"id":894,"type":"Reroute","pos":{"0":-1030,"1":920},"size":[75,26],"flags":{},"order":11,"mode":0,"inputs":[{"name":"","type":"*","link":2079}],"outputs":[{"name":"","type":"IMAGE","links":[2080],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":896,"type":"ImpactGaussianBlurMask","pos":{"0":-1210,"1":80},"size":{"0":315,"1":82},"flags":{},"order":13,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2085,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2086],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImpactGaussianBlurMask"},"widgets_values":[10,10]},{"id":883,"type":"CR LoRA Stack","pos":{"0":-1600,"1":-400},"size":{"0":315,"1":342},"flags":{},"order":5,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"label":"LoRA堆"}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[2046],"shape":3},{"name":"show_help","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"CR LoRA Stack"},"widgets_values":["On","train_lora/prod_lora/20240718/20240718161010_adc05aec54bd4df49747bfe3651e5d50/spmf_234_r_2024071816/spmf_234_r_2024071816.safetensors",0.8,1,"On","sdxl/skin/DESKINXL.safetensors",1,1,"Off","None",1,1]},{"id":350,"type":"Efficient Loader","pos":{"0":-870,"1":-440},"size":{"0":370,"1":470},"flags":{},"order":14,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":2046,"slot_index":0,"label":"LoRA堆"},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":null,"slot_index":1,"label":"ControlNet堆"},{"name":"positive","type":"STRING","link":1935,"widget":{"name":"positive"},"label":"正面条件"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2088,2096],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[1940],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[1941],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":[],"slot_index":3,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[1228,1239,2097],"slot_index":4,"shape":3,"label":"VAE"},{"name":"CLIP","type":"CLIP","links":[],"slot_index":5,"shape":3,"label":"CLIP"},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":[],"slot_index":6,"shape":3,"label":"依赖"}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["sdxl/dreamshaperXL_v21TurboDPMSDE.safetensors","Baked VAE",-2,"None",1.3,1,"a female,vividly,skin_texture,Vivid,light and shadow of details, beautiful face,headshot,,best quality,highres,bright,Ultra clear details","embedding:negativeXL_D.safetensors, NSFW, worst quality, normal quality, low quality, low res, blurry, text, watermark, logo, banner, extra digits, cropped, jpeg artifacts, signature, username, error, sketch, duplicate, ugly, monochrome, horror, geometry, mutation, disgusting ","mean","comfy",512,512,1,true,true],"color":"#332233","bgcolor":"#553355","shape":1},{"id":632,"type":"INPAINT_VAEEncodeInpaintConditioning","pos":{"0":-390,"1":-50},"size":{"0":292.20001220703125,"1":106},"flags":{},"order":22,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":1996,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":1997,"label":"负面条件"},{"name":"vae","type":"VAE","link":1228,"label":"VAE"},{"name":"pixels","type":"IMAGE","link":1738,"label":"图像"},{"name":"mask","type":"MASK","link":1746,"label":"遮罩"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[2071],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[2072],"slot_index":1,"shape":3,"label":"负面条件"},{"name":"latent_inpaint","type":"LATENT","links":[],"slot_index":2,"shape":3,"label":"局部重绘Latent"},{"name":"latent_samples","type":"LATENT","links":[2074],"slot_index":3,"shape":3,"label":"采样Latent"}],"properties":{"Node name for S&R":"INPAINT_VAEEncodeInpaintConditioning"}},{"id":891,"type":"Save Image To OSS And Display","pos":{"0":1600,"1":-390},"size":{"0":315,"1":82},"flags":{},"order":27,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2094,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["comfyui","JPEG"]},{"id":893,"type":"workflow/controlnet","pos":{"0":-790,"1":970},"size":{"0":315,"1":190},"flags":{},"order":19,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":2083,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":2081,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":2082,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":2080,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[2103],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[2104],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnet"},"widgets_values":["openpose",0.3,0,1]},{"id":625,"type":"Primitive string multiline [Crystools]","pos":{"0":-1910,"1":-670},"size":{"0":390,"1":100},"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"string","type":"STRING","links":[1934],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["",true]},{"id":624,"type":"Primitive string multiline [Crystools]","pos":{"0":-2200,"1":-660},"size":{"0":260,"1":81},"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"string","type":"STRING","links":[1933],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["",true]},{"id":631,"type":"KSampler (Efficient)","pos":{"0":-10,"1":-440},"size":{"0":330,"1":560},"flags":{},"order":23,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2088,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":2071,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":2072,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":2074,"label":"Latent"},{"name":"optional_vae","type":"VAE","link":1239,"label":"VAE(可选)"},{"name":"script","type":"SCRIPT","link":null,"slot_index":5,"label":"脚本"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":[2105],"slot_index":3,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[],"slot_index":4,"shape":3,"label":"VAE"},{"name":"IMAGE","type":"IMAGE","links":[],"slot_index":5,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[629977791515838,null,8,2,"dpmpp_sde","karras",0.8,"none","false"],"color":"#222233","bgcolor":"#333355","shape":1},{"id":611,"type":"Reroute","pos":{"0":-1030,"1":-50},"size":[75,26],"flags":{},"order":15,"mode":0,"inputs":[{"name":"","type":"*","link":2086,"slot_index":0}],"outputs":[{"name":"MASK","type":"MASK","links":[1746,2106],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":859,"type":"Reroute","pos":{"0":80,"1":460},"size":[75,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":2103}],"outputs":[{"name":"","type":"CONDITIONING","links":[1996,2109],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":898,"type":"KSampler (Efficient)","pos":{"0":750,"1":-430},"size":[330,560],"flags":{},"order":25,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2096,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":2109,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":2110,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":2111,"label":"Latent"},{"name":"optional_vae","type":"VAE","link":2097,"label":"VAE(可选)"},{"name":"script","type":"SCRIPT","link":null,"slot_index":5,"label":"脚本"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":[],"slot_index":3,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[],"slot_index":4,"shape":3,"label":"VAE"},{"name":"IMAGE","type":"IMAGE","links":[2093],"slot_index":5,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[629977791515838,null,8,2,"dpmpp_sde","karras",0.6,"none","true"],"color":"#222233","bgcolor":"#333355","shape":1},{"id":860,"type":"Reroute","pos":{"0":80,"1":510},"size":[75,26],"flags":{},"order":21,"mode":0,"inputs":[{"name":"","type":"*","link":2104}],"outputs":[{"name":"","type":"CONDITIONING","links":[1997,2110],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":900,"type":"SetLatentNoiseMask","pos":{"0":430,"1":-180},"size":{"0":210,"1":46},"flags":{},"order":24,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":2105,"label":"Latent"},{"name":"mask","type":"MASK","link":2106,"label":"遮罩"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[2111],"shape":3,"label":"Latent","slot_index":0}],"properties":{"Node name for S&R":"SetLatentNoiseMask"}},{"id":899,"type":"ReActorRestoreFace","pos":{"0":1190,"1":-390},"size":{"0":315,"1":130},"flags":{},"order":26,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2093,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2094],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ReActorRestoreFace"},"widgets_values":["retinaface_resnet50","codeformer-v0.1.0.pth",1,0.5]},{"id":889,"type":"ColorToMask","pos":{"0":-1600,"1":40},"size":{"0":320,"1":390},"flags":{},"order":9,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2066,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[2085],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ColorToMask"},"widgets_values":[true,100,100,100,100,12]}],"links":[[1228,350,4,632,2,"VAE"],[1239,350,4,631,4,"VAE"],[1738,603,0,632,3,"IMAGE"],[1746,611,0,632,4,"MASK"],[1933,624,0,854,0,"STRING"],[1934,625,0,854,1,"STRING"],[1935,854,0,350,2,"STRING"],[1937,858,0,857,0,"CONTROL_NET"],[1940,350,1,861,0,"*"],[1941,350,2,862,0,"*"],[1942,861,0,857,1,"CONDITIONING"],[1943,862,0,857,2,"CONDITIONING"],[1996,859,0,632,0,"CONDITIONING"],[1997,860,0,632,1,"CONDITIONING"],[2003,790,0,857,3,"IMAGE"],[2019,872,0,603,0,"*"],[2022,875,0,790,0,"*"],[2046,883,0,350,0,"LORA_STACK"],[2066,873,0,889,0,"IMAGE"],[2071,632,0,631,1,"CONDITIONING"],[2072,632,1,631,2,"CONDITIONING"],[2074,632,3,631,3,"LATENT"],[2079,892,0,894,0,"*"],[2080,894,0,893,3,"IMAGE"],[2081,857,0,893,1,"CONDITIONING"],[2082,857,1,893,2,"CONDITIONING"],[2083,858,0,893,0,"CONTROL_NET"],[2085,889,0,896,0,"MASK"],[2086,896,0,611,0,"*"],[2088,350,0,631,0,"MODEL"],[2093,898,5,899,0,"IMAGE"],[2094,899,0,891,0,"IMAGE"],[2096,350,0,898,0,"MODEL"],[2097,350,4,898,4,"VAE"],[2103,893,0,859,0,"*"],[2104,893,1,860,0,"*"],[2105,631,3,900,0,"LATENT"],[2106,611,0,900,1,"MASK"],[2109,859,0,898,1,"CONDITIONING"],[2110,860,0,898,2,"CONDITIONING"],[2111,900,0,898,3,"LATENT"]],"groups":[{"title":"step1-inpaint","bounding":[-990,-550,2101,785],"color":"#3f789e","font_size":24,"flags":{}},{"title":"controlnet","bounding":[-990,410,1110,780],"color":"#3f789e","font_size":24,"flags":{}},{"title":"提示词","bounding":[-2230,-790,1110,300],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.9646149645000994,"offset":[-167.45937906488527,607.5544869474982]},"groupNodes":{"controlnet":{"nodes":[{"type":"SetUnionControlNetType","pos":[-1690,-80],"size":{"0":315,"1":58},"flags":{},"order":8,"mode":0,"inputs":[{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[],"shape":3,"label":"ControlNet","slot_index":0}],"properties":{"Node name for S&R":"SetUnionControlNetType"},"widgets_values":["auto"],"index":0},{"type":"ControlNetApplyAdvanced","pos":[-1670,-300],"size":{"0":315,"1":166},"flags":{},"order":14,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":null,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":null,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":null,"label":"图像"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":null,"shape":3,"label":"正面条件","slot_index":0},{"name":"negative","type":"CONDITIONING","links":null,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[1,0,1],"index":1}],"links":[[0,0,1,2,855,"CONTROL_NET"]],"external":[]}},"workspace_info":{"id":"8-E6Xa5hd7bBjfgMoHO7x","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}