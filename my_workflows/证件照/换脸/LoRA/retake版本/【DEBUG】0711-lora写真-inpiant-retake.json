{"last_node_id":800,"last_link_id":1783,"nodes":[{"id":623,"type":"List of strings [Crystools]","pos":[-1340,-60],"size":{"0":320,"1":270},"flags":{},"order":15,"mode":0,"inputs":[{"name":"string_1","type":"STRING","link":1525,"widget":{"name":"string_1"},"label":"字符串_1","slot_index":0},{"name":"string_2","type":"STRING","link":1780,"widget":{"name":"string_2"},"label":"字符串_2"},{"name":"string_3","type":"STRING","link":1781,"widget":{"name":"string_3"},"label":"字符串_3"}],"outputs":[{"name":"concatenated","type":"STRING","links":[1215,1448],"shape":3,"label":"字符串合并","slot_index":0},{"name":"list_string","type":"ListString","links":null,"shape":6,"label":"字符串列表"}],"properties":{"Node name for S&R":"List of strings [Crystools]"},"widgets_values":["","","","","","","","",","]},{"id":690,"type":"DisplayText_Zho","pos":[-1340,270],"size":{"0":330,"1":110},"flags":{},"order":21,"mode":0,"inputs":[{"name":"text","type":"STRING","link":1448,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"text","type":"STRING","links":null,"shape":3,"label":"text"}],"properties":{"Node name for S&R":"DisplayText_Zho"},"widgets_values":["","a female,(naked:1.2),(without cloth:1.2),detailed skin texture,ultra-realistic skin details,best quality,masterpiece,photorealistic,realistic,"]},{"id":480,"type":"Image Comparer (rgthree)","pos":{"0":130,"1":-1820,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":670,"1":840},"flags":{},"order":62,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":1769,"label":"图像_A","dir":3},{"name":"image_b","type":"IMAGE","link":1748,"label":"图像_B","dir":3}],"outputs":[],"properties":{"comparer_mode":"Slide"},"widgets_values":[["/view?filename=rgthree.compare._temp_jzgpi_00081_.png&type=temp&subfolder=&rand=0.8430120433047996","/view?filename=rgthree.compare._temp_jzgpi_00082_.png&type=temp&subfolder=&rand=0.1469944607613456"]]},{"id":752,"type":"Image Comparer (rgthree)","pos":{"0":1630,"1":-1810,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":670,"1":840},"flags":{},"order":69,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":1765,"label":"图像_A","dir":3},{"name":"image_b","type":"IMAGE","link":1763,"label":"图像_B","dir":3}],"outputs":[],"properties":{"comparer_mode":"Slide"},"widgets_values":[["/view?filename=rgthree.compare._temp_esdlq_00081_.png&type=temp&subfolder=&rand=0.23116481495183483","/view?filename=rgthree.compare._temp_esdlq_00082_.png&type=temp&subfolder=&rand=0.41042483036090527"]]},{"id":699,"type":"SAMLoader","pos":[680,820],"size":{"0":315,"1":82},"flags":{},"order":0,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[1508],"shape":3,"label":"SAM模型"}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_h_4b8939.pth","Prefer GPU"]},{"id":350,"type":"Efficient Loader","pos":[-690,-470],"size":{"0":370,"1":470},"flags":{},"order":49,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":1118,"label":"LoRA堆","slot_index":0},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":636,"label":"ControlNet堆","slot_index":1},{"name":"positive","type":"STRING","link":1215,"widget":{"name":"positive"},"label":"正面条件"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1615],"shape":3,"label":"模型","slot_index":0},{"name":"CONDITIONING+","type":"CONDITIONING","links":[1230],"shape":3,"label":"正面条件","slot_index":1},{"name":"CONDITIONING-","type":"CONDITIONING","links":[1229],"shape":3,"label":"负面条件","slot_index":2},{"name":"LATENT","type":"LATENT","links":[],"shape":3,"label":"Latent","slot_index":3},{"name":"VAE","type":"VAE","links":[1228,1239],"shape":3,"label":"VAE","slot_index":4},{"name":"CLIP","type":"CLIP","links":[],"shape":3,"label":"CLIP","slot_index":5},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":[],"shape":3,"label":"依赖","slot_index":6}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["sdxl/realvis40_lighting_inpaint.safetensors","Baked VAE",-2,"None",1.3,1,"a female,vividly,skin_texture,Vivid,light and shadow of details, beautiful face,headshot,,best quality,highres,bright,Ultra clear details","embedding:negativeXL_D.safetensors, NSFW, worst quality, normal quality, low quality, low res, blurry, text, watermark, logo, banner, extra digits, cropped, jpeg artifacts, signature, username, error, sketch, duplicate, ugly, monochrome, horror, geometry, mutation, disgusting ","mean","comfy",512,512,1],"color":"#332233","bgcolor":"#553355","shape":1},{"id":698,"type":"UltralyticsDetectorProvider","pos":[670,620],"size":{"0":315,"1":78},"flags":{},"order":1,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[1513],"shape":3,"label":"BBox检测","slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null,"shape":3,"label":"SEGM检测"}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":667,"type":"Get resolution [Crystools]","pos":[-830,-1080],"size":{"0":210,"1":100},"flags":{},"order":22,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1747,"label":"图像"}],"outputs":[{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"Get resolution [Crystools]"}},{"id":758,"type":"ImageCompositedMaskedWeight","pos":[-4182.886822039481,479.22751830091687],"size":{"0":315,"1":78},"flags":{},"order":38,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1687,"label":"source"},{"name":"mask","type":"IMAGE","link":1688,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1712],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[1]},{"id":767,"type":"ImageBlend","pos":[-4182.886822039481,249.2275183009169],"size":{"0":315,"1":102},"flags":{},"order":36,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":1698,"label":"图像1"},{"name":"image2","type":"IMAGE","link":1699,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1688,1718],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageBlend"},"widgets_values":[1,"difference"]},{"id":781,"type":"ImageCompositedMaskedWeight","pos":[-4182.886822039481,689.2275183009167],"size":{"0":315,"1":78},"flags":{},"order":39,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1717,"label":"source"},{"name":"mask","type":"IMAGE","link":1718,"label":"mask","slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1722],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[1]},{"id":782,"type":"ImageResize+","pos":[-4372.886822039481,739.2275183009167],"size":{"0":315,"1":218},"flags":{"collapsed":true},"order":29,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1719,"label":"图像"},{"name":"width","type":"INT","link":1720,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":1721,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1717],"shape":3,"label":"图像","slot_index":0},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[768,1024,"nearest",true,"always",0]},{"id":784,"type":"ImageCompositedMaskedWeight","pos":[-3772.88682203948,699.2275183009167],"size":{"0":315,"1":78},"flags":{},"order":41,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1722,"label":"source"},{"name":"mask","type":"IMAGE","link":1723,"label":"mask","slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1709],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[0.1]},{"id":446,"type":"CR Multi-ControlNet Stack","pos":[-1840,-500],"size":{"0":418.1999816894531,"1":454},"flags":{},"order":48,"mode":0,"inputs":[{"name":"image_1","type":"IMAGE","link":1752,"label":"图像1"},{"name":"image_2","type":"IMAGE","link":1753,"label":"图像2"},{"name":"image_3","type":"IMAGE","link":null,"label":"图像3"},{"name":"controlnet_stack","type":"CONTROL_NET_STACK","link":null,"label":"ControlNet堆"}],"outputs":[{"name":"CONTROLNET_STACK","type":"CONTROL_NET_STACK","links":[636,1664],"shape":3,"label":"ControlNet堆","slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"CR Multi-ControlNet Stack"},"widgets_values":["On","controlnet-union-sdxl-1.0.safetensors",0.3,0,1,"On","controlnet-union-sdxl-1.0.safetensors",0.3,0,1,"On","ttplanetSDXLControlnet_v20Fp16.safetensors",1,0,1]},{"id":760,"type":"ImageResize+","pos":[-4392.886822039481,499.22751830091687],"size":{"0":315,"1":218},"flags":{"collapsed":true},"order":30,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1690,"label":"图像"},{"name":"width","type":"INT","link":1691,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":1692,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1687],"shape":3,"label":"图像","slot_index":0},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[768,1024,"nearest",true,"always",0]},{"id":779,"type":"ImageBlend","pos":[-3792.88682203948,259.22751830091687],"size":{"0":375.8050537109375,"1":102},"flags":{},"order":37,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":1714,"label":"图像1"},{"name":"image2","type":"IMAGE","link":1715,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1713,1723],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageBlend"},"widgets_values":[1,"difference"]},{"id":778,"type":"ImageCompositedMaskedWeight","pos":[-3752.88682203948,479.22751830091687],"size":{"0":315,"1":78},"flags":{},"order":40,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1712,"label":"source"},{"name":"mask","type":"IMAGE","link":1713,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1710],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[0.1]},{"id":787,"type":"AIO_Preprocessor","pos":[-4782.886822039481,459.22751830091687],"size":{"0":315,"1":82},"flags":{"collapsed":false},"order":25,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1728,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1690],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["AnyLineArtPreprocessor_aux",768]},{"id":768,"type":"AIO_Preprocessor","pos":[-4792.886822039481,699.2275183009167],"size":{"0":315,"1":82},"flags":{},"order":24,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1700,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1719],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["DepthAnythingV2Preprocessor",768]},{"id":757,"type":"ImageToMask","pos":[-4220,-220],"size":{"0":315,"1":58},"flags":{},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1686,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[1708],"shape":3,"label":"遮罩","slot_index":0}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["blue"]},{"id":777,"type":"MaskToImage","pos":[-4120,-20],"size":{"0":140,"1":28.10196876525879},"flags":{},"order":11,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1711,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1715],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":771,"type":"SolidMask","pos":[-4630,-220],"size":{"0":315,"1":106},"flags":{},"order":23,"mode":0,"inputs":[{"name":"width","type":"INT","link":1742,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":1743,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"MASK","type":"MASK","links":[1705],"shape":3,"label":"遮罩","slot_index":0}],"properties":{"Node name for S&R":"SolidMask"},"widgets_values":[1,512,512]},{"id":772,"type":"MaskToImage","pos":[-4620,-50],"size":{"0":141.13909912109375,"1":26},"flags":{},"order":28,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1705,"label":"遮罩","slot_index":0}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1694],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":762,"type":"Reroute","pos":[-4440,-60],"size":[82,26],"flags":{},"order":34,"mode":0,"inputs":[{"name":"","type":"*","link":1694}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1698,1714]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":783,"type":"LoadImage","pos":[-4210,-810],"size":{"0":320,"1":310},"flags":{},"order":2,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1724,1727,1740,1741],"shape":3,"label":"图像","slot_index":0},{"name":"MASK","type":"MASK","links":[1711],"shape":3,"label":"遮罩","slot_index":1}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["clipspace/clipspace-mask-718773.599999994.png [input]","image"]},{"id":763,"type":"LoadImage","pos":[-4610,-810],"size":{"0":320,"1":310},"flags":{},"order":3,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1686,1695,1725],"shape":3,"label":"图像","slot_index":0},{"name":"MASK","type":"MASK","links":[],"shape":3,"label":"遮罩","slot_index":1}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["10161720601665_.pic (1).jpg","image"]},{"id":755,"type":"GetImageSize+","pos":[-4950,-220],"size":{"0":140,"1":46},"flags":{},"order":17,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1684,"label":"图像"}],"outputs":[{"name":"width","type":"INT","links":[1691,1720,1742],"shape":3,"label":"宽度","slot_index":0},{"name":"height","type":"INT","links":[1692,1721,1743],"shape":3,"label":"高度","slot_index":1}],"properties":{"Node name for S&R":"GetImageSize+"}},{"id":786,"type":"Image Comparer (rgthree)","pos":{"0":-3460,"1":-1550,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":440,"1":480},"flags":{},"order":20,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":1726,"label":"图像_A","dir":3},{"name":"image_b","type":"IMAGE","link":1727,"label":"图像_B","dir":3}],"outputs":[],"properties":{"comparer_mode":"Slide"},"widgets_values":[["/view?filename=rgthree.compare._temp_paavr_00001_.png&type=temp&subfolder=&rand=0.18101189080294877","/view?filename=rgthree.compare._temp_paavr_00002_.png&type=temp&subfolder=&rand=0.9350895514616011"]]},{"id":765,"type":"PreviewImage","pos":[-5130,-1540],"size":{"0":447.667236328125,"1":470.1690673828125},"flags":{},"order":35,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1696,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":759,"type":"PreviewImage","pos":[-4570,-1540],"size":{"0":397.9082946777344,"1":481.5565185546875},"flags":{},"order":44,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1689,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":769,"type":"PreviewImage","pos":[-4040,-1540],"size":{"0":444.0813293457031,"1":486.7157287597656},"flags":{},"order":46,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1701,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":774,"type":"GrowMaskWithBlur","pos":[-3880,-220],"size":{"0":315,"1":246},"flags":{},"order":19,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1708,"label":"遮罩"}],"outputs":[{"name":"mask","type":"MASK","links":[1754],"shape":3,"label":"遮罩","slot_index":0},{"name":"mask_inverted","type":"MASK","links":[],"shape":3,"label":"反转遮罩","slot_index":1}],"properties":{"Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[10,3,true,false,3,0.5,0.5,false]},{"id":655,"type":"PreviewImage","pos":[-550,-1820],"size":{"0":600,"1":840},"flags":{},"order":57,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1628,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":632,"type":"INPAINT_VAEEncodeInpaintConditioning","pos":[-210,-270],"size":{"0":292.20001220703125,"1":106},"flags":{},"order":52,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":1230,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":1229,"label":"负面条件"},{"name":"vae","type":"VAE","link":1228,"label":"VAE"},{"name":"pixels","type":"IMAGE","link":1738,"label":"图像"},{"name":"mask","type":"MASK","link":1746,"label":"遮罩"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1431],"shape":3,"label":"正面条件","slot_index":0},{"name":"negative","type":"CONDITIONING","links":[1432],"shape":3,"label":"负面条件","slot_index":1},{"name":"latent_inpaint","type":"LATENT","links":[],"shape":3,"label":"局部重绘Latent","slot_index":2},{"name":"latent_samples","type":"LATENT","links":[1617],"shape":3,"label":"采样Latent","slot_index":3}],"properties":{"Node name for S&R":"INPAINT_VAEEncodeInpaintConditioning"}},{"id":730,"type":"PerturbedAttentionGuidance","pos":[-220,-460],"size":{"0":315,"1":58},"flags":{},"order":51,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1615,"label":"模型"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1631],"shape":3,"label":"模型","slot_index":0}],"properties":{"Node name for S&R":"PerturbedAttentionGuidance"},"widgets_values":[3]},{"id":619,"type":"Reroute","pos":[620,-560],"size":[75,26],"flags":{},"order":55,"mode":0,"inputs":[{"name":"","type":"*","link":1749}],"outputs":[{"name":"","type":"IMAGE","links":[1243,1628,1654],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":719,"type":"PreviewImage","pos":[1900,380],"size":{"0":210,"1":250},"flags":{},"order":60,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1559,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":776,"type":"Reroute","pos":[-3362.88682203948,479.22751830091687],"size":[75,26],"flags":{},"order":42,"mode":0,"inputs":[{"name":"","type":"*","link":1710}],"outputs":[{"name":"","type":"IMAGE","links":[1689,1750],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":775,"type":"Reroute","pos":[-3352.88682203948,709.2275183009167],"size":[75,26],"flags":{},"order":43,"mode":0,"inputs":[{"name":"","type":"*","link":1709}],"outputs":[{"name":"","type":"IMAGE","links":[1701,1751],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":791,"type":"Reroute","pos":[-2090,-450],"size":[82,26],"flags":{},"order":47,"mode":0,"inputs":[{"name":"","type":"*","link":1751}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1753],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":603,"type":"Reroute","pos":[-2100,-710],"size":[82,26],"flags":{},"order":16,"mode":0,"inputs":[{"name":"","type":"*","link":1737}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1738,1747,1748],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":790,"type":"Reroute","pos":[-2090,-500],"size":[82,26],"flags":{},"order":45,"mode":0,"inputs":[{"name":"","type":"*","link":1750}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1752],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":611,"type":"Reroute","pos":[-2090,-670],"size":[75,26],"flags":{},"order":32,"mode":0,"inputs":[{"name":"","type":"*","link":1731,"slot_index":0}],"outputs":[{"name":"MASK","type":"MASK","links":[1746],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":785,"type":"ImageBlend","pos":[-3790,-770],"size":{"0":315,"1":102},"flags":{},"order":14,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":1724,"label":"图像1"},{"name":"image2","type":"IMAGE","link":1725,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1726],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageBlend"},"widgets_values":[1,"difference"]},{"id":764,"type":"Reroute","pos":[-4470,-410],"size":[82,26],"flags":{},"order":13,"mode":0,"inputs":[{"name":"","type":"*","link":1695}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1699]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":789,"type":"Reroute","pos":[-3380,-830],"size":[75,26],"flags":{},"order":9,"mode":0,"inputs":[{"name":"","type":"*","link":1740}],"outputs":[{"name":"","type":"IMAGE","links":[1737],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":756,"type":"Reroute","pos":[-3350,-270],"size":[75,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":1754}],"outputs":[{"name":"MASK","type":"MASK","links":[1731,1755],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":754,"type":"MaskToImage","pos":[-3500,-140],"size":{"0":140,"1":26},"flags":{},"order":33,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1755,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1696],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":761,"type":"Reroute","pos":[-4940,-420],"size":[82,26],"flags":{},"order":10,"mode":0,"inputs":[{"name":"","type":"*","link":1741}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1684,1697],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":766,"type":"Reroute","pos":[-4940,200],"size":[82,26],"flags":{},"order":18,"mode":0,"inputs":[{"name":"","type":"*","link":1697}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1700,1728,1756],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":792,"type":"DWPreprocessor","pos":[-4550,970],"size":{"0":315,"1":198},"flags":{},"order":26,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1756,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1757],"shape":3,"label":"图像","slot_index":0},{"name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null,"shape":3,"label":"姿态关键点"}],"properties":{"Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",512,"yolox_l.onnx","dw-ll_ucoco_384_bs5.torchscript.pt"]},{"id":793,"type":"PreviewImage","pos":[-3415.5270107941724,1044.8106110651925],"size":{"0":210,"1":250},"flags":{},"order":31,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1757,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":751,"type":"Image Comparer (rgthree)","pos":{"0":890,"1":-1820,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":670,"1":840},"flags":{},"order":67,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":1761,"label":"图像_A","dir":3},{"name":"image_b","type":"IMAGE","link":1770,"label":"图像_B","dir":3}],"outputs":[],"properties":{"comparer_mode":"Slide"},"widgets_values":[["/view?filename=rgthree.compare._temp_bxxan_00081_.png&type=temp&subfolder=&rand=0.433186230442167","/view?filename=rgthree.compare._temp_bxxan_00082_.png&type=temp&subfolder=&rand=0.3196233576642311"]]},{"id":796,"type":"Reroute","pos":[1650,-640],"size":[75,26],"flags":{},"order":65,"mode":0,"inputs":[{"name":"","type":"*","link":1778}],"outputs":[{"name":"","type":"IMAGE","links":[1761,1763],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":797,"type":"Reroute","pos":[2087.7069472259213,-637.8984518960237],"size":[75,26],"flags":{},"order":68,"mode":0,"inputs":[{"name":"","type":"*","link":1764}],"outputs":[{"name":"","type":"IMAGE","links":[1765],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":795,"type":"Reroute","pos":[1010,-200],"size":[75,26],"flags":{},"order":61,"mode":0,"inputs":[{"name":"","type":"*","link":1768,"slot_index":0}],"outputs":[{"name":"","type":"IMAGE","links":[1758]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":696,"type":"FaceDetailer","pos":[1160,360],"size":{"0":519,"1":900},"flags":{},"order":58,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1654,"label":"图像","slot_index":0},{"name":"model","type":"MODEL","link":1783,"label":"模型"},{"name":"clip","type":"CLIP","link":1598,"label":"CLIP"},{"name":"vae","type":"VAE","link":1539,"label":"VAE"},{"name":"positive","type":"CONDITIONING","link":1599,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":1538,"label":"负面条件"},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":1513,"label":"BBox检测"},{"name":"sam_model_opt","type":"SAM_MODEL","link":1508,"label":"SAM模型","slot_index":7},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null,"label":"Segm检测","slot_index":8},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"细化约束","slot_index":9},{"name":"scheduler_func_opt","type":"SCHEDULER_FUNC","link":null,"slot_index":10}],"outputs":[{"name":"image","type":"IMAGE","links":[1767],"shape":3,"label":"图像","slot_index":0},{"name":"cropped_refined","type":"IMAGE","links":[],"shape":6,"label":"细化图像","slot_index":1},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":[1559],"shape":6,"label":"细化部分","slot_index":2},{"name":"mask","type":"MASK","links":[],"shape":3,"label":"遮罩","slot_index":3},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":[],"shape":3,"label":"细化节点束","slot_index":4},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6,"label":"ControlNet图像","slot_index":5}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[512,true,1024,419560502711614,"randomize",7,2,"dpmpp_sde","karras",0.5,5,true,true,0.4,10,3,"center-1",0,0.93,0,0.7000000000000001,"Small",10,"",1,false,20]},{"id":799,"type":"Reroute","pos":[1720,300],"size":[75,26],"flags":{},"order":59,"mode":0,"inputs":[{"name":"","type":"*","link":1767}],"outputs":[{"name":"","type":"IMAGE","links":[1768,1769,1770],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":798,"type":"UpscaleModelLoader","pos":[1210,-420],"size":{"0":315,"1":58},"flags":{},"order":4,"mode":0,"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[1766],"shape":3,"label":"放大模型"}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["4x-UltraSharp.pth"]},{"id":635,"type":"Get resolution [Crystools]","pos":[1250,-300],"size":{"0":210,"1":100},"flags":{},"order":56,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1243,"label":"图像"}],"outputs":[{"name":"width","type":"INT","links":[1775],"shape":3,"label":"宽度","slot_index":0},{"name":"height","type":"INT","links":[1776],"shape":3,"label":"高度","slot_index":1}],"properties":{"Node name for S&R":"Get resolution [Crystools]"}},{"id":794,"type":"ImageUpscaleWithModel","pos":[1240,-540],"size":{"0":241.79998779296875,"1":46},"flags":{},"order":63,"mode":0,"inputs":[{"name":"upscale_model","type":"UPSCALE_MODEL","link":1766,"label":"放大模型","slot_index":0},{"name":"image","type":"IMAGE","link":1758,"label":"图像","slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1777],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageUpscaleWithModel"}},{"id":800,"type":"ImageResize+","pos":[1570,-520],"size":{"0":320,"1":220},"flags":{},"order":64,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1777,"label":"图像"},{"name":"width","type":"INT","link":1775,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":1776,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1778,1779],"shape":3,"label":"图像","slot_index":0},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[512,512,"bilinear",true,"always",0]},{"id":630,"type":"Film Grain","pos":[2000,-510],"size":{"0":315,"1":178},"flags":{},"order":66,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1779,"label":"image"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1764],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"Film Grain"},"widgets_values":[0.3,0.3,0.7,0,117549624494947,"randomize"]},{"id":631,"type":"KSampler (Efficient)","pos":[150,-500],"size":[330,560],"flags":{},"order":54,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1631,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":1431,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":1432,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":1617,"label":"Latent"},{"name":"optional_vae","type":"VAE","link":1239,"label":"VAE(可选)"},{"name":"script","type":"SCRIPT","link":null,"label":"脚本"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"shape":3,"label":"模型","slot_index":0},{"name":"CONDITIONING+","type":"CONDITIONING","links":[],"shape":3,"label":"正面条件","slot_index":1},{"name":"CONDITIONING-","type":"CONDITIONING","links":[],"shape":3,"label":"负面条件","slot_index":2},{"name":"LATENT","type":"LATENT","links":[],"shape":3,"label":"Latent","slot_index":3},{"name":"VAE","type":"VAE","links":[],"shape":3,"label":"VAE","slot_index":4},{"name":"IMAGE","type":"IMAGE","links":[1749],"shape":3,"label":"图像","slot_index":5}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[592244893047773,null,7,1.5,"dpmpp_sde","karras",1,"auto","true"],"color":"#222233","bgcolor":"#333355","shape":1},{"id":625,"type":"Primitive string multiline [Crystools]","pos":[-1840,230],"size":{"0":380,"1":140},"flags":{},"order":5,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[1780],"shape":3,"label":"字符串","slot_index":0}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["(naked:1.2),(without cloth:1.2),detailed skin texture,ultra-realistic skin details"]},{"id":626,"type":"Primitive string multiline [Crystools]","pos":[-1850,440],"size":{"0":380,"1":180},"flags":{},"order":6,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[1781],"shape":3,"label":"字符串","slot_index":0}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["best quality,masterpiece,photorealistic,realistic,\n"]},{"id":624,"type":"Primitive string multiline [Crystools]","pos":[-1840,20],"size":{"0":380,"1":130},"flags":{},"order":7,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[1525],"shape":3,"label":"字符串","slot_index":0}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["a female"]},{"id":584,"type":"CR LoRA Stack","pos":[-1330,-470],"size":{"0":315,"1":342},"flags":{},"order":8,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"label":"LoRA堆"}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[1118,1665],"shape":3,"slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"CR LoRA Stack"},"widgets_values":["On","train_lora/prod_lora/20240713/20240713195553_3e6f8b7529fd4f84ab7fac2ed4b95a37/spmf_4_r_2024071319/spmf_4_r_2024071319.safetensors",1,1,"Off","None",1,1,"Off","None",1,1]},{"id":736,"type":"PerturbedAttentionGuidance","pos":[670,360],"size":{"0":315,"1":58},"flags":{},"order":53,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1592,"label":"模型"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1783],"shape":3,"label":"模型","slot_index":0}],"properties":{"Node name for S&R":"PerturbedAttentionGuidance"},"widgets_values":[3]},{"id":697,"type":"Efficient Loader","pos":[180,390],"size":{"0":350,"1":530},"flags":{},"order":50,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":1665,"label":"LoRA堆","slot_index":0},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":1664,"label":"ControlNet堆","slot_index":1}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1592],"shape":3,"label":"模型","slot_index":0},{"name":"CONDITIONING+","type":"CONDITIONING","links":[1599],"shape":3,"label":"正面条件","slot_index":1},{"name":"CONDITIONING-","type":"CONDITIONING","links":[1538],"shape":3,"label":"负面条件","slot_index":2},{"name":"LATENT","type":"LATENT","links":[],"shape":3,"label":"Latent","slot_index":3},{"name":"VAE","type":"VAE","links":[1539],"shape":3,"label":"VAE","slot_index":4},{"name":"CLIP","type":"CLIP","links":[1598],"shape":3,"label":"CLIP","slot_index":5},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":[],"shape":3,"label":"依赖","slot_index":6}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["sdxl/realvisxlV40_v40LightningBakedvae.safetensors","Baked VAE",-2,"None",0.9,1,"spmf_4_r_2024071319,a female","embedding:negativeXL_D.safetensors, NSFW, worst quality, normal quality, low quality, low res, blurry, text, watermark, logo, banner, extra digits, cropped, jpeg artifacts, signature, username, error, sketch, duplicate, ugly, monochrome, horror, geometry, mutation, disgusting ","mean","comfy",512,512,1],"color":"#332233","bgcolor":"#553355","shape":1}],"links":[[636,446,0,350,1,"CONTROL_NET_STACK"],[1118,584,0,350,0,"LORA_STACK"],[1215,623,0,350,2,"STRING"],[1228,350,4,632,2,"VAE"],[1229,350,2,632,1,"CONDITIONING"],[1230,350,1,632,0,"CONDITIONING"],[1239,350,4,631,4,"VAE"],[1243,619,0,635,0,"IMAGE"],[1431,632,0,631,1,"CONDITIONING"],[1432,632,1,631,2,"CONDITIONING"],[1448,623,0,690,0,"STRING"],[1508,699,0,696,7,"SAM_MODEL"],[1513,698,0,696,6,"BBOX_DETECTOR"],[1525,624,0,623,0,"STRING"],[1538,697,2,696,5,"CONDITIONING"],[1539,697,4,696,3,"VAE"],[1559,696,2,719,0,"IMAGE"],[1592,697,0,736,0,"MODEL"],[1598,697,5,696,2,"CLIP"],[1599,697,1,696,4,"CONDITIONING"],[1615,350,0,730,0,"MODEL"],[1617,632,3,631,3,"LATENT"],[1628,619,0,655,0,"IMAGE"],[1631,730,0,631,0,"MODEL"],[1654,619,0,696,0,"IMAGE"],[1664,446,0,697,1,"CONTROL_NET_STACK"],[1665,584,0,697,0,"LORA_STACK"],[1684,761,0,755,0,"IMAGE"],[1686,763,0,757,0,"IMAGE"],[1687,760,0,758,0,"IMAGE"],[1688,767,0,758,1,"IMAGE"],[1689,776,0,759,0,"IMAGE"],[1690,787,0,760,0,"IMAGE"],[1691,755,0,760,1,"INT"],[1692,755,1,760,2,"INT"],[1694,772,0,762,0,"*"],[1695,763,0,764,0,"*"],[1696,754,0,765,0,"IMAGE"],[1697,761,0,766,0,"*"],[1698,762,0,767,0,"IMAGE"],[1699,764,0,767,1,"IMAGE"],[1700,766,0,768,0,"IMAGE"],[1701,775,0,769,0,"IMAGE"],[1705,771,0,772,0,"MASK"],[1708,757,0,774,0,"MASK"],[1709,784,0,775,0,"*"],[1710,778,0,776,0,"*"],[1711,783,1,777,0,"MASK"],[1712,758,0,778,0,"IMAGE"],[1713,779,0,778,1,"IMAGE"],[1714,762,0,779,0,"IMAGE"],[1715,777,0,779,1,"IMAGE"],[1717,782,0,781,0,"IMAGE"],[1718,767,0,781,1,"IMAGE"],[1719,768,0,782,0,"IMAGE"],[1720,755,0,782,1,"INT"],[1721,755,1,782,2,"INT"],[1722,781,0,784,0,"IMAGE"],[1723,779,0,784,1,"IMAGE"],[1724,783,0,785,0,"IMAGE"],[1725,763,0,785,1,"IMAGE"],[1726,785,0,786,0,"IMAGE"],[1727,783,0,786,1,"IMAGE"],[1728,766,0,787,0,"IMAGE"],[1731,756,0,611,0,"*"],[1737,789,0,603,0,"*"],[1738,603,0,632,3,"IMAGE"],[1740,783,0,789,0,"*"],[1741,783,0,761,0,"*"],[1742,755,0,771,0,"INT"],[1743,755,1,771,1,"INT"],[1746,611,0,632,4,"MASK"],[1747,603,0,667,0,"IMAGE"],[1748,603,0,480,1,"IMAGE"],[1749,631,5,619,0,"*"],[1750,776,0,790,0,"*"],[1751,775,0,791,0,"*"],[1752,790,0,446,0,"IMAGE"],[1753,791,0,446,1,"IMAGE"],[1754,774,0,756,0,"*"],[1755,756,0,754,0,"MASK"],[1756,766,0,792,0,"IMAGE"],[1757,792,0,793,0,"IMAGE"],[1758,795,0,794,1,"IMAGE"],[1761,796,0,751,0,"IMAGE"],[1763,796,0,752,1,"IMAGE"],[1764,630,0,797,0,"*"],[1765,797,0,752,0,"IMAGE"],[1766,798,0,794,0,"UPSCALE_MODEL"],[1767,696,0,799,0,"*"],[1768,799,0,795,0,"*"],[1769,799,0,480,0,"IMAGE"],[1770,799,0,751,1,"IMAGE"],[1775,635,0,800,1,"INT"],[1776,635,1,800,2,"INT"],[1777,794,0,800,0,"IMAGE"],[1778,800,0,796,0,"*"],[1779,800,0,630,0,"IMAGE"],[1780,625,0,623,1,"STRING"],[1781,626,0,623,2,"STRING"],[1783,736,0,696,1,"MODEL"]],"groups":[{"title":"ControlNet图像预处理","bounding":[-5008,138,1682,665],"color":"#3f789e","font_size":24,"locked":false},{"title":"mask","bounding":[-5013,-323,1693,422],"color":"#3f789e","font_size":24,"locked":false},{"title":"step1-inpaint","bounding":[-818,-625,1489,745],"color":"#3f789e","font_size":24,"locked":false},{"title":"step2-面部修复","bounding":[-21,257,1798,1044],"color":"#3f789e","font_size":24,"locked":false},{"title":"step3-upscale-grain","bounding":[1057,-630,1350,464],"color":"#3f789e","font_size":24,"locked":false},{"title":"输入条件","bounding":[-2053,-776,1109,1425],"color":"#3f789e","font_size":24,"locked":false},{"title":"模板预处理结果","bounding":[-5576,-1680,2805,685],"color":"#8A8","font_size":24,"locked":false},{"title":"模板图","bounding":[-5005,-894,1677,490],"color":"#3f789e","font_size":24,"locked":false},{"title":"lora写真效果图","bounding":[-977,-1967,3404,1116],"color":"#b06634","font_size":24,"locked":false}],"config":{},"extra":{"ds":{"scale":0.4950000000000003,"offset":{"0":2636.1921881629987,"1":927.5582389549114}},"groupNodes":{},"workspace_info":{"id":"Glr2aJ6p4Z4CCrKHYLnrJ","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}