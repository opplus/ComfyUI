{"last_node_id":1024,"last_link_id":2387,"nodes":[{"id":760,"type":"ImageResize+","pos":{"0":-2640,"1":-170},"size":{"0":315,"1":218},"flags":{"collapsed":true},"order":29,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1690,"label":"图像"},{"name":"width","type":"INT","link":1691,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":1692,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1687],"slot_index":0,"shape":3,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[768,1024,"nearest","stretch","always",0]},{"id":766,"type":"Reroute","pos":{"0":-3190,"1":-470},"size":[82,26],"flags":{},"order":13,"mode":0,"inputs":[{"name":"","type":"*","link":1697,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1700,1728,1877],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":778,"type":"ImageCompositedMaskedWeight","pos":{"0":-2000,"1":-190},"size":{"0":315,"1":78},"flags":{},"order":59,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1712,"label":"source"},{"name":"mask","type":"IMAGE","link":1713,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1710],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[0]},{"id":779,"type":"ImageBlend","pos":{"0":-2040,"1":-410},"size":{"0":375.8050537109375,"1":102},"flags":{},"order":42,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":1714,"label":"图像1"},{"name":"image2","type":"IMAGE","link":2219,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1713,1723],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageBlend"},"widgets_values":[1,"difference"]},{"id":781,"type":"ImageCompositedMaskedWeight","pos":{"0":-2430,"1":20},"size":{"0":315,"1":78},"flags":{},"order":57,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1717,"label":"source"},{"name":"mask","type":"IMAGE","link":1718,"slot_index":1,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1722],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[1]},{"id":782,"type":"ImageResize+","pos":{"0":-2620,"1":70},"size":{"0":315,"1":218},"flags":{"collapsed":true},"order":28,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1719,"label":"图像"},{"name":"width","type":"INT","link":1720,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":1721,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1717],"slot_index":0,"shape":3,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[768,1024,"nearest","stretch","always",0]},{"id":944,"type":"Reroute","pos":{"0":-2740,"1":-440},"size":[75,26],"flags":{},"order":38,"mode":0,"inputs":[{"name":"","type":"*","link":2218,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2219],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":787,"type":"AIO_Preprocessor","pos":{"0":-3040,"1":-320},"size":{"0":320,"1":80},"flags":{"collapsed":false},"order":21,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1728,"label":"图像"},{"name":"resolution","type":"INT","link":1867,"widget":{"name":"resolution"},"label":"分辨率"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1690],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["AnyLineArtPreprocessor_aux",768]},{"id":768,"type":"AIO_Preprocessor","pos":{"0":-3040,"1":-140},"size":{"0":320,"1":80},"flags":{},"order":20,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1700,"label":"图像"},{"name":"resolution","type":"INT","link":1868,"widget":{"name":"resolution"},"label":"分辨率"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1719],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["DepthAnythingV2Preprocessor",768]},{"id":758,"type":"ImageCompositedMaskedWeight","pos":{"0":-2430,"1":-190},"size":{"0":315,"1":78},"flags":{},"order":56,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1687,"label":"source"},{"name":"mask","type":"IMAGE","link":1688,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1712],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[1]},{"id":767,"type":"ImageBlend","pos":{"0":-2430,"1":-410},"size":{"0":315,"1":102},"flags":{},"order":53,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":1698,"label":"图像1"},{"name":"image2","type":"IMAGE","link":1699,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1688,1718],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageBlend"},"widgets_values":[1,"difference"]},{"id":755,"type":"GetImageSize+","pos":{"0":-3110,"1":-990},"size":{"0":142.8000030517578,"1":66},"flags":{},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1684,"label":"图像"}],"outputs":[{"name":"width","type":"INT","links":[1691,1720,1742,1867,1868,1880],"slot_index":0,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":[1692,1721,1743],"slot_index":1,"shape":3,"label":"高度"},{"name":"count","type":"INT","links":null,"shape":3,"label":"count"}],"properties":{"Node name for S&R":"GetImageSize+"},"widgets_values":[]},{"id":907,"type":"MaskToImage","pos":{"0":-4480,"1":-860},"size":{"0":264.5999755859375,"1":26},"flags":{},"order":31,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2216,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2218,2224],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"},"widgets_values":[]},{"id":932,"type":"MaskToImage","pos":{"0":-4180,"1":440},"size":{"0":264.5999755859375,"1":26},"flags":{},"order":34,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2197,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2227],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"},"widgets_values":[]},{"id":771,"type":"SolidMask","pos":{"0":-3190,"1":-820},"size":{"0":315,"1":106},"flags":{},"order":19,"mode":0,"inputs":[{"name":"width","type":"INT","link":1742,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":1743,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"MASK","type":"MASK","links":[1705],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"SolidMask"},"widgets_values":[1,512,512]},{"id":772,"type":"MaskToImage","pos":{"0":-2800,"1":-810},"size":{"0":176.39999389648438,"1":26},"flags":{},"order":27,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1705,"slot_index":0,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1694],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"},"widgets_values":[]},{"id":762,"type":"Reroute","pos":{"0":-2790,"1":-710},"size":[82,26],"flags":{},"order":36,"mode":0,"inputs":[{"name":"","type":"*","link":1694,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1698,1714,2243],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":943,"type":"LayerMask: MaskGrow","pos":{"0":-4920,"1":-680},"size":{"0":315,"1":106},"flags":{},"order":23,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2247,"label":"遮罩"}],"outputs":[{"name":"mask","type":"MASK","links":[2216],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: MaskGrow"},"widgets_values":[false,25,0],"color":"rgba(27, 80, 119, 0.7)"},{"id":935,"type":"ImageToMask","pos":{"0":-4970,"1":70},"size":{"0":315,"1":58},"flags":{},"order":16,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2201,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[2203,2252],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":936,"type":"Masks Subtract","pos":{"0":-4630,"1":200},"size":{"0":210,"1":46},"flags":{},"order":35,"mode":0,"inputs":[{"name":"masks_a","type":"MASK","link":2202,"label":"masks_a"},{"name":"masks_b","type":"MASK","link":2203,"label":"masks_b"}],"outputs":[{"name":"MASKS","type":"MASK","links":[2254],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"Masks Subtract"},"widgets_values":[]},{"id":956,"type":"Masks Subtract","pos":{"0":-4590,"1":-60},"size":{"0":210,"1":46},"flags":{},"order":32,"mode":0,"inputs":[{"name":"masks_a","type":"MASK","link":2251,"label":"masks_a"},{"name":"masks_b","type":"MASK","link":2252,"label":"masks_b"}],"outputs":[{"name":"MASKS","type":"MASK","links":[2253],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"Masks Subtract"},"widgets_values":[]},{"id":922,"type":"AliPersonMaskSegment","pos":{"0":-5390,"1":40},"size":{"0":315,"1":326},"flags":{},"order":9,"mode":0,"inputs":[{"name":"person_image","type":"IMAGE","link":2369,"label":"person_image"}],"outputs":[{"name":"head","type":"IMAGE","links":null,"shape":3,"label":"head"},{"name":"hair","type":"IMAGE","links":null,"shape":3,"label":"hair"},{"name":"body","type":"IMAGE","links":[],"slot_index":2,"shape":3,"label":"body"},{"name":"skin","type":"IMAGE","links":[],"slot_index":3,"shape":3,"label":"skin"},{"name":"face","type":"IMAGE","links":null,"shape":3,"label":"face"},{"name":"cloth","type":"IMAGE","links":[2201,2225],"slot_index":5,"shape":3,"label":"cloth"}],"properties":{"Node name for S&R":"AliPersonMaskSegment"},"widgets_values":[false,false,false,false,false,true,"",false]},{"id":955,"type":"LayerMask: MaskGrow","pos":{"0":-4960,"1":-230},"size":{"0":315,"1":106},"flags":{},"order":24,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2257,"label":"遮罩"}],"outputs":[{"name":"mask","type":"MASK","links":[2251],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: MaskGrow"},"widgets_values":[false,25,0],"color":"rgba(27, 80, 119, 0.7)"},{"id":953,"type":"LayerMask: PersonMaskUltra V2","pos":{"0":-5380,"1":-440},"size":{"0":365.4000244140625,"1":414},"flags":{},"order":8,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2368,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":[2256],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[true,true,false,false,false,false,0.4,"VITMatte",6,6,0.01,0.99,true,"cuda",2],"color":"rgba(27, 80, 119, 0.7)"},{"id":761,"type":"Reroute","pos":{"0":-3570,"1":-1200},"size":[82,26],"flags":{},"order":6,"mode":0,"inputs":[{"name":"","type":"*","link":2366,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1684,1697],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":764,"type":"Reroute","pos":{"0":-3550,"1":-1090},"size":[82,26],"flags":{},"order":51,"mode":0,"inputs":[{"name":"","type":"*","link":2232,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1699,2244],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":961,"type":"Reroute","pos":{"0":-1150,"1":-1760},"size":[75,26],"flags":{"pinned":true},"order":5,"mode":0,"inputs":[{"name":"","type":"*","link":2365,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2379],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":948,"type":"Reroute","pos":{"0":-3810,"1":-90},"size":[75,26],"flags":{},"order":50,"mode":0,"inputs":[{"name":"","type":"*","link":2344,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2232,2261],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":950,"type":"ImageCompositedMaskedWeight","pos":{"0":-2330,"1":-840},"size":{"0":315,"1":78},"flags":{},"order":54,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":2243,"label":"source"},{"name":"mask","type":"IMAGE","link":2244,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2262],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[0.6000000000000001]},{"id":832,"type":"DWPreprocessor","pos":{"0":-3050,"1":40},"size":{"0":320,"1":200},"flags":{},"order":22,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1877,"label":"图像"},{"name":"resolution","type":"INT","link":1880,"widget":{"name":"resolution"},"label":"分辨率"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2263],"slot_index":0,"shape":3,"label":"图像"},{"name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null,"shape":3,"label":"姿态关键点"}],"properties":{"Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","disable",512,"yolox_l.onnx","dw-ll_ucoco_384_bs5.torchscript.pt","disable"]},{"id":776,"type":"Reroute","pos":{"0":-1610,"1":-190},"size":[75,26],"flags":{},"order":62,"mode":0,"inputs":[{"name":"","type":"*","link":1710,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2264],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":784,"type":"ImageCompositedMaskedWeight","pos":{"0":-2020,"1":30},"size":{"0":315,"1":78},"flags":{},"order":60,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1722,"label":"source"},{"name":"mask","type":"IMAGE","link":1723,"slot_index":1,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1709],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[0]},{"id":775,"type":"Reroute","pos":{"0":-1600,"1":10},"size":[75,26],"flags":{},"order":63,"mode":0,"inputs":[{"name":"","type":"*","link":1709,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2265],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":947,"type":"Reroute","pos":{"0":-3790,"1":-590},"size":[75,26],"flags":{},"order":17,"mode":0,"inputs":[{"name":"","type":"*","link":2225,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2267],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":946,"type":"Reroute","pos":{"0":-3790,"1":-900},"size":[75,26],"flags":{},"order":39,"mode":0,"inputs":[{"name":"","type":"*","link":2224,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2266],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":949,"type":"Reroute","pos":{"0":-3790,"1":300},"size":[75,26],"flags":{},"order":40,"mode":0,"inputs":[{"name":"","type":"*","link":2227,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2268],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":963,"type":"Reroute","pos":{"0":-1150,"1":-1540},"size":[75,26],"flags":{},"order":58,"mode":0,"inputs":[{"name":"","type":"*","link":2262,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2381],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":966,"type":"Reroute","pos":{"0":-1150,"1":-1197.6392822265625},"size":[75,26],"flags":{},"order":65,"mode":0,"inputs":[{"name":"","type":"*","link":2265,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2384],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":967,"type":"Reroute","pos":{"0":-1150,"1":-1060},"size":[75,26],"flags":{},"order":43,"mode":0,"inputs":[{"name":"","type":"*","link":2266,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2385],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":968,"type":"Reroute","pos":{"0":-1150,"1":-936.6714477539062},"size":[75,26],"flags":{},"order":25,"mode":0,"inputs":[{"name":"","type":"*","link":2267,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2386],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":969,"type":"Reroute","pos":{"0":-1150,"1":-844.3035278320312},"size":[75,26],"flags":{},"order":44,"mode":0,"inputs":[{"name":"","type":"*","link":2268,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2387],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":964,"type":"Reroute","pos":{"0":-1150,"1":-1440},"size":[75,26],"flags":{},"order":30,"mode":0,"inputs":[{"name":"","type":"*","link":2263,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2382],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":965,"type":"Reroute","pos":{"0":-1150,"1":-1330},"size":[75,26],"flags":{},"order":64,"mode":0,"inputs":[{"name":"","type":"*","link":2264,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2383],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":962,"type":"Reroute","pos":{"0":-1150,"1":-1640},"size":[75,26],"flags":{},"order":52,"mode":0,"inputs":[{"name":"","type":"*","link":2261,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2380],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":937,"type":"MaskToImage","pos":{"0":-4060,"1":80},"size":{"0":264.5999755859375,"1":26},"flags":{},"order":48,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2346,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2343],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"},"widgets_values":[]},{"id":952,"type":"MaskFix+","pos":{"0":-4930,"1":-910},"size":{"0":315,"1":154},"flags":{},"order":14,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2246,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2247],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,10,3,3,0]},{"id":958,"type":"MaskFix+","pos":{"0":-4980,"1":-440},"size":{"0":315,"1":154},"flags":{},"order":15,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2256,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2257],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,10,3,3,0]},{"id":957,"type":"Masks Add","pos":{"0":-4350,"1":80},"size":{"0":210,"1":46},"flags":{},"order":41,"mode":0,"inputs":[{"name":"masks_a","type":"MASK","link":2253,"label":"masks_a"},{"name":"masks_b","type":"MASK","link":2254,"label":"masks_b"}],"outputs":[{"name":"MASKS","type":"MASK","links":[2345],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"Masks Add"},"widgets_values":[]},{"id":1007,"type":"MaskFix+","pos":{"0":-4400,"1":-290},"size":{"0":315,"1":154},"flags":{},"order":45,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2345,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2346],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"MaskFix+"},"widgets_values":[0,10,8,5,0]},{"id":1006,"type":"Images to RGB","pos":{"0":-4050,"1":-60},"size":{"0":210,"1":26},"flags":{},"order":49,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2343,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2344],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"Images to RGB"},"widgets_values":[]},{"id":1011,"type":"Reroute","pos":{"0":-6010,"1":-1190},"size":[75,26],"flags":{},"order":4,"mode":0,"inputs":[{"name":"","type":"*","link":2375}],"outputs":[{"name":"","type":"IMAGE","links":[2365,2366,2367,2368,2369,2370,2371],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":903,"type":"LayerMask: PersonMaskUltra V2","pos":{"0":-5360,"1":-920},"size":{"0":365.4000244140625,"1":414},"flags":{},"order":7,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2367,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":[2246],"slot_index":1,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[true,false,false,false,false,false,0.4,"VITMatte",6,6,0.01,0.99,true,"cuda",2],"color":"rgba(27, 80, 119, 0.7)"},{"id":928,"type":"DownloadAndLoadFlorence2Model","pos":{"0":-5400,"1":470},"size":{"0":315,"1":106},"flags":{},"order":0,"mode":0,"inputs":[{"name":"lora","type":"PEFTLORA","link":null,"label":"LoRA"}],"outputs":[{"name":"florence2_model","type":"FL2MODEL","links":[2191],"slot_index":0,"shape":3,"label":"Florence2"}],"properties":{"Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["microsoft/Florence-2-large-ft","fp16","sdpa"]},{"id":931,"type":"DownloadAndLoadSAM2Model","pos":{"0":-5410,"1":640},"size":{"0":351.7801513671875,"1":130},"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"sam2_model","type":"SAM2MODEL","links":[2193],"slot_index":0,"shape":3,"label":"SAM2"}],"properties":{"Node name for S&R":"DownloadAndLoadSAM2Model"},"widgets_values":["sam2_hiera_base_plus.safetensors","single_image","cuda","bf16"]},{"id":924,"type":"Florence2Run","pos":{"0":-5020,"1":420},"size":{"0":400,"1":357},"flags":{},"order":10,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2370,"label":"图像"},{"name":"florence2_model","type":"FL2MODEL","link":2191,"label":"Florence2"}],"outputs":[{"name":"image","type":"IMAGE","links":null,"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"遮罩"},{"name":"caption","type":"STRING","links":null,"shape":3,"label":"caption"},{"name":"data","type":"JSON","links":[2192],"slot_index":3,"shape":3,"label":"json数据"}],"properties":{"Node name for S&R":"Florence2Run"},"widgets_values":["body","caption_to_phrase_grounding",true,false,1024,3,true,"",600852300784592,"randomize",true]},{"id":929,"type":"Florence2toCoordinates","pos":{"0":-4570,"1":390},"size":{"0":210,"1":102},"flags":{},"order":18,"mode":0,"inputs":[{"name":"data","type":"JSON","link":2192,"label":"数据"}],"outputs":[{"name":"coordinates","type":"STRING","links":[2194],"slot_index":0,"shape":3,"label":"coordinates"},{"name":"bboxes","type":"BBOX","links":[2195],"slot_index":1,"shape":3,"label":"BBox"}],"properties":{"Node name for S&R":"Florence2toCoordinates"},"widgets_values":["0",false]},{"id":930,"type":"Sam2Segmentation","pos":{"0":-4590,"1":590},"size":{"0":314.5386047363281,"1":182},"flags":{},"order":26,"mode":0,"inputs":[{"name":"sam2_model","type":"SAM2MODEL","link":2193,"label":"SAM2"},{"name":"image","type":"IMAGE","link":2371,"label":"图像"},{"name":"bboxes","type":"BBOX","link":2195,"label":"BBox"},{"name":"coordinates_positive","type":"STRING","link":2194,"widget":{"name":"coordinates_positive"},"label":"正面坐标"},{"name":"coordinates_negative","type":"STRING","link":null,"widget":{"name":"coordinates_negative"},"label":"负面坐标"},{"name":"coordinates_negative","type":"STRING","link":null,"widget":{"name":"coordinates_negative"},"label":"负面坐标"}],"outputs":[{"name":"mask","type":"MASK","links":[2197,2202],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"Sam2Segmentation"},"widgets_values":[false,"","",false]},{"id":1015,"type":"LoadImage","pos":{"0":-7350,"1":-1220},"size":[320,310],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2377],"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["4321727062322_.pic.jpg","image"]},{"id":1012,"type":"ImageResize+","pos":{"0":-6520,"1":-1140},"size":{"0":320,"1":220},"flags":{},"order":3,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2377,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2375],"slot_index":0,"shape":3,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[768,1024,"nearest","fill / crop","always",0]},{"id":1017,"type":"Save Image To OSS And Display","pos":{"0":-4790,"1":-2620},"size":{"0":315,"1":82},"flags":{},"order":55,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2380,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["mask","JPEG"]},{"id":1019,"type":"Save Image To OSS And Display","pos":{"0":-3800,"1":-2620},"size":{"0":315,"1":82},"flags":{},"order":37,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2382,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["openpose","JPEG"]},{"id":1020,"type":"Save Image To OSS And Display","pos":{"0":-3300,"1":-2620},"size":{"0":315,"1":82},"flags":{},"order":66,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2383,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["canny","JPEG"]},{"id":1021,"type":"Save Image To OSS And Display","pos":{"0":-2700,"1":-2620},"size":{"0":315,"1":82},"flags":{},"order":67,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2384,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["depth","JPEG"]},{"id":1016,"type":"Save Image To OSS And Display","pos":{"0":-5230,"1":-2620},"size":{"0":315,"1":82},"flags":{},"order":11,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2379,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["pose","JPEG"]},{"id":1022,"type":"Save Image To OSS And Display","pos":{"0":-5240,"1":-2250},"size":{"0":315,"1":82},"flags":{},"order":46,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2385,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["mask_face","JPEG"]},{"id":1023,"type":"Save Image To OSS And Display","pos":{"0":-4630,"1":-2250},"size":{"0":315,"1":82},"flags":{},"order":33,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2386,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["mask_cloth","JPEG"]},{"id":1018,"type":"Save Image To OSS And Display","pos":{"0":-4270,"1":-2620},"size":{"0":315,"1":82},"flags":{},"order":61,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2381,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["mask_blur","JPEG"]},{"id":1024,"type":"Save Image To OSS And Display","pos":{"0":-4150,"1":-2250},"size":{"0":315,"1":82},"flags":{},"order":47,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2387,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["mask_body","JPEG"]}],"links":[[1684,761,0,755,0,"IMAGE"],[1687,760,0,758,0,"IMAGE"],[1688,767,0,758,1,"IMAGE"],[1690,787,0,760,0,"IMAGE"],[1691,755,0,760,1,"INT"],[1692,755,1,760,2,"INT"],[1694,772,0,762,0,"*"],[1697,761,0,766,0,"*"],[1698,762,0,767,0,"IMAGE"],[1699,764,0,767,1,"IMAGE"],[1700,766,0,768,0,"IMAGE"],[1705,771,0,772,0,"MASK"],[1709,784,0,775,0,"*"],[1710,778,0,776,0,"*"],[1712,758,0,778,0,"IMAGE"],[1713,779,0,778,1,"IMAGE"],[1714,762,0,779,0,"IMAGE"],[1717,782,0,781,0,"IMAGE"],[1718,767,0,781,1,"IMAGE"],[1719,768,0,782,0,"IMAGE"],[1720,755,0,782,1,"INT"],[1721,755,1,782,2,"INT"],[1722,781,0,784,0,"IMAGE"],[1723,779,0,784,1,"IMAGE"],[1728,766,0,787,0,"IMAGE"],[1742,755,0,771,0,"INT"],[1743,755,1,771,1,"INT"],[1867,755,0,787,1,"INT"],[1868,755,0,768,1,"INT"],[1877,766,0,832,0,"IMAGE"],[1880,755,0,832,1,"INT"],[2191,928,0,924,1,"FL2MODEL"],[2192,924,3,929,0,"JSON"],[2193,931,0,930,0,"SAM2MODEL"],[2194,929,0,930,3,"STRING"],[2195,929,1,930,2,"BBOX"],[2197,930,0,932,0,"MASK"],[2201,922,5,935,0,"IMAGE"],[2202,930,0,936,0,"MASK"],[2203,935,0,936,1,"MASK"],[2216,943,0,907,0,"MASK"],[2218,907,0,944,0,"*"],[2219,944,0,779,1,"IMAGE"],[2224,907,0,946,0,"*"],[2225,922,5,947,0,"*"],[2227,932,0,949,0,"*"],[2232,948,0,764,0,"*"],[2243,762,0,950,0,"IMAGE"],[2244,764,0,950,1,"IMAGE"],[2246,903,1,952,0,"MASK"],[2247,952,0,943,0,"MASK"],[2251,955,0,956,0,"MASK"],[2252,935,0,956,1,"MASK"],[2253,956,0,957,0,"MASK"],[2254,936,0,957,1,"MASK"],[2256,953,1,958,0,"MASK"],[2257,958,0,955,0,"MASK"],[2261,948,0,962,0,"*"],[2262,950,0,963,0,"*"],[2263,832,0,964,0,"*"],[2264,776,0,965,0,"*"],[2265,775,0,966,0,"*"],[2266,946,0,967,0,"*"],[2267,947,0,968,0,"*"],[2268,949,0,969,0,"*"],[2343,937,0,1006,0,"IMAGE"],[2344,1006,0,948,0,"*"],[2345,957,0,1007,0,"MASK"],[2346,1007,0,937,0,"MASK"],[2365,1011,0,961,0,"*"],[2366,1011,0,761,0,"*"],[2367,1011,0,903,0,"IMAGE"],[2368,1011,0,953,0,"IMAGE"],[2369,1011,0,922,0,"IMAGE"],[2370,1011,0,924,0,"IMAGE"],[2371,1011,0,930,1,"IMAGE"],[2375,1012,0,1011,0,"*"],[2377,1015,0,1012,0,"IMAGE"],[2379,961,0,1016,0,"IMAGE"],[2380,962,0,1017,0,"IMAGE"],[2381,963,0,1018,0,"IMAGE"],[2382,964,0,1019,0,"IMAGE"],[2383,965,0,1020,0,"IMAGE"],[2384,966,0,1021,0,"IMAGE"],[2385,967,0,1022,0,"IMAGE"],[2386,968,0,1023,0,"IMAGE"],[2387,969,0,1024,0,"IMAGE"]],"groups":[{"title":"ControlNet图像预处理","bounding":[-3250,-530,1698,940],"color":"#3f789e","font_size":24,"flags":{}},{"title":"mask","bounding":[-3210,-1090,1693,422],"color":"#3f789e","font_size":24,"flags":{}},{"title":"人体mask","bounding":[-5530,-1110,1800,1950],"color":"#3f789e","font_size":24,"flags":{}},{"title":"模板预处理结果","bounding":[-5530,-2960,3950,1600],"color":"#8A8","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.37190082644628336,"offset":[6303.529086820588,3327.569174954452]},"groupNodes":{"controlnet":{"nodes":[{"type":"SetUnionControlNetType","pos":[-1690,-80],"size":{"0":315,"1":58},"flags":{},"order":8,"mode":0,"inputs":[{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[],"shape":3,"label":"ControlNet","slot_index":0}],"properties":{"Node name for S&R":"SetUnionControlNetType"},"widgets_values":["auto"],"index":0},{"type":"ControlNetApplyAdvanced","pos":[-1670,-300],"size":{"0":315,"1":166},"flags":{},"order":14,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":null,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":null,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":null,"label":"图像"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":null,"shape":3,"label":"正面条件","slot_index":0},{"name":"negative","type":"CONDITIONING","links":null,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[1,0,1],"index":1}],"links":[[0,0,1,2,855,"CONTROL_NET"]],"external":[]}},"workspace_info":{"id":"Fj80Zqhxp0vHmxE9F7V4i","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}