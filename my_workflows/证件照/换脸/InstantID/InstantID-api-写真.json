{"last_node_id":867,"last_link_id":1959,"nodes":[{"id":791,"type":"Reroute","pos":[-2386.2750879296327,-217.353043312492],"size":[82,26],"flags":{},"order":13,"mode":0,"inputs":[{"name":"","type":"*","link":1956}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1753],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":790,"type":"Reroute","pos":[-2386.2750879296327,-267.35304331249193],"size":[82,26],"flags":{},"order":12,"mode":0,"inputs":[{"name":"","type":"*","link":1955}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1752],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":611,"type":"Reroute","pos":[-2386.2750879296327,-437.3530433124917],"size":[75,26],"flags":{},"order":17,"mode":0,"inputs":[{"name":"","type":"*","link":1954,"slot_index":0}],"outputs":[{"name":"MASK","type":"MASK","links":[1746],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":623,"type":"List of strings [Crystools]","pos":[-1589.233802393611,67.33004588021734],"size":{"0":320,"1":270},"flags":{},"order":15,"mode":0,"inputs":[{"name":"string_1","type":"STRING","link":1859,"widget":{"name":"string_1"},"label":"字符串_1","slot_index":0},{"name":"string_2","type":"STRING","link":1792,"widget":{"name":"string_2"},"label":"字符串_2"},{"name":"string_3","type":"STRING","link":null,"widget":{"name":"string_3"},"label":"字符串_3"}],"outputs":[{"name":"concatenated","type":"STRING","links":[1215],"shape":3,"label":"字符串合并","slot_index":0},{"name":"list_string","type":"ListString","links":null,"shape":6,"label":"字符串列表"}],"properties":{"Node name for S&R":"List of strings [Crystools]"},"widgets_values":["","","","","","","","",","]},{"id":619,"type":"Reroute","pos":[714.9245471001585,-462.8396547619077],"size":[75,26],"flags":{},"order":25,"mode":0,"inputs":[{"name":"","type":"*","link":1749}],"outputs":[{"name":"","type":"IMAGE","links":[1895],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":850,"type":"Reroute","pos":[-773.4065184046666,343.81935244908396],"size":[75,26],"flags":{},"order":19,"mode":0,"inputs":[{"name":"","type":"*","link":1916}],"outputs":[{"name":"","type":"IMAGE","links":[1907],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":847,"type":"InstantIDModelLoader","pos":[-523.4065184046668,813.8193524490841],"size":{"0":315,"1":58},"flags":{},"order":0,"mode":0,"outputs":[{"name":"INSTANTID","type":"INSTANTID","links":[1902],"shape":3}],"properties":{"Node name for S&R":"InstantIDModelLoader"},"widgets_values":["ip-adapter_instant_id_sdxl.bin"]},{"id":848,"type":"InstantIDFaceAnalysis","pos":[-73.40651840466734,813.8193524490841],"size":{"0":315,"1":58},"flags":{},"order":1,"mode":0,"outputs":[{"name":"FACEANALYSIS","type":"FACEANALYSIS","links":[1903],"shape":3,"label":"面部分析"}],"properties":{"Node name for S&R":"InstantIDFaceAnalysis"},"widgets_values":["CUDA"]},{"id":849,"type":"ControlNetLoader","pos":[316.59348159533226,813.8193524490841],"size":{"0":315,"1":58},"flags":{},"order":2,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[1904],"shape":3,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["control_instant_id_sdxl.safetensors"]},{"id":603,"type":"Reroute","pos":[-2390,-490],"size":[82,26],"flags":{},"order":16,"mode":0,"inputs":[{"name":"","type":"*","link":1952}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1738,1916],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":730,"type":"PerturbedAttentionGuidance","pos":[-100,-70],"size":{"0":315,"1":58},"flags":{},"order":22,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1929,"label":"模型"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1930],"shape":3,"label":"模型","slot_index":0}],"properties":{"Node name for S&R":"PerturbedAttentionGuidance"},"widgets_values":[3]},{"id":631,"type":"KSampler (Efficient)","pos":[280,-430],"size":[330,560],"flags":{},"order":24,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1930,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":1431,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":1432,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":1951,"label":"Latent"},{"name":"optional_vae","type":"VAE","link":1239,"label":"VAE(可选)"},{"name":"script","type":"SCRIPT","link":null,"label":"脚本","slot_index":5}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"shape":3,"label":"模型","slot_index":0},{"name":"CONDITIONING+","type":"CONDITIONING","links":[],"shape":3,"label":"正面条件","slot_index":1},{"name":"CONDITIONING-","type":"CONDITIONING","links":[],"shape":3,"label":"负面条件","slot_index":2},{"name":"LATENT","type":"LATENT","links":[],"shape":3,"label":"Latent","slot_index":3},{"name":"VAE","type":"VAE","links":[],"shape":3,"label":"VAE","slot_index":4},{"name":"IMAGE","type":"IMAGE","links":[1749],"shape":3,"label":"图像","slot_index":5}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[-1,null,10,2,"dpmpp_sde","karras",0.8,"auto","true (tiled)"],"color":"#222233","bgcolor":"#333355","shape":1},{"id":350,"type":"Efficient Loader","pos":[-600,-420],"size":{"0":370,"1":470},"flags":{},"order":20,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"label":"LoRA堆","slot_index":0},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":636,"label":"ControlNet堆","slot_index":1},{"name":"positive","type":"STRING","link":1215,"widget":{"name":"positive"},"label":"正面条件"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1950],"shape":3,"label":"模型","slot_index":0},{"name":"CONDITIONING+","type":"CONDITIONING","links":[1909],"shape":3,"label":"正面条件","slot_index":1},{"name":"CONDITIONING-","type":"CONDITIONING","links":[1910],"shape":3,"label":"负面条件","slot_index":2},{"name":"LATENT","type":"LATENT","links":[],"shape":3,"label":"Latent","slot_index":3},{"name":"VAE","type":"VAE","links":[1228,1239],"shape":3,"label":"VAE","slot_index":4},{"name":"CLIP","type":"CLIP","links":[],"shape":3,"label":"CLIP","slot_index":5},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":[],"shape":3,"label":"依赖","slot_index":6}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["sdxl/dreamshaperXL_v21TurboDPMSDE.safetensors","Baked VAE",-2,"None",1.3,1,"a female,vividly,skin_texture,Vivid,light and shadow of details, beautiful face,headshot,,best quality,highres,bright,Ultra clear details","embedding:negativeXL_D.safetensors, NSFW, worst quality, normal quality, low quality, low res, blurry, text, watermark, logo, banner, extra digits, cropped, jpeg artifacts, signature, username, error, sketch, duplicate, ugly, monochrome, horror, geometry, mutation, disgusting SS","mean","comfy",512,512,1],"color":"#332233","bgcolor":"#553355","shape":1},{"id":632,"type":"INPAINT_VAEEncodeInpaintConditioning","pos":[-100,-250],"size":{"0":292.20001220703125,"1":106},"flags":{},"order":23,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":1913,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":1914,"label":"负面条件"},{"name":"vae","type":"VAE","link":1228,"label":"VAE"},{"name":"pixels","type":"IMAGE","link":1738,"label":"图像"},{"name":"mask","type":"MASK","link":1746,"label":"遮罩"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1431],"shape":3,"label":"正面条件","slot_index":0},{"name":"negative","type":"CONDITIONING","links":[1432],"shape":3,"label":"负面条件","slot_index":1},{"name":"latent_inpaint","type":"LATENT","links":[],"shape":3,"label":"局部重绘Latent","slot_index":2},{"name":"latent_samples","type":"LATENT","links":[1951],"shape":3,"label":"采样Latent","slot_index":3}],"properties":{"Node name for S&R":"INPAINT_VAEEncodeInpaintConditioning"}},{"id":446,"type":"CR Multi-ControlNet Stack","pos":[-2139.233802393611,-372.66995411978263],"size":{"0":418.1999816894531,"1":454},"flags":{},"order":18,"mode":0,"inputs":[{"name":"image_1","type":"IMAGE","link":1752,"label":"图像1"},{"name":"image_2","type":"IMAGE","link":1753,"label":"图像2"},{"name":"image_3","type":"IMAGE","link":1882,"label":"图像3"},{"name":"controlnet_stack","type":"CONTROL_NET_STACK","link":null,"label":"ControlNet堆","slot_index":3}],"outputs":[{"name":"CONTROLNET_STACK","type":"CONTROL_NET_STACK","links":[636],"shape":3,"label":"ControlNet堆","slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"CR Multi-ControlNet Stack"},"widgets_values":["On","controlnet-union-sdxl-1.0.safetensors",0.2,0,1,"On","controlnet-union-sdxl-1.0.safetensors",0.2,0,1,"On","controlnet-union-sdxl-1.0.safetensors",0.2,0,1]},{"id":846,"type":"ApplyInstantIDAdvanced","pos":[-80,370],"size":{"0":315,"1":338},"flags":{},"order":21,"mode":0,"inputs":[{"name":"instantid","type":"INSTANTID","link":1902,"label":"InstantID","slot_index":0},{"name":"insightface","type":"FACEANALYSIS","link":1903,"label":"InsightFace","slot_index":1},{"name":"control_net","type":"CONTROL_NET","link":1904,"label":"ControlNet","slot_index":2},{"name":"image","type":"IMAGE","link":1958,"label":"图像"},{"name":"model","type":"MODEL","link":1950,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":1909,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":1910,"label":"负面条件"},{"name":"image_kps","type":"IMAGE","link":1907,"label":"图像_kps"},{"name":"mask","type":"MASK","link":null,"label":"遮罩"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1929],"shape":3,"label":"模型","slot_index":0},{"name":"positive","type":"CONDITIONING","links":[1913],"shape":3,"label":"正面条件","slot_index":1},{"name":"negative","type":"CONDITIONING","links":[1914],"shape":3,"label":"负面条件","slot_index":2}],"properties":{"Node name for S&R":"ApplyInstantIDAdvanced"},"widgets_values":[0.8,0.8,0,1,0.1,"average"]},{"id":865,"type":"ImageToMask","pos":[-2840,-380],"size":{"0":315,"1":58},"flags":{},"order":11,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1953,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[1954],"shape":3,"label":"遮罩","slot_index":0}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":834,"type":"Reroute","pos":[-2380,-160],"size":[82,26],"flags":{},"order":14,"mode":0,"inputs":[{"name":"","type":"*","link":1957}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1882],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":625,"type":"Primitive string multiline [Crystools]","pos":[-2120,340],"size":{"0":390,"1":140},"flags":{},"order":7,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[1792],"shape":3,"label":"字符串","slot_index":0}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["Bare skin,detailed skin texture,ultra-realistic skin details,best quality,masterpiece,photorealistic,realisticS"]},{"id":624,"type":"Primitive string multiline [Crystools]","pos":[-2120,140],"size":{"0":380,"1":130},"flags":{},"order":8,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[1859],"shape":3,"label":"字符串","slot_index":0}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["looking_at_viewer"]},{"id":867,"type":"Save Image To OSS And Display","pos":[1290,-460],"size":{"0":315,"1":58},"flags":{},"order":27,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1959,"label":"images"}],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["comfyui"]},{"id":844,"type":"ReActorRestoreFace","pos":[910,-470],"size":{"0":315,"1":130},"flags":{},"order":26,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1895,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1959],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ReActorRestoreFace"},"widgets_values":["retinaface_resnet50","codeformer-v0.1.0.pth",1,0.5]},{"id":866,"type":"Load Image From Url","pos":[-1660,-800],"size":{"0":400,"1":200},"flags":{},"order":10,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1958],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["face"]},{"id":860,"type":"Load Image From Url","pos":[-3290,-720],"size":{"0":400,"1":200},"flags":{},"order":9,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1952],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["pose"]},{"id":861,"type":"Load Image From Url","pos":[-3300,-460],"size":{"0":400,"1":200},"flags":{},"order":3,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1953],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["mask"]},{"id":862,"type":"Load Image From Url","pos":[-3290,-190],"size":{"0":400,"1":200},"flags":{},"order":4,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1955],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["canny"]},{"id":863,"type":"Load Image From Url","pos":[-3290,80],"size":{"0":400,"1":200},"flags":{},"order":5,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1956],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["depth"]},{"id":864,"type":"Load Image From Url","pos":[-3280,350],"size":{"0":400,"1":200},"flags":{},"order":6,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1957],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["openposeS"]}],"links":[[636,446,0,350,1,"CONTROL_NET_STACK"],[1215,623,0,350,2,"STRING"],[1228,350,4,632,2,"VAE"],[1239,350,4,631,4,"VAE"],[1431,632,0,631,1,"CONDITIONING"],[1432,632,1,631,2,"CONDITIONING"],[1738,603,0,632,3,"IMAGE"],[1746,611,0,632,4,"MASK"],[1749,631,5,619,0,"*"],[1752,790,0,446,0,"IMAGE"],[1753,791,0,446,1,"IMAGE"],[1792,625,0,623,1,"STRING"],[1859,624,0,623,0,"STRING"],[1882,834,0,446,2,"IMAGE"],[1895,619,0,844,0,"IMAGE"],[1902,847,0,846,0,"INSTANTID"],[1903,848,0,846,1,"FACEANALYSIS"],[1904,849,0,846,2,"CONTROL_NET"],[1907,850,0,846,7,"IMAGE"],[1909,350,1,846,5,"CONDITIONING"],[1910,350,2,846,6,"CONDITIONING"],[1913,846,1,632,0,"CONDITIONING"],[1914,846,2,632,1,"CONDITIONING"],[1916,603,0,850,0,"*"],[1929,846,0,730,0,"MODEL"],[1930,730,0,631,0,"MODEL"],[1950,350,0,846,4,"MODEL"],[1951,632,3,631,3,"LATENT"],[1952,860,0,603,0,"*"],[1953,861,0,865,0,"IMAGE"],[1954,865,0,611,0,"*"],[1955,862,0,790,0,"*"],[1956,863,0,791,0,"*"],[1957,864,0,834,0,"*"],[1958,866,0,846,3,"IMAGE"],[1959,844,0,867,0,"IMAGE"]],"groups":[{"title":"step1-inpaint","bounding":[-724,-527,1489,745],"color":"#3f789e","font_size":24,"locked":false},{"title":"输入条件","bounding":[-2350,-544,1109,1425],"color":"#3f789e","font_size":24,"locked":false},{"title":"InstantID","bounding":[-727,262,1492,695],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{"ds":{"scale":0.45949729863572253,"offset":{"0":1597.0557710695348,"1":783.7523242299304}},"groupNodes":{},"workspace_info":{"id":"5OUbc3WHIlJQzK8esJE0P","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}