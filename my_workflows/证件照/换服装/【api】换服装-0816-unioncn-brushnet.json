{"last_node_id":1281,"last_link_id":3328,"nodes":[{"id":37,"type":"String Literal","pos":[-4370,-2030],"size":{"0":391.5850524902344,"1":152.6741180419922},"flags":{},"order":4,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[3095],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"String Literal"},"widgets_values":["cloth",true]},{"id":218,"type":"AIO_Preprocessor","pos":[-2850,760],"size":{"0":320,"1":80},"flags":{},"order":37,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1902,"label":"图像"},{"name":"resolution","type":"INT","link":2543,"widget":{"name":"resolution"},"label":"分辨率"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[429],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["DepthAnythingV2Preprocessor",768]},{"id":219,"type":"Reroute","pos":[-4440,-1270],"size":[75,26],"flags":{},"order":11,"mode":0,"inputs":[{"name":"","type":"*","link":3322,"slot_index":0,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[3074],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":223,"type":"ImageCompositedMaskedWeight","pos":[-1970,800],"size":{"0":315,"1":78},"flags":{},"order":51,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":1996,"label":"source"},{"name":"mask","type":"IMAGE","link":2868,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3252],"slot_index":0,"shape":3,"label":"IMAGE"}],"title":"depth","properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[0.1]},{"id":228,"type":"ImageResize+","pos":[-2430,740],"size":{"0":315,"1":218},"flags":{"collapsed":false},"order":42,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":429,"label":"图像"},{"name":"width","type":"INT","link":1657,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":1658,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1996],"slot_index":0,"shape":3,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[768,1024,"nearest","stretch","always",0]},{"id":248,"type":"Reroute","pos":[-1400,-620],"size":[82,26],"flags":{},"order":45,"mode":0,"inputs":[{"name":"","type":"*","link":3125,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3303,3307],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":249,"type":"Reroute","pos":[-1410,-330],"size":[75,26],"flags":{},"order":50,"mode":0,"inputs":[{"name":"","type":"*","link":2219,"label":""}],"outputs":[{"name":"MASK","type":"MASK","links":[3147,3312],"slot_index":0,"label":"MASK"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":250,"type":"Reroute","pos":[-1390,-540],"size":[75,26],"flags":{},"order":13,"mode":0,"inputs":[{"name":"","type":"*","link":1617,"slot_index":0,"label":""}],"outputs":[{"name":"","type":"LORA_STACK","links":[3126],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":254,"type":"Reroute","pos":[-1410,-470],"size":[90.4,26],"flags":{},"order":14,"mode":0,"inputs":[{"name":"","type":"*","link":2088,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"STRING","type":"STRING","links":[3128],"slot_index":0,"label":"STRING"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":263,"type":"CR LoRA Stack","pos":[-3840,-2250],"size":{"0":394.4184265136719,"1":342},"flags":{},"order":0,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"label":"LoRA堆"}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[1581],"slot_index":0,"shape":3,"label":"LORA_STACK"},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR LoRA Stack"},"widgets_values":["On","snapmecloth/0702/webulora/Gray-suit.safetensors",1,1,"Off","None",1,1,"Off","None",0.8,1]},{"id":277,"type":"Reroute","pos":[-1660,-580],"size":[75,26],"flags":{},"order":48,"mode":0,"inputs":[{"name":"","type":"*","link":1796,"label":""}],"outputs":[{"name":"MASK","type":"MASK","links":[2219],"slot_index":0,"label":"MASK"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":280,"type":"Reroute","pos":[-2970,-530],"size":[82,26],"flags":{},"order":33,"mode":0,"inputs":[{"name":"","type":"*","link":3029,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3284],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":288,"type":"Reroute","pos":[-3360,-1560],"size":[90.4,26],"flags":{},"order":9,"mode":0,"inputs":[{"name":"","type":"*","link":3095,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"STRING","type":"STRING","links":[2088],"slot_index":0,"label":"STRING"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":301,"type":"Reroute","pos":[-2990,510],"size":[82,26],"flags":{},"order":31,"mode":0,"inputs":[{"name":"","type":"*","link":3202,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1902,3182],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":302,"type":"Reroute","pos":[-2990,660],"size":[75,26],"flags":{},"order":29,"mode":0,"inputs":[{"name":"","type":"*","link":1665,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"INT","type":"INT","links":[579,1657,2542,2543],"slot_index":0,"label":"INT"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":303,"type":"Reroute","pos":[-2990,730],"size":[75,26],"flags":{},"order":30,"mode":0,"inputs":[{"name":"","type":"*","link":1666,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"INT","type":"INT","links":[580,1658],"slot_index":0,"label":"INT"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":304,"type":"Reroute","pos":[-4180,420],"size":[82,26],"flags":{},"order":32,"mode":0,"inputs":[{"name":"","type":"*","link":2334,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2861],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":307,"type":"ImageResize+","pos":[-2440,460],"size":{"0":315,"1":218},"flags":{"collapsed":false},"order":43,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2022,"label":"图像"},{"name":"width","type":"INT","link":579,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":580,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3049],"slot_index":0,"shape":3,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[768,1024,"nearest","stretch","always",0]},{"id":322,"type":"Reroute","pos":[-3330,-860],"size":[75,26],"flags":{},"order":18,"mode":0,"inputs":[{"name":"","type":"*","link":3258,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[3202],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":333,"type":"Get resolution [Crystools]","pos":[-4270,-1000],"size":{"0":210,"1":100},"flags":{"collapsed":false},"order":17,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2555,"label":"图像"}],"outputs":[{"name":"width","type":"INT","links":[1665],"slot_index":0,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":[1666],"slot_index":1,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"Get resolution [Crystools]"}},{"id":362,"type":"Reroute","pos":[-3330,-970],"size":[75,26],"flags":{},"order":25,"mode":0,"inputs":[{"name":"","type":"*","link":2563,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"INT","type":"INT","links":[3327],"slot_index":0,"label":"INT"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":367,"type":"Reroute","pos":[-3330,-1280],"size":[82,26],"flags":{},"order":19,"mode":0,"inputs":[{"name":"","type":"*","link":2556,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":368,"type":"Reroute","pos":[-3330,-1230],"size":[82,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":2557,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2334],"slot_index":0,"label":""}],"properties":{"showOutputText":true,"horizontal":false}},{"id":555,"type":"String Literal","pos":[-4380,-1760],"size":{"0":400,"1":200},"flags":{},"order":5,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[1326],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"String Literal"},"widgets_values":["negative",true]},{"id":556,"type":"Reroute","pos":[-1410,-410],"size":[90.4,26],"flags":{},"order":10,"mode":0,"inputs":[{"name":"","type":"*","link":1326,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"STRING","type":"STRING","links":[3129],"slot_index":0,"label":"STRING"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":690,"type":"Reroute","pos":[-3370,-1630],"size":[124,26],"flags":{},"order":8,"mode":0,"inputs":[{"name":"","type":"*","link":1581,"label":""}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[1617],"slot_index":0,"label":"LORA_STACK"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":693,"type":"Reroute","pos":[480,-590],"size":[75,26],"flags":{},"order":61,"mode":0,"inputs":[{"name":"","type":"*","link":3217,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[3306],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":772,"type":"ImageToMask","pos":[-2050,-610],"size":{"0":315,"1":58},"flags":{},"order":46,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1906,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[1796],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["blue"]},{"id":807,"type":"ImageBlend","pos":[-2420,-620],"size":{"0":315,"1":102},"flags":{},"order":41,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":3283,"label":"图像1"},{"name":"image2","type":"IMAGE","link":3284,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1906],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageBlend"},"widgets_values":[1,"difference"]},{"id":844,"type":"AIO_Preprocessor","pos":[-2840,470],"size":{"0":320,"1":80},"flags":{},"order":38,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3182,"label":"图像"},{"name":"resolution","type":"INT","link":2542,"widget":{"name":"resolution"},"label":"分辨率"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2022],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["AnyLineArtPreprocessor_aux",768]},{"id":884,"type":"Reroute","pos":[-2960,-610],"size":[75,26],"flags":{},"order":35,"mode":0,"inputs":[{"name":"","type":"*","link":3260,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[3283],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":890,"type":"Reroute","pos":[-3330,-1080],"size":[82,26],"flags":{},"order":23,"mode":0,"inputs":[{"name":"","type":"*","link":2560,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3257,3260],"slot_index":0,"label":""}],"properties":{"showOutputText":true,"horizontal":false}},{"id":947,"type":"Reroute","pos":[-3330,-1180],"size":[82,26],"flags":{},"order":21,"mode":0,"inputs":[{"name":"","type":"*","link":2558}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":948,"type":"Reroute","pos":[-3330,-1130],"size":[82,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":3027}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3029],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":949,"type":"Reroute","pos":[-3340,-930],"size":[98.8,26],"flags":{},"order":26,"mode":0,"inputs":[{"name":"","type":"*","link":2565}],"outputs":[{"name":"BOOLEAN","type":"BOOLEAN","links":[],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1013,"type":"Reroute","pos":[-3000,810],"size":[75,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":2566}],"outputs":[{"name":"","type":"IMAGE","links":[],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":1018,"type":"AliSegBodyHeadFace","pos":[-3890,-1270],"size":{"0":315,"1":286},"flags":{},"order":15,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3074,"label":"images"},{"name":"bodys","type":"IMAGE","link":null,"label":"bodys"},{"name":"prompt_cloth","type":"STRING","link":3098,"widget":{"name":"prompt_cloth"},"label":"prompt_cloth"},{"name":"prompt_background","type":"STRING","link":3097,"widget":{"name":"prompt_background"},"label":"prompt_background"}],"outputs":[{"name":"原图","type":"IMAGE","links":[2555,3258],"slot_index":0,"shape":3,"label":"原图"},{"name":"head_gray","type":"IMAGE","links":[2556],"shape":3,"label":"head_gray"},{"name":"head_mask","type":"IMAGE","links":[2557],"slot_index":2,"shape":3,"label":"head_mask"},{"name":"hair_mask","type":"IMAGE","links":[2558],"slot_index":3,"shape":3,"label":"hair_mask"},{"name":"face_mask","type":"IMAGE","links":[3027],"slot_index":4,"shape":3,"label":"face_mask"},{"name":"人体mask","type":"IMAGE","links":[2560],"shape":3,"label":"人体mask"},{"name":"cloth_mask","type":"IMAGE","links":[2939],"slot_index":6,"shape":3,"label":"cloth_mask"},{"name":"动态膨胀系数","type":"INT","links":[2563],"shape":3,"label":"动态膨胀系数"},{"name":"头发是否过肩膀","type":"BOOLEAN","links":[2565],"shape":3,"label":"头发是否过肩膀"},{"name":"openpose","type":"IMAGE","links":[2566],"shape":3,"label":"openpose"}],"properties":{"Node name for S&R":"AliSegBodyHeadFace"},"widgets_values":["","",false]},{"id":1101,"type":"Reroute","pos":[-550,-620],"size":[75,26],"flags":{},"order":28,"mode":0,"inputs":[{"name":"","type":"*","link":3205}],"outputs":[{"name":"VAE","type":"VAE","links":[3135,3145],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1104,"type":"ImageToMask","pos":[-3890,480],"size":{"0":315,"1":58},"flags":{},"order":39,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2861,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[2862],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":1105,"type":"ImpactDilateMask","pos":[-3550,480],"size":{"0":315,"1":58},"flags":{},"order":44,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2862,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2863],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImpactDilateMask"},"widgets_values":[5]},{"id":1106,"type":"MaskToImage","pos":[-3450,600],"size":{"0":210,"1":26},"flags":{},"order":47,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2863,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2866],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":1107,"type":"Reroute","pos":[-2990,590],"size":[75,26],"flags":{},"order":49,"mode":0,"inputs":[{"name":"","type":"*","link":2866}],"outputs":[{"name":"","type":"IMAGE","links":[2868,3050],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":1132,"type":"Get resolution [Crystools]","pos":[-2750,-1000],"size":{"0":210,"1":100},"flags":{"collapsed":false},"order":34,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3257,"label":"图像"}],"outputs":[{"name":"width","type":"INT","links":[3123],"slot_index":0,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":[3124],"slot_index":1,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"Get resolution [Crystools]"}},{"id":1149,"type":"Reroute","pos":[-3330,-1020],"size":[75,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":2939}],"outputs":[{"name":"","type":"IMAGE","links":[],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":1189,"type":"ImageCompositedMaskedWeight","pos":[-1990,470],"size":{"0":315,"1":78},"flags":{},"order":52,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":3049,"label":"source"},{"name":"mask","type":"IMAGE","link":3050,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3234],"slot_index":0,"shape":3,"label":"IMAGE"}],"title":"edge","properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[0.1]},{"id":1219,"type":"Primitive string [Crystools]","pos":[-4310,-1280],"size":{"0":315,"1":58},"flags":{},"order":6,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[3098],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string [Crystools]"},"widgets_values":["disable"]},{"id":1220,"type":"Primitive string [Crystools]","pos":[-4310,-1170],"size":{"0":315,"1":58},"flags":{},"order":1,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[3097],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string [Crystools]"},"widgets_values":["240817001"]},{"id":1230,"type":"ImageResize+","pos":[-2200,-1000],"size":{"0":320,"1":220},"flags":{},"order":40,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3323,"label":"图像"},{"name":"width","type":"INT","link":3123,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":3124,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3125],"slot_index":0,"shape":3,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[512,512,"nearest","stretch","always",0]},{"id":1231,"type":"Efficient Loader","pos":[-1120,-490],"size":{"0":400,"1":460},"flags":{},"order":16,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":3126,"label":"LoRA堆"},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":null,"label":"ControlNet堆"},{"name":"positive","type":"STRING","link":3128,"widget":{"name":"positive"},"label":"正面条件"},{"name":"negative","type":"STRING","link":3129,"widget":{"name":"negative"},"label":"负面条件"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[3144],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[3232],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[3233],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":null,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[3205],"slot_index":4,"shape":3,"label":"VAE"},{"name":"CLIP","type":"CLIP","links":null,"shape":3,"label":"CLIP"},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":null,"shape":3,"label":"依赖"}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["sdxl/realvisxlV40_v40Bakedvae.safetensors","Baked VAE",-1,"None",1,1,"CLIP_POSITIVE","CLIP_NEGATIVE","none","comfy",512,512,1,true,true],"color":"#222233","bgcolor":"#333355","shape":1},{"id":1232,"type":"KSampler (Efficient)","pos":[90,-560],"size":[330,560],"flags":{},"order":60,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":3272,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":3273,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":3274,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":3275,"label":"Latent"},{"name":"optional_vae","type":"VAE","link":3135,"label":"VAE(可选)"},{"name":"script","type":"SCRIPT","link":null,"label":"脚本"}],"outputs":[{"name":"MODEL","type":"MODEL","links":null,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":null,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":null,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":null,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":null,"shape":3,"label":"VAE"},{"name":"IMAGE","type":"IMAGE","links":[3217],"slot_index":5,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[924544186701306,null,30,7,"dpmpp_2m_sde","karras",0.8,"none","true"],"color":"#332222","bgcolor":"#553333","shape":1},{"id":1234,"type":"BrushNet","pos":[-420,-420],"size":{"0":315,"1":226},"flags":{},"order":59,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":3144,"label":"模型"},{"name":"vae","type":"VAE","link":3145,"label":"VAE"},{"name":"image","type":"IMAGE","link":3303,"label":"图像"},{"name":"mask","type":"MASK","link":3147,"label":"遮罩"},{"name":"brushnet","type":"BRMODEL","link":3150,"label":"BrushNet"},{"name":"positive","type":"CONDITIONING","link":3242,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":3243,"label":"负面条件"}],"outputs":[{"name":"model","type":"MODEL","links":[3272],"slot_index":0,"shape":3,"label":"模型"},{"name":"positive","type":"CONDITIONING","links":[3273],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[3274],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"latent","type":"LATENT","links":[3275],"slot_index":3,"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"BrushNet"},"widgets_values":[0.6000000000000001,0,10000]},{"id":1235,"type":"BrushNetLoader","pos":[-430,-120],"size":{"0":315,"1":82},"flags":{},"order":2,"mode":0,"outputs":[{"name":"brushnet","type":"BRMODEL","links":[3150],"shape":3,"label":"BrushNet"}],"properties":{"Node name for S&R":"BrushNetLoader"},"widgets_values":["brushnet_xl/segmentation_mask_brushnet_ckpt_v1.safetensors","float16"]},{"id":1248,"type":"ControlNetLoader","pos":[-1450,400],"size":{"0":315,"1":58},"flags":{},"order":3,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[3231,3246],"slot_index":0,"shape":3,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union-sdxl-promax-1.0.safetensors"]},{"id":1257,"type":"workflow/controlnet","pos":[-1460,580],"size":{"0":315,"1":190},"flags":{},"order":54,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":3231,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":3232,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":3233,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":3234,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[3292],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[3293],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnet"},"widgets_values":["canny/lineart/anime_lineart/mlsd",0.2,0,1]},{"id":1259,"type":"Reroute","pos":[-230,350],"size":[140.8,26],"flags":{},"order":57,"mode":0,"inputs":[{"name":"","type":"*","link":3304,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[3242],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1260,"type":"Reroute","pos":[-230,390],"size":[140.8,26],"flags":{},"order":58,"mode":0,"inputs":[{"name":"","type":"*","link":3305,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[3243],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1261,"type":"workflow/controlnet","pos":[-1470,890],"size":{"0":315,"1":190},"flags":{},"order":56,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":3246,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":3292,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":3293,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":3252,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[3304],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[3305],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnet"},"widgets_values":["depth",0.15,0,1]},{"id":1274,"type":"Snapme ImgProcess Step3","pos":[770,-680],"size":[320,260],"flags":{},"order":62,"mode":0,"inputs":[{"name":"image_res_1","type":"IMAGE","link":3306,"label":"image_res_1"},{"name":"face_mask","type":"IMAGE","link":3309,"label":"face_mask"},{"name":"control_mask_face","type":"IMAGE","link":3310,"label":"control_mask_face"},{"name":"face_image_pad","type":"IMAGE","link":3307,"label":"face_image_pad"},{"name":"restore_width","type":"INT","link":3325,"widget":{"name":"restore_width"},"label":"restore_width"},{"name":"restore_height","type":"INT","link":3326,"widget":{"name":"restore_height"},"label":"restore_height"},{"name":"dilate_iter","type":"INT","link":3328,"widget":{"name":"dilate_iter"}}],"outputs":[{"name":"脸部回帖图","type":"IMAGE","links":[3321],"slot_index":0,"shape":3,"label":"脸部回帖图"}],"properties":{"Node name for S&R":"Snapme ImgProcess Step3"},"widgets_values":[0,0,false,0,0,true,false]},{"id":1275,"type":"MaskToImage","pos":[80,-800],"size":{"0":210,"1":26},"flags":{},"order":55,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":3313,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3309,3310],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":1276,"type":"InvertMask","pos":[-250,-810],"size":{"0":210,"1":26},"flags":{},"order":53,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":3312,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[3313],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"InvertMask"}},{"id":1278,"type":"Save Image To OSS And Display","pos":[1210,-680],"size":{"0":315,"1":82},"flags":{},"order":63,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3321,"label":"images"}],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["comfyui","JPEG"]},{"id":1279,"type":"Load Image From Url","pos":[-2370,-1490],"size":{"0":400,"1":200},"flags":{},"order":7,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3322,3323,3324],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["face",true]},{"id":1280,"type":"Get resolution [Crystools]","pos":[320,-890],"size":{"0":210,"1":100},"flags":{"collapsed":false},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3324,"label":"图像"}],"outputs":[{"name":"width","type":"INT","links":[3325],"slot_index":0,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":[3326],"slot_index":1,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"Get resolution [Crystools]"}},{"id":1281,"type":"Reroute","pos":[410,-750],"size":[75,26],"flags":{},"order":36,"mode":0,"inputs":[{"name":"","type":"*","link":3327,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[3328],"slot_index":0}],"title":"Reroute","properties":{"showOutputText":false,"horizontal":false}}],"links":[[429,218,0,228,0,"IMAGE"],[579,302,0,307,1,"INT"],[580,303,0,307,2,"INT"],[1326,555,0,556,0,"*"],[1581,263,0,690,0,"*"],[1617,690,0,250,0,"*"],[1657,302,0,228,1,"INT"],[1658,303,0,228,2,"INT"],[1665,333,0,302,0,"*"],[1666,333,1,303,0,"*"],[1796,772,0,277,0,"*"],[1902,301,0,218,0,"IMAGE"],[1906,807,0,772,0,"IMAGE"],[1996,228,0,223,0,"IMAGE"],[2022,844,0,307,0,"IMAGE"],[2088,288,0,254,0,"*"],[2219,277,0,249,0,"*"],[2334,368,0,304,0,"*"],[2542,302,0,844,1,"INT"],[2543,302,0,218,1,"INT"],[2555,1018,0,333,0,"IMAGE"],[2556,1018,1,367,0,"*"],[2557,1018,2,368,0,"*"],[2558,1018,3,947,0,"*"],[2560,1018,5,890,0,"*"],[2563,1018,7,362,0,"*"],[2565,1018,8,949,0,"*"],[2566,1018,9,1013,0,"*"],[2861,304,0,1104,0,"IMAGE"],[2862,1104,0,1105,0,"MASK"],[2863,1105,0,1106,0,"MASK"],[2866,1106,0,1107,0,"*"],[2868,1107,0,223,1,"IMAGE"],[2939,1018,6,1149,0,"*"],[3027,1018,4,948,0,"*"],[3029,948,0,280,0,"*"],[3049,307,0,1189,0,"IMAGE"],[3050,1107,0,1189,1,"IMAGE"],[3074,219,0,1018,0,"IMAGE"],[3095,37,0,288,0,"*"],[3097,1220,0,1018,3,"STRING"],[3098,1219,0,1018,2,"STRING"],[3123,1132,0,1230,1,"INT"],[3124,1132,1,1230,2,"INT"],[3125,1230,0,248,0,"*"],[3126,250,0,1231,0,"LORA_STACK"],[3128,254,0,1231,2,"STRING"],[3129,556,0,1231,3,"STRING"],[3135,1101,0,1232,4,"VAE"],[3144,1231,0,1234,0,"MODEL"],[3145,1101,0,1234,1,"VAE"],[3147,249,0,1234,3,"MASK"],[3150,1235,0,1234,4,"BRMODEL"],[3182,301,0,844,0,"IMAGE"],[3202,322,0,301,0,"*"],[3205,1231,4,1101,0,"*"],[3217,1232,5,693,0,"*"],[3231,1248,0,1257,0,"CONTROL_NET"],[3232,1231,1,1257,1,"CONDITIONING"],[3233,1231,2,1257,2,"CONDITIONING"],[3234,1189,0,1257,3,"IMAGE"],[3242,1259,0,1234,5,"CONDITIONING"],[3243,1260,0,1234,6,"CONDITIONING"],[3246,1248,0,1261,0,"CONTROL_NET"],[3252,223,0,1261,3,"IMAGE"],[3257,890,0,1132,0,"IMAGE"],[3258,1018,0,322,0,"*"],[3260,890,0,884,0,"*"],[3272,1234,0,1232,0,"MODEL"],[3273,1234,1,1232,1,"CONDITIONING"],[3274,1234,2,1232,2,"CONDITIONING"],[3275,1234,3,1232,3,"LATENT"],[3283,884,0,807,0,"IMAGE"],[3284,280,0,807,1,"IMAGE"],[3292,1257,0,1261,1,"CONDITIONING"],[3293,1257,1,1261,2,"CONDITIONING"],[3303,248,0,1234,2,"IMAGE"],[3304,1261,0,1259,0,"*"],[3305,1261,1,1260,0,"*"],[3306,693,0,1274,0,"IMAGE"],[3307,248,0,1274,3,"IMAGE"],[3309,1275,0,1274,1,"IMAGE"],[3310,1275,0,1274,2,"IMAGE"],[3312,249,0,1276,0,"MASK"],[3313,1276,0,1275,0,"MASK"],[3321,1274,0,1278,0,"IMAGE"],[3322,1279,0,219,0,"*"],[3323,1279,0,1230,0,"IMAGE"],[3324,1279,0,1280,0,"IMAGE"],[3325,1280,0,1274,4,"INT"],[3326,1280,1,1274,5,"INT"],[3327,362,0,1281,0,"*"],[3328,1281,0,1274,6,"INT"]],"groups":[{"title":"服装+背景一次生成","bounding":[-1370,-680,1890,900],"color":"#3f789e","font_size":24,"locked":false},{"title":"重回区域遮罩","bounding":[-2920,-680,1311,854],"color":"#3f789e","font_size":24,"locked":false},{"title":"ControlNet","bounding":[-2950,290,2820,900],"color":"#3f789e","font_size":24,"locked":false},{"title":"图像预处理","bounding":[-4400,-1350,1112,548],"color":"#3f789e","font_size":24,"locked":false},{"title":"用户输入","bounding":[-4430,-2390,1126,877],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{"ds":{"scale":1.191817653772748,"offset":[-155.50460285167475,863.5542992043107]},"workspace_info":{"id":"pPsLz84hs5LKVvLkd3oRp"},"groupNodes":{"controlnet":{"nodes":[{"type":"SetUnionControlNetType","pos":[-1440,680],"size":{"0":315,"1":58},"flags":{},"order":15,"mode":0,"inputs":[{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[],"shape":3,"label":"ControlNet","slot_index":0}],"properties":{"Node name for S&R":"SetUnionControlNetType"},"widgets_values":["canny/lineart/anime_lineart/mlsd"],"index":0},{"type":"ControlNetApplyAdvanced","pos":[-1440,460],"size":{"0":315,"1":166},"flags":{},"order":82,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":null,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":null,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":null,"label":"图像"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[],"shape":3,"label":"正面条件","slot_index":0},{"name":"negative","type":"CONDITIONING","links":[],"shape":3,"label":"负面条件","slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.2,0,0.5],"index":1}],"links":[[null,0,0,0,1248,"CONTROL_NET"],[null,1,1,0,1231,"CONDITIONING"],[null,2,1,1,1231,"CONDITIONING"],[0,0,1,2,1253,"CONTROL_NET"],[null,0,1,3,1189,"IMAGE"]],"external":[[1,0,"CONDITIONING"],[1,1,"CONDITIONING"]]}}},"version":0.4}