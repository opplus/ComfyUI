{"last_node_id":1250,"last_link_id":3187,"nodes":[{"id":219,"type":"Reroute","pos":{"0":-4440,"1":-1270},"size":[75,26],"flags":{},"order":8,"mode":0,"inputs":[{"name":"","type":"*","link":3187,"slot_index":0,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[3073,3074],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":239,"type":"JoinStrings","pos":{"0":-3817.433349609375,"1":-1821.3763427734375},"size":{"0":315,"1":106},"flags":{},"order":10,"mode":0,"inputs":[{"name":"string1","type":"STRING","link":444,"widget":{"name":"string1"},"label":"字符串1"},{"name":"string2","type":"STRING","link":990,"widget":{"name":"string2"},"label":"字符串2"}],"outputs":[{"name":"STRING","type":"STRING","links":[2764],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"JoinStrings"},"widgets_values":["","",","]},{"id":250,"type":"Reroute","pos":{"0":-1390,"1":-560},"size":[75,26],"flags":{},"order":11,"mode":0,"inputs":[{"name":"","type":"*","link":1617,"slot_index":0,"label":""}],"outputs":[{"name":"","type":"LORA_STACK","links":[3146],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":280,"type":"Reroute","pos":{"0":-2970,"1":-630},"size":[82,26],"flags":{},"order":37,"mode":0,"inputs":[{"name":"","type":"*","link":3029,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1125],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":288,"type":"Reroute","pos":{"0":-3357.433349609375,"1":-1561.3763427734375},"size":[90.4,26],"flags":{},"order":14,"mode":0,"inputs":[{"name":"","type":"*","link":2764,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"STRING","type":"STRING","links":[2088],"slot_index":0,"label":"STRING"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":322,"type":"Reroute","pos":{"0":-3340,"1":-840},"size":[75,26],"flags":{},"order":28,"mode":0,"inputs":[{"name":"","type":"*","link":2524,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[1983],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":362,"type":"Reroute","pos":{"0":-3330,"1":-910},"size":[75,26],"flags":{},"order":25,"mode":0,"inputs":[{"name":"","type":"*","link":2563,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"INT","type":"INT","links":[2317],"slot_index":0,"label":"INT"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":690,"type":"Reroute","pos":{"0":-3367.433349609375,"1":-1631.3763427734375},"size":[124,26],"flags":{},"order":7,"mode":0,"inputs":[{"name":"","type":"*","link":1581,"label":""}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[1617],"slot_index":0,"label":"LORA_STACK"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":693,"type":"Reroute","pos":{"0":1170,"1":-630},"size":[75,26],"flags":{},"order":63,"mode":0,"inputs":[{"name":"","type":"*","link":3151,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2310],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":882,"type":"Snapme ImgProcess Step3","pos":{"0":1980,"1":-510},"size":{"0":320,"1":260},"flags":{},"order":65,"mode":0,"inputs":[{"name":"image_res_1","type":"IMAGE","link":2585,"label":"image_res_1"},{"name":"face_mask","type":"IMAGE","link":2584,"label":"face_mask"},{"name":"control_mask_face","type":"IMAGE","link":2586,"label":"control_mask_face"},{"name":"face_image_pad","type":"IMAGE","link":2316,"label":"face_image_pad"},{"name":"dilate_iter","type":"INT","link":2430,"slot_index":4,"widget":{"name":"dilate_iter"},"label":"dilate_iter"},{"name":"use_hair","type":"BOOLEAN","link":2509,"slot_index":5,"widget":{"name":"use_hair"},"label":"use_hair"},{"name":"restore_width","type":"INT","link":2382,"widget":{"name":"restore_width"},"label":"restore_width"},{"name":"restore_height","type":"INT","link":2383,"widget":{"name":"restore_height"},"label":"restore_height"}],"outputs":[{"name":"脸部回帖图","type":"IMAGE","links":[3085],"slot_index":0,"shape":3,"label":"脸部回帖图"}],"properties":{"Node name for S&R":"Snapme ImgProcess Step3"},"widgets_values":[0,0,false,0,0,true,false]},{"id":885,"type":"Reroute","pos":{"0":-3340,"1":-1270},"size":[82,26],"flags":{},"order":17,"mode":0,"inputs":[{"name":"","type":"*","link":2554,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2524,2589],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":890,"type":"Reroute","pos":{"0":-3330,"1":-1020},"size":[82,26],"flags":{},"order":23,"mode":0,"inputs":[{"name":"","type":"*","link":2560,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"slot_index":0,"label":""}],"properties":{"showOutputText":true,"horizontal":false}},{"id":932,"type":"Reroute","pos":{"0":1170,"1":-870},"size":[75,26],"flags":{},"order":34,"mode":0,"inputs":[{"name":"","type":"*","link":2299,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2371],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":936,"type":"Reroute","pos":{"0":1630,"1":-570},"size":[75,26],"flags":{},"order":64,"mode":0,"inputs":[{"name":"","type":"*","link":2310,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2585],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":937,"type":"Reroute","pos":{"0":1630,"1":-520},"size":[75,26],"flags":{},"order":45,"mode":0,"inputs":[{"name":"","type":"*","link":2370,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2584],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":938,"type":"Reroute","pos":{"0":1630,"1":-430},"size":[75,26],"flags":{},"order":42,"mode":0,"inputs":[{"name":"","type":"*","link":2641,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2316],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":939,"type":"Reroute","pos":{"0":1630,"1":-390},"size":[75,26],"flags":{},"order":38,"mode":0,"inputs":[{"name":"","type":"*","link":2317,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[2430],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":947,"type":"Reroute","pos":{"0":-3330,"1":-1120},"size":[82,26],"flags":{},"order":21,"mode":0,"inputs":[{"name":"","type":"*","link":2558}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":949,"type":"Reroute","pos":{"0":-3340,"1":-870},"size":[98.8,26],"flags":{},"order":26,"mode":0,"inputs":[{"name":"","type":"*","link":2565,"widget":{"name":"value"}}],"outputs":[{"name":"BOOLEAN","type":"BOOLEAN","links":[2374],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":952,"type":"Reroute","pos":{"0":1170,"1":-800},"size":[75,26],"flags":{},"order":36,"mode":0,"inputs":[{"name":"","type":"*","link":2368}],"outputs":[{"name":"","type":"IMAGE","links":[2370],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":953,"type":"Reroute","pos":{"0":1630,"1":-480},"size":[75,26],"flags":{},"order":44,"mode":0,"inputs":[{"name":"","type":"*","link":2371,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[2586],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":954,"type":"Reroute","pos":{"0":1630,"1":-330},"size":[75,26],"flags":{},"order":39,"mode":0,"inputs":[{"name":"","type":"*","link":2374,"slot_index":0,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"BOOLEAN","links":[2509],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":958,"type":"Reroute","pos":{"0":1170,"1":-1000},"size":[75,26],"flags":{},"order":15,"mode":0,"inputs":[{"name":"","type":"*","link":2906,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[2382],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":1027,"type":"Reroute","pos":{"0":1170,"1":-750},"size":[75,26],"flags":{},"order":29,"mode":0,"inputs":[{"name":"","type":"*","link":2589}],"outputs":[{"name":"","type":"IMAGE","links":[2641],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":1149,"type":"Reroute","pos":{"0":-3330,"1":-960},"size":[75,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":2939}],"outputs":[{"name":"","type":"IMAGE","links":[],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":959,"type":"Reroute","pos":{"0":1170,"1":-940},"size":[75,26],"flags":{},"order":16,"mode":0,"inputs":[{"name":"","type":"*","link":2907,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[2383],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":1230,"type":"Reroute","pos":{"0":-1680,"1":430},"size":[75,26],"flags":{},"order":47,"mode":0,"inputs":[{"name":"","type":"*","link":3156}],"outputs":[{"name":"","type":"CONDITIONING","links":[3108],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":1231,"type":"Reroute","pos":{"0":-1680,"1":510},"size":[75,26],"flags":{},"order":48,"mode":0,"inputs":[{"name":"","type":"*","link":3157}],"outputs":[{"name":"","type":"CONDITIONING","links":[3109],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":948,"type":"Reroute","pos":{"0":-3330,"1":-1070},"size":[82,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":3027}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2368,3029],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":249,"type":"Reroute","pos":{"0":-1400,"1":-320},"size":[75,26],"flags":{},"order":58,"mode":0,"inputs":[{"name":"","type":"*","link":3182,"label":""}],"outputs":[{"name":"MASK","type":"MASK","links":[2211],"slot_index":0,"label":"MASK"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":254,"type":"Reroute","pos":{"0":-1410,"1":-490},"size":[90.4,26],"flags":{},"order":27,"mode":0,"inputs":[{"name":"","type":"*","link":2088,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"STRING","type":"STRING","links":[3147],"slot_index":0,"label":"STRING"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":556,"type":"Reroute","pos":{"0":-1410,"1":-430},"size":[90.4,26],"flags":{},"order":9,"mode":0,"inputs":[{"name":"","type":"*","link":1326,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"STRING","type":"STRING","links":[3148],"slot_index":0,"label":"STRING"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":218,"type":"AIO_Preprocessor","pos":{"0":-2850,"1":760},"size":{"0":320,"1":80},"flags":{},"order":50,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1902,"label":"图像"},{"name":"resolution","type":"INT","link":2543,"widget":{"name":"resolution"},"label":"分辨率"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3170],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["DensePosePreprocessor",768]},{"id":263,"type":"CR LoRA Stack","pos":{"0":-3840,"1":-2250},"size":{"0":394.4184265136719,"1":342},"flags":{},"order":0,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"label":"LoRA堆"}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[1581],"slot_index":0,"shape":3,"label":"LORA_STACK"},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR LoRA Stack"},"widgets_values":["On","snapmecloth/0702/webulora/Pink-shirt.safetensors",1,1,"On","sdxl/Professional_Portrait.safetensors",1,1,"Off","None",0.8,1]},{"id":875,"type":"BrushNet","pos":{"0":-440,"1":-470},"size":{"0":330,"1":280},"flags":{},"order":61,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":3165,"label":"模型"},{"name":"vae","type":"VAE","link":2835,"label":"VAE"},{"name":"image","type":"IMAGE","link":2997,"label":"图像"},{"name":"mask","type":"MASK","link":2211,"label":"遮罩"},{"name":"brushnet","type":"BRMODEL","link":2207,"slot_index":4,"label":"BrushNet"},{"name":"positive","type":"CONDITIONING","link":3112,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":3113,"label":"负面条件"}],"outputs":[{"name":"model","type":"MODEL","links":[3161],"slot_index":0,"shape":3,"label":"模型"},{"name":"positive","type":"CONDITIONING","links":[3162],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[3163],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"latent","type":"LATENT","links":[3164],"slot_index":3,"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"BrushNet"},"widgets_values":[0.6000000000000001,0,1000]},{"id":248,"type":"Reroute","pos":{"0":-1400,"1":-640},"size":[82,26],"flags":{},"order":32,"mode":0,"inputs":[{"name":"","type":"*","link":2319,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2997],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":367,"type":"Reroute","pos":{"0":-3330,"1":-1220},"size":[82,26],"flags":{},"order":19,"mode":0,"inputs":[{"name":"","type":"*","link":2556,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2319,3166],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1155,"type":"Reroute","pos":{"0":-3000,"1":430},"size":[82,26],"flags":{},"order":33,"mode":0,"inputs":[{"name":"","type":"*","link":3166}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3167],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":301,"type":"Reroute","pos":{"0":-3000,"1":740},"size":[82,26],"flags":{},"order":41,"mode":0,"inputs":[{"name":"","type":"*","link":1983,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1902],"slot_index":0,"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1228,"type":"Reroute","pos":{"0":-890,"1":400},"size":[140.8,26],"flags":{},"order":59,"mode":0,"inputs":[{"name":"","type":"*","link":3127}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[3112],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1229,"type":"Reroute","pos":{"0":-880,"1":470},"size":[140.8,26],"flags":{},"order":60,"mode":0,"inputs":[{"name":"","type":"*","link":3105}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[3113],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1220,"type":"ControlNetLoader","pos":{"0":-1450,"1":430},"size":{"0":315,"1":58},"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[3098,3114],"slot_index":0,"shape":3,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["controlnet-union-sdxl-promax-1.0.safetensors"]},{"id":1227,"type":"workflow/controlnetunion","pos":{"0":-1450,"1":810},"size":{"0":315,"1":190},"flags":{},"order":57,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":3114,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":3102,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":3103,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":3170,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[3127],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[3105],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnetunion"},"widgets_values":["auto",0.5,0,1]},{"id":1226,"type":"workflow/controlnetunion","pos":{"0":-1450,"1":550},"size":{"0":315,"1":190},"flags":{},"order":55,"mode":0,"inputs":[{"name":"ControlNet","type":"CONTROL_NET","link":3098,"label":"ControlNet"},{"name":"正面条件","type":"CONDITIONING","link":3108,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","link":3109,"label":"负面条件"},{"name":"图像","type":"IMAGE","link":3175,"label":"图像"}],"outputs":[{"name":"正面条件","type":"CONDITIONING","links":[3102],"slot_index":0,"shape":3,"label":"正面条件"},{"name":"负面条件","type":"CONDITIONING","links":[3103],"slot_index":1,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"workflow/controlnetunion"},"widgets_values":["canny/lineart/anime_lineart/mlsd",0.3,0,1]},{"id":1241,"type":"Efficient Loader","pos":{"0":-1140,"1":-560},"size":{"0":400,"1":460},"flags":{},"order":40,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":3146,"label":"LoRA堆"},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":null,"label":"ControlNet堆"},{"name":"positive","type":"STRING","link":3147,"widget":{"name":"positive"},"label":"正面条件"},{"name":"negative","type":"STRING","link":3148,"widget":{"name":"negative"},"label":"负面条件"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[3165],"slot_index":0,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":[3156],"slot_index":1,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":[3157],"slot_index":2,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":null,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":[3149],"slot_index":4,"shape":3,"label":"VAE"},{"name":"CLIP","type":"CLIP","links":null,"shape":3,"label":"CLIP"},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":null,"shape":3,"label":"依赖"}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["sdxl/realvisxlV40_v40Bakedvae.safetensors","Baked VAE",-2,"None",1,1,"CLIP_POSITIVE","CLIP_NEGATIVE","none","comfy",512,512,1,true,true],"color":"#443322","bgcolor":"#665533","shape":1},{"id":1101,"type":"Reroute","pos":{"0":-610,"1":-640},"size":[75,26],"flags":{},"order":49,"mode":0,"inputs":[{"name":"","type":"*","link":3149}],"outputs":[{"name":"VAE","type":"VAE","links":[2835,3153],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":876,"type":"BrushNetLoader","pos":{"0":-420,"1":-140},"size":{"0":315,"1":82},"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"brushnet","type":"BRMODEL","links":[2207],"shape":3,"label":"BrushNet"}],"properties":{"Node name for S&R":"BrushNetLoader"},"widgets_values":["brushnet_xl/segmentation_mask_brushnet_ckpt_v1.safetensors","float16"]},{"id":368,"type":"Reroute","pos":{"0":-3330,"1":-1170},"size":[82,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":2557,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2299,3172],"slot_index":0,"label":""}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1242,"type":"Reroute","pos":{"0":-2990,"1":350},"size":[82,26],"flags":{"pinned":true},"order":35,"mode":0,"inputs":[{"name":"","type":"*","link":3172}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3180],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":333,"type":"Get resolution [Crystools]","pos":{"0":-4310,"1":-1110},"size":{"0":210,"1":100},"flags":{"collapsed":false},"order":18,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2555,"label":"图像"}],"outputs":[{"name":"width","type":"INT","links":[1665],"slot_index":0,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":[3173],"slot_index":1,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"Get resolution [Crystools]"}},{"id":302,"type":"Reroute","pos":{"0":-2990,"1":550},"size":[75,26],"flags":{},"order":30,"mode":0,"inputs":[{"name":"","type":"*","link":1665,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"INT","type":"INT","links":[2542,2543,3178],"slot_index":0,"label":"INT"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1243,"type":"Reroute","pos":{"0":-2990,"1":610},"size":[75,26],"flags":{},"order":31,"mode":0,"inputs":[{"name":"","type":"*","link":3173,"widget":{"name":"value"}}],"outputs":[{"name":"INT","type":"INT","links":[3179],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":844,"type":"AIO_Preprocessor","pos":{"0":-2850,"1":470},"size":{"0":320,"1":80},"flags":{},"order":43,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3167,"label":"图像"},{"name":"resolution","type":"INT","link":2542,"widget":{"name":"resolution"},"label":"分辨率"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3177],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["AnyLineArtPreprocessor_aux",768]},{"id":1244,"type":"ImageResize+","pos":{"0":-2460,"1":460},"size":{"0":315,"1":218},"flags":{"collapsed":false},"order":51,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3177,"label":"图像"},{"name":"width","type":"INT","link":3178,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":3179,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3174],"slot_index":0,"shape":3,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[768,1024,"nearest","keep proportion","always",0]},{"id":1245,"type":"ImageCompositedMaskedWeight","pos":{"0":-2070,"1":470},"size":{"0":315,"1":78},"flags":{},"order":53,"mode":0,"inputs":[{"name":"source","type":"IMAGE","link":3174,"label":"source"},{"name":"mask","type":"IMAGE","link":3180,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3175],"slot_index":0,"shape":3,"label":"IMAGE"}],"properties":{"Node name for S&R":"ImageCompositedMaskedWeight"},"widgets_values":[0]},{"id":1018,"type":"AliSegBodyHeadFace","pos":{"0":-3890,"1":-1270},"size":{"0":315,"1":286},"flags":{},"order":13,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3074,"label":"images"},{"name":"bodys","type":"IMAGE","link":null,"label":"bodys"},{"name":"prompt_cloth","type":"STRING","link":3011,"widget":{"name":"prompt_cloth"},"label":"prompt_cloth"},{"name":"prompt_background","type":"STRING","link":3012,"widget":{"name":"prompt_background"},"label":"prompt_background"},{"name":"faces","type":"IMAGE","link":null,"label":"faces"}],"outputs":[{"name":"原图","type":"IMAGE","links":[2554,2555],"shape":3,"label":"原图"},{"name":"head_gray","type":"IMAGE","links":[2556],"shape":3,"label":"head_gray"},{"name":"head_mask","type":"IMAGE","links":[2557],"slot_index":2,"shape":3,"label":"head_mask"},{"name":"hair_mask","type":"IMAGE","links":[2558],"slot_index":3,"shape":3,"label":"hair_mask"},{"name":"face_mask","type":"IMAGE","links":[3027],"slot_index":4,"shape":3,"label":"face_mask"},{"name":"人体mask","type":"IMAGE","links":[2560],"shape":3,"label":"人体mask"},{"name":"cloth_mask","type":"IMAGE","links":[2939],"slot_index":6,"shape":3,"label":"cloth_mask"},{"name":"动态膨胀系数","type":"INT","links":[2563],"shape":3,"label":"动态膨胀系数"},{"name":"头发是否过肩膀","type":"BOOLEAN","links":[2565],"shape":3,"label":"头发是否过肩膀"},{"name":"openpose","type":"IMAGE","links":[],"shape":3,"label":"openpose"}],"properties":{"Node name for S&R":"AliSegBodyHeadFace"},"widgets_values":["","",false,3]},{"id":1246,"type":"Save Image To OSS And Display","pos":{"0":2860,"1":-500},"size":{"0":315,"1":82},"flags":{},"order":67,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3181,"label":"images"}],"outputs":[],"properties":{"Node name for S&R":"Save Image To OSS And Display"},"widgets_values":["comfyui","JPEG"]},{"id":1132,"type":"Get resolution [Crystools]","pos":{"0":-500,"1":-1050},"size":{"0":210,"1":100},"flags":{"collapsed":false},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3073,"label":"图像"}],"outputs":[{"name":"width","type":"INT","links":[2906],"slot_index":0,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":[2907],"slot_index":1,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"Get resolution [Crystools]"}},{"id":277,"type":"Reroute","pos":{"0":-1650,"1":-580},"size":[75,26],"flags":{},"order":56,"mode":0,"inputs":[{"name":"","type":"*","link":3183,"label":""}],"outputs":[{"name":"MASK","type":"MASK","links":[3182],"slot_index":0,"label":"MASK"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":1237,"type":"ImpactGaussianBlurMask","pos":{"0":-2160,"1":-550},"size":{"0":315,"1":82},"flags":{},"order":54,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":3185,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[3183],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImpactGaussianBlurMask"},"widgets_values":[10,10]},{"id":1248,"type":"InvertMask","pos":{"0":-2490,"1":-550},"size":{"0":210,"1":26},"flags":{},"order":52,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":3184,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[3185],"shape":3,"label":"遮罩","slot_index":0}],"properties":{"Node name for S&R":"InvertMask"}},{"id":139,"type":"ImageToMask","pos":{"0":-2850,"1":-550},"size":{"0":315,"1":58},"flags":{},"order":46,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1125,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[3184],"slot_index":0,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":1240,"type":"KSampler (Efficient)","pos":{"0":310,"1":-580},"size":[330,560],"flags":{},"order":62,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":3161,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":3162,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":3163,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":3164,"label":"Latent"},{"name":"optional_vae","type":"VAE","link":3153,"label":"VAE(可选)"},{"name":"script","type":"SCRIPT","link":null,"label":"脚本"}],"outputs":[{"name":"MODEL","type":"MODEL","links":null,"shape":3,"label":"模型"},{"name":"CONDITIONING+","type":"CONDITIONING","links":null,"shape":3,"label":"正面条件"},{"name":"CONDITIONING-","type":"CONDITIONING","links":null,"shape":3,"label":"负面条件"},{"name":"LATENT","type":"LATENT","links":null,"shape":3,"label":"Latent"},{"name":"VAE","type":"VAE","links":null,"shape":3,"label":"VAE"},{"name":"IMAGE","type":"IMAGE","links":[3151],"slot_index":5,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[-1,null,30,7,"dpmpp_2m_sde","karras",0.8,"none","true"],"color":"#332222","bgcolor":"#553333","shape":1},{"id":1212,"type":"ReActorRestoreFace","pos":{"0":2390,"1":-510},"size":{"0":315,"1":130},"flags":{},"order":66,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3085,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3181],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ReActorRestoreFace"},"widgets_values":["retinaface_resnet50","GPEN-BFR-512.onnx",1,0.5]},{"id":1250,"type":"Load Image From Url","pos":{"0":-4980,"1":-1340},"size":{"0":400,"1":200},"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3187],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"Load Image From Url"},"widgets_values":["face",true]},{"id":555,"type":"String Literal","pos":{"0":-4380,"1":-1760},"size":{"0":400,"1":200},"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[1326],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"String Literal"},"widgets_values":["negative",true]},{"id":238,"type":"String Literal","pos":{"0":-4370,"1":-2040},"size":{"0":400,"1":200},"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[990,3012],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"String Literal"},"widgets_values":["bg",true]},{"id":37,"type":"String Literal","pos":{"0":-4380,"1":-2260},"size":{"0":391.5850524902344,"1":152.6741180419922},"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[444,3011],"slot_index":0,"shape":3,"label":"STRING"}],"properties":{"Node name for S&R":"String Literal"},"widgets_values":["cloth",true]}],"links":[[444,37,0,239,0,"STRING"],[990,238,0,239,1,"STRING"],[1125,280,0,139,0,"IMAGE"],[1326,555,0,556,0,"*"],[1581,263,0,690,0,"*"],[1617,690,0,250,0,"*"],[1665,333,0,302,0,"*"],[1902,301,0,218,0,"IMAGE"],[1983,322,0,301,0,"*"],[2088,288,0,254,0,"*"],[2207,876,0,875,4,"BRMODEL"],[2211,249,0,875,3,"MASK"],[2299,368,0,932,0,"*"],[2310,693,0,936,0,"*"],[2316,938,0,882,3,"IMAGE"],[2317,362,0,939,0,"*"],[2319,367,0,248,0,"*"],[2368,948,0,952,0,"*"],[2370,952,0,937,0,"*"],[2371,932,0,953,0,"*"],[2374,949,0,954,0,"*"],[2382,958,0,882,6,"INT"],[2383,959,0,882,7,"INT"],[2430,939,0,882,4,"INT"],[2509,954,0,882,5,"BOOLEAN"],[2524,885,0,322,0,"*"],[2542,302,0,844,1,"INT"],[2543,302,0,218,1,"INT"],[2554,1018,0,885,0,"*"],[2555,1018,0,333,0,"IMAGE"],[2556,1018,1,367,0,"*"],[2557,1018,2,368,0,"*"],[2558,1018,3,947,0,"*"],[2560,1018,5,890,0,"*"],[2563,1018,7,362,0,"*"],[2565,1018,8,949,0,"*"],[2584,937,0,882,1,"IMAGE"],[2585,936,0,882,0,"IMAGE"],[2586,953,0,882,2,"IMAGE"],[2589,885,0,1027,0,"*"],[2641,1027,0,938,0,"*"],[2764,239,0,288,0,"*"],[2835,1101,0,875,1,"VAE"],[2906,1132,0,958,0,"*"],[2907,1132,1,959,0,"*"],[2939,1018,6,1149,0,"*"],[2997,248,0,875,2,"IMAGE"],[3011,37,0,1018,2,"STRING"],[3012,238,0,1018,3,"STRING"],[3027,1018,4,948,0,"*"],[3029,948,0,280,0,"*"],[3073,219,0,1132,0,"IMAGE"],[3074,219,0,1018,0,"IMAGE"],[3085,882,0,1212,0,"IMAGE"],[3098,1220,0,1226,0,"CONTROL_NET"],[3102,1226,0,1227,1,"CONDITIONING"],[3103,1226,1,1227,2,"CONDITIONING"],[3105,1227,1,1229,0,"*"],[3108,1230,0,1226,1,"CONDITIONING"],[3109,1231,0,1226,2,"CONDITIONING"],[3112,1228,0,875,5,"CONDITIONING"],[3113,1229,0,875,6,"CONDITIONING"],[3114,1220,0,1227,0,"CONTROL_NET"],[3127,1227,0,1228,0,"*"],[3146,250,0,1241,0,"LORA_STACK"],[3147,254,0,1241,2,"STRING"],[3148,556,0,1241,3,"STRING"],[3149,1241,4,1101,0,"*"],[3151,1240,5,693,0,"*"],[3153,1101,0,1240,4,"VAE"],[3156,1241,1,1230,0,"*"],[3157,1241,2,1231,0,"*"],[3161,875,0,1240,0,"MODEL"],[3162,875,1,1240,1,"CONDITIONING"],[3163,875,2,1240,2,"CONDITIONING"],[3164,875,3,1240,3,"LATENT"],[3165,1241,0,875,0,"MODEL"],[3166,367,0,1155,0,"*"],[3167,1155,0,844,0,"IMAGE"],[3170,218,0,1227,3,"IMAGE"],[3172,368,0,1242,0,"*"],[3173,333,1,1243,0,"*"],[3174,1244,0,1245,0,"IMAGE"],[3175,1245,0,1226,3,"IMAGE"],[3177,844,0,1244,0,"IMAGE"],[3178,302,0,1244,1,"INT"],[3179,1243,0,1244,2,"INT"],[3180,1242,0,1245,1,"IMAGE"],[3181,1212,0,1246,0,"IMAGE"],[3182,277,0,249,0,"*"],[3183,1237,0,277,0,"*"],[3184,139,0,1248,0,"MASK"],[3185,1248,0,1237,0,"MASK"],[3187,1250,0,219,0,"*"]],"groups":[{"title":"用户输入","bounding":[-4434,-2390,1126,877],"color":"#3f789e","font_size":24,"flags":{}},{"title":"图像预处理","bounding":[-4400,-1350,1112,548],"color":"#3f789e","font_size":24,"flags":{}},{"title":"ControlNet","bounding":[-2950,290,2120,1170],"color":"#3f789e","font_size":24,"flags":{}},{"title":"重回区域遮罩","bounding":[-2920,-680,1311,854],"color":"#3f789e","font_size":24,"flags":{}},{"title":"服装+背景一次生成","bounding":[-1370,-700,2613,898],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.17715610000000412,"offset":[5383.639647445818,2379.804551591867]},"workspace_info":{"id":"xlqyCrWX2LmzptrVC4bgG"},"groupNodes":{"controlnetunion":{"nodes":[{"id":-1,"type":"SetUnionControlNetType","pos":{"0":-910,"1":610},"size":{"0":315,"1":58},"flags":{},"order":7,"mode":0,"inputs":[{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[],"shape":3,"label":"ControlNet","slot_index":0}],"properties":{"Node name for S&R":"SetUnionControlNetType"},"widgets_values":["auto"],"index":0},{"id":-1,"type":"ControlNetApplyAdvanced","pos":{"0":-840,"1":720},"size":{"0":315,"1":166},"flags":{},"order":13,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":null,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":null,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":null,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":null,"label":"图像"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":null,"shape":3,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":null,"shape":3,"label":"负面条件"}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[1,0,1],"index":1}],"links":[[0,0,1,2,1223,"CONTROL_NET"]],"external":[]}}},"version":0.4}