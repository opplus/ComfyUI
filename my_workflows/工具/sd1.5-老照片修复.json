{"last_node_id":64,"last_link_id":215,"nodes":[{"id":8,"type":"VAEDecode","pos":[1212,53],"size":{"0":210,"1":46},"flags":{},"order":25,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":7,"label":"Latent"},{"name":"vae","type":"VAE","link":133,"slot_index":1,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[186],"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":24,"type":"ControlNetApplyAdvanced","pos":[506,-268],"size":{"0":315,"1":166},"flags":{},"order":21,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":59,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":61,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":191,"slot_index":2,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":194,"slot_index":3,"label":"图像"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[56],"shape":3,"slot_index":0,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[57],"shape":3,"slot_index":1,"label":"负面条件"}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.4,0,1]},{"id":51,"type":"ControlNetApplyAdvanced","pos":[1317,-264],"size":{"0":315,"1":166},"flags":{},"order":23,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":165,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":167,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":174,"slot_index":2,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":173,"slot_index":3,"label":"图像"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[169],"shape":3,"slot_index":0,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[171],"shape":3,"slot_index":1,"label":"负面条件"}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.4,0,1]},{"id":17,"type":"DWPreprocessor","pos":[910,-595],"size":{"0":315,"1":198},"flags":{},"order":10,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":201,"slot_index":0,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[63,87],"shape":3,"slot_index":0,"label":"图像"},{"name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null,"shape":3,"label":"姿态关键点"}],"properties":{"Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",512,"yolox_l.onnx","dw-ll_ucoco_384.onnx"]},{"id":43,"type":"LineArtPreprocessor","pos":[1325,-503],"size":{"0":315,"1":82},"flags":{},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":203,"slot_index":0,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[173,175],"shape":3,"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"LineArtPreprocessor"},"widgets_values":["disable",512]},{"id":22,"type":"ControlNetLoader","pos":[908,-370],"size":{"0":315,"1":58},"flags":{},"order":0,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[67],"shape":3,"slot_index":0,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["sd1.5/control_v11p_sd15_openpose.pth"]},{"id":50,"type":"ControlNetLoader","pos":[1321,-368],"size":{"0":315,"1":58},"flags":{},"order":1,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[174],"shape":3,"slot_index":0,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["sd1.5/control_v11p_sd15_lineart.safetensors"]},{"id":4,"type":"CheckpointLoaderSimple","pos":[871,372],"size":{"0":315,"1":98},"flags":{},"order":2,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[1],"slot_index":0,"label":"模型"},{"name":"CLIP","type":"CLIP","links":[3,5],"slot_index":1,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[],"slot_index":2,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sd1.5/dreamshaper_8.safetensors"]},{"id":40,"type":"VAELoader","pos":[1212,153],"size":{"0":315,"1":58},"flags":{},"order":3,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[127,133],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["vae-ft-mse-840000-ema-pruned.safetensors"]},{"id":14,"type":"LeReS-DepthMapPreprocessor","pos":[470,-570],"size":{"0":369.6000061035156,"1":130},"flags":{},"order":11,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":202,"slot_index":0,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[157,194],"shape":3,"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"LeReS-DepthMapPreprocessor"},"widgets_values":[0,0,"disable",512]},{"id":28,"type":"PreviewImage","pos":[560,-900],"size":{"0":226.6756591796875,"1":246},"flags":{"collapsed":false},"order":16,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":157,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":29,"type":"PreviewImage","pos":[930,-910],"size":{"0":226.6756591796875,"1":246},"flags":{"collapsed":false},"order":15,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":87,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":52,"type":"PreviewImage","pos":[1320,-910],"size":{"0":226.6756591796875,"1":246},"flags":{"collapsed":false},"order":17,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":175,"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":25,"type":"ControlNetApplyAdvanced","pos":[920,-270],"size":{"0":315,"1":166},"flags":{},"order":22,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":56,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":57,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":67,"slot_index":2,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":63,"slot_index":3,"label":"图像"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[165],"shape":3,"slot_index":0,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","links":[167],"shape":3,"slot_index":1,"label":"负面条件"}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[1,0,1]},{"id":3,"type":"KSampler","pos":[870,45],"size":{"0":315,"1":262},"flags":{},"order":24,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":169,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":171,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":210,"label":"Latent"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[7],"slot_index":0,"label":"Latent"}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[686779456687464,"randomize",25,7.5,"euler","karras",0.6]},{"id":39,"type":"LatentUpscale","pos":[1240,390],"size":{"0":315,"1":130},"flags":{},"order":18,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":96,"label":"Latent"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[210],"shape":3,"slot_index":0,"label":"Latent"}],"properties":{"Node name for S&R":"LatentUpscale"},"widgets_values":["nearest-exact",512,0,"disabled"]},{"id":37,"type":"VAEEncode","pos":[1230,260],"size":{"0":210,"1":46},"flags":{},"order":13,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":188,"slot_index":0,"label":"图像"},{"name":"vae","type":"VAE","link":127,"slot_index":1,"label":"VAE"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[96],"shape":3,"slot_index":0,"label":"Latent"}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":20,"type":"ControlNetLoader","pos":[511,-367],"size":{"0":315,"1":58},"flags":{"collapsed":false},"order":4,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[191],"shape":3,"slot_index":0,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["sd1.5/control_v11f1p_sd15_depth.pth"]},{"id":41,"type":"ReActorFaceSwap","pos":[1600,50],"size":{"0":315,"1":358},"flags":{},"order":26,"mode":0,"inputs":[{"name":"input_image","type":"IMAGE","link":186,"label":"目标图像"},{"name":"source_image","type":"IMAGE","link":208,"slot_index":1,"label":"源图像"},{"name":"face_model","type":"FACE_MODEL","link":null,"label":"面部模型"},{"name":"face_boost","type":"FACE_BOOST","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[118],"shape":3,"slot_index":0,"label":"图像"},{"name":"FACE_MODEL","type":"FACE_MODEL","links":null,"shape":3,"label":"面部模型"}],"properties":{"Node name for S&R":"ReActorFaceSwap"},"widgets_values":[true,"inswapper_128.onnx","retinaface_resnet50","codeformer-v0.1.0.pth",1,0.5,"no","no","0","0",1]},{"id":9,"type":"SaveImage","pos":[2030,40],"size":{"0":364.115966796875,"1":473.5037841796875},"flags":{},"order":27,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":118,"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":13,"type":"LoadImage","pos":[-250,50],"size":{"0":315,"1":314},"flags":{},"order":5,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[190,201,202,203,208],"shape":3,"slot_index":0,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["16 (4).png","image"]},{"id":57,"type":"ImageScale","pos":[-61,-167],"size":{"0":315,"1":130},"flags":{},"order":9,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":190,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[188,212],"shape":3,"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,0,"disabled"]},{"id":6,"type":"CLIPTextEncode","pos":[200,70],"size":[420,160],"flags":{},"order":20,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":3,"label":"CLIP"},{"name":"text","type":"STRING","link":215,"widget":{"name":"text"},"label":"文本"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[59],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["boy in white shirt, masterpiece,best quality,(photorealistic:1.1),8k raw photo,a,detailed face，detailed skin,depth of field,"]},{"id":61,"type":"DownloadAndLoadFlorence2Model","pos":[-390,630],"size":{"0":315,"1":106},"flags":{},"order":6,"mode":0,"outputs":[{"name":"florence2_model","type":"FL2MODEL","links":[211],"shape":3,"label":"florence2_model","slot_index":0}],"properties":{"Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["microsoft/Florence-2-large-ft","fp16","sdpa"]},{"id":64,"type":"Primitive string multiline [Crystools]","pos":[10,440],"size":{"0":400,"1":200},"flags":{},"order":7,"mode":0,"outputs":[{"name":"string","type":"STRING","links":[214],"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Primitive string multiline [Crystools]"},"widgets_values":["masterpiece,best quality,(photorealistic:1.1),8k raw photo,a,detailed face，detailed skin,depth of field,"]},{"id":62,"type":"Florence2Run","pos":[20,700],"size":{"0":400,"1":304},"flags":{},"order":14,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":212,"label":"image"},{"name":"florence2_model","type":"FL2MODEL","link":211,"label":"florence2_model"}],"outputs":[{"name":"image","type":"IMAGE","links":null,"shape":3,"label":"image","slot_index":0},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"mask"},{"name":"caption","type":"STRING","links":[213],"shape":3,"label":"caption","slot_index":2},{"name":"data","type":"JSON","links":null,"shape":3,"label":"data"}],"properties":{"Node name for S&R":"Florence2Run"},"widgets_values":["","region_caption",true,false,1024,3,true,""]},{"id":7,"type":"CLIPTextEncode","pos":[490,540],"size":{"0":425.27801513671875,"1":180.6060791015625},"flags":{},"order":8,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":5,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[61],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["drawing,paiting,crayon,sketch,graphite,impressionist,noisy,blurry,soft,deformed,ugly,lowers,bad anatomy,bad hands,text,error,missing fingers,extra digit,fewer digits,cropped,worst quality,low quality,normal quality,jpeg artifacts,signature,watermark,username,(monochrome,greyscale,old photo), text"]},{"id":63,"type":"JoinStrings","pos":[140,290],"size":[315,106],"flags":{},"order":19,"mode":0,"inputs":[{"name":"string1","type":"STRING","link":213,"widget":{"name":"string1"}},{"name":"string2","type":"STRING","link":214,"widget":{"name":"string2"},"slot_index":1}],"outputs":[{"name":"STRING","type":"STRING","links":[215],"shape":3,"label":"字符串","slot_index":0}],"properties":{"Node name for S&R":"JoinStrings"},"widgets_values":["","",","]}],"links":[[1,4,0,3,0,"MODEL"],[3,4,1,6,0,"CLIP"],[5,4,1,7,0,"CLIP"],[7,3,0,8,0,"LATENT"],[56,24,0,25,0,"CONDITIONING"],[57,24,1,25,1,"CONDITIONING"],[59,6,0,24,0,"CONDITIONING"],[61,7,0,24,1,"CONDITIONING"],[63,17,0,25,3,"IMAGE"],[67,22,0,25,2,"CONTROL_NET"],[87,17,0,29,0,"IMAGE"],[96,37,0,39,0,"LATENT"],[118,41,0,9,0,"IMAGE"],[127,40,0,37,1,"VAE"],[133,40,0,8,1,"VAE"],[157,14,0,28,0,"IMAGE"],[165,25,0,51,0,"CONDITIONING"],[167,25,1,51,1,"CONDITIONING"],[169,51,0,3,1,"CONDITIONING"],[171,51,1,3,2,"CONDITIONING"],[173,43,0,51,3,"IMAGE"],[174,50,0,51,2,"CONTROL_NET"],[175,43,0,52,0,"IMAGE"],[186,8,0,41,0,"IMAGE"],[188,57,0,37,0,"IMAGE"],[190,13,0,57,0,"IMAGE"],[191,20,0,24,2,"CONTROL_NET"],[194,14,0,24,3,"IMAGE"],[201,13,0,17,0,"IMAGE"],[202,13,0,14,0,"IMAGE"],[203,13,0,43,0,"IMAGE"],[208,13,0,41,1,"IMAGE"],[210,39,0,3,3,"LATENT"],[211,61,0,62,1,"FL2MODEL"],[212,57,0,62,0,"IMAGE"],[213,62,2,63,0,"STRING"],[214,64,0,63,1,"STRING"],[215,63,0,6,1,"STRING"]],"groups":[],"config":{},"extra":{"workspace_info":{"id":"bjXJOCo9ptUwRzWjbWjBF","saveLock":false,"cloudID":null,"coverMediaPath":null},"ds":{"scale":0.450000000000004,"offset":{"0":1669.9649189147558,"1":444.3368591900529}}},"version":0.4}