{"last_node_id":133,"last_link_id":288,"nodes":[{"id":90,"type":"PreviewImage","pos":[400,-1320],"size":{"0":370,"1":380},"flags":{},"order":6,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":200,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":88,"type":"DownloadAndLoadFlorence2Model","pos":[-110,-390],"size":{"0":315,"1":106},"flags":{},"order":0,"mode":0,"outputs":[{"name":"florence2_model","type":"FL2MODEL","links":[197,245],"shape":3,"slot_index":0,"label":"florence2_model"}],"properties":{"Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["microsoft/Florence-2-large-ft","fp16","sdpa"]},{"id":107,"type":"Florence2toCoordinates","pos":[400,-80],"size":{"0":210,"1":78},"flags":{},"order":9,"mode":0,"inputs":[{"name":"data","type":"JSON","link":246,"label":"data"}],"outputs":[{"name":"coordinates","type":"STRING","links":[250],"shape":3,"slot_index":0,"label":"coordinates"},{"name":"bboxes","type":"BBOX","links":[266],"shape":3,"slot_index":1,"label":"bboxes"}],"properties":{"Node name for S&R":"Florence2toCoordinates"},"widgets_values":["0"]},{"id":119,"type":"ImageCompositeMasked","pos":[1420,-790],"size":{"0":315,"1":146},"flags":{},"order":15,"mode":0,"inputs":[{"name":"destination","type":"IMAGE","link":268,"label":"目标图像"},{"name":"source","type":"IMAGE","link":273,"label":"源图像"},{"name":"mask","type":"MASK","link":272,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[271],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,false]},{"id":109,"type":"Sam2Segmentation","pos":[750,-100],"size":{"0":314.5386047363281,"1":162},"flags":{},"order":11,"mode":0,"inputs":[{"name":"sam2_model","type":"SAM2MODEL","link":248,"label":"sam2_model"},{"name":"image","type":"IMAGE","link":251,"label":"image"},{"name":"bboxes","type":"BBOX","link":266,"label":"bboxes"},{"name":"coordinates_positive","type":"STRING","link":250,"widget":{"name":"coordinates_positive"},"label":"coordinates_positive"},{"name":"coordinates_negative","type":"STRING","link":null,"widget":{"name":"coordinates_negative"},"label":"coordinates_negative"}],"outputs":[{"name":"mask","type":"MASK","links":[252,275],"shape":3,"label":"mask","slot_index":0}],"properties":{"Node name for S&R":"Sam2Segmentation"},"widgets_values":[false,"","",true]},{"id":121,"type":"ImageCompositeMasked","pos":[1520,-130],"size":{"0":315,"1":146},"flags":{},"order":16,"mode":0,"inputs":[{"name":"destination","type":"IMAGE","link":274,"label":"目标图像"},{"name":"source","type":"IMAGE","link":276,"label":"源图像"},{"name":"mask","type":"MASK","link":275,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[277],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,false]},{"id":120,"type":"PreviewImage","pos":[1960,-960],"size":{"0":340,"1":490},"flags":{},"order":18,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":271,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":123,"type":"PreviewImage","pos":[1970,-170],"size":{"0":380,"1":430},"flags":{},"order":19,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":277,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":108,"type":"PreviewImage","pos":[410,190],"size":{"0":370,"1":380},"flags":{},"order":8,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":247,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":105,"type":"PreviewImage","pos":[870,-1370],"size":{"0":320,"1":420},"flags":{},"order":14,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":243,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":110,"type":"MaskToImage","pos":[1140,-80],"size":{"0":210,"1":26},"flags":{},"order":13,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":252,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[276,278],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":124,"type":"PreviewImage","pos":[1160,180],"size":{"0":260,"1":400},"flags":{},"order":17,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":278,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":106,"type":"Florence2Run","pos":[-110,-140],"size":{"0":400,"1":304},"flags":{},"order":5,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":244,"slot_index":0,"label":"image"},{"name":"florence2_model","type":"FL2MODEL","link":245,"slot_index":1,"label":"florence2_model"}],"outputs":[{"name":"image","type":"IMAGE","links":[247],"shape":3,"slot_index":0,"label":"image"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"mask"},{"name":"caption","type":"STRING","links":null,"shape":3,"slot_index":2,"label":"caption"},{"name":"data","type":"JSON","links":[246],"shape":3,"slot_index":3,"label":"data"}],"properties":{"Node name for S&R":"Florence2Run"},"widgets_values":["body","caption_to_phrase_grounding",true,false,1024,3,true,""]},{"id":102,"type":"Sam2Segmentation","pos":[730,-790],"size":{"0":314.5386047363281,"1":162},"flags":{},"order":10,"mode":0,"inputs":[{"name":"sam2_model","type":"SAM2MODEL","link":236,"label":"sam2_model"},{"name":"image","type":"IMAGE","link":237,"label":"image"},{"name":"bboxes","type":"BBOX","link":267,"label":"bboxes"},{"name":"coordinates_positive","type":"STRING","link":283,"widget":{"name":"coordinates_positive"},"label":"coordinates_positive"},{"name":"coordinates_negative","type":"STRING","link":null,"widget":{"name":"coordinates_negative"},"label":"coordinates_negative","slot_index":4}],"outputs":[{"name":"mask","type":"MASK","links":[242,272],"shape":3,"label":"mask","slot_index":0}],"properties":{"Node name for S&R":"Sam2Segmentation"},"widgets_values":[false,"","",true]},{"id":83,"type":"LoadImage","pos":[-1240,-600],"size":{"0":315,"1":314},"flags":{},"order":1,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[196],"shape":3,"slot_index":0,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["13 (3).png","image"]},{"id":72,"type":"ImageResizeKJ","pos":[-730,-600],"size":{"0":315,"1":242},"flags":{},"order":3,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":196,"label":"图像"},{"name":"get_image_size","type":"IMAGE","link":null,"label":"参考图像大小"},{"name":"width_input","type":"INT","link":null,"widget":{"name":"width_input"},"label":"宽度"},{"name":"height_input","type":"INT","link":null,"widget":{"name":"height_input"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[210,237,244,251,268,274],"shape":3,"slot_index":0,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResizeKJ"},"widgets_values":[768,1024,"nearest-exact",false,1,0,0]},{"id":104,"type":"MaskToImage","pos":[1100,-750],"size":{"0":210,"1":26},"flags":{},"order":12,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":242,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[243,273],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":66,"type":"DownloadAndLoadSAM2Model","pos":[370,-380],"size":{"0":351.7801513671875,"1":130},"flags":{},"order":2,"mode":0,"outputs":[{"name":"sam2_model","type":"SAM2MODEL","links":[236,248],"shape":3,"slot_index":0,"label":"sam2_model"}],"properties":{"Node name for S&R":"DownloadAndLoadSAM2Model"},"widgets_values":["sam2_hiera_base_plus.safetensors","single_image","cuda","bf16"]},{"id":93,"type":"Florence2toCoordinates","pos":[420,-730],"size":{"0":210,"1":78},"flags":{},"order":7,"mode":0,"inputs":[{"name":"data","type":"JSON","link":204,"label":"data"}],"outputs":[{"name":"coordinates","type":"STRING","links":[283],"shape":3,"slot_index":0,"label":"coordinates"},{"name":"bboxes","type":"BBOX","links":[267],"shape":3,"slot_index":1,"label":"bboxes"}],"properties":{"Node name for S&R":"Florence2toCoordinates"},"widgets_values":["0"]},{"id":87,"type":"Florence2Run","pos":[-120,-840],"size":{"0":400,"1":304},"flags":{},"order":4,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":210,"slot_index":0,"label":"image"},{"name":"florence2_model","type":"FL2MODEL","link":197,"slot_index":1,"label":"florence2_model"}],"outputs":[{"name":"image","type":"IMAGE","links":[200],"shape":3,"slot_index":0,"label":"image"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"mask"},{"name":"caption","type":"STRING","links":null,"shape":3,"slot_index":2,"label":"caption"},{"name":"data","type":"JSON","links":[204],"shape":3,"slot_index":3,"label":"data"}],"properties":{"Node name for S&R":"Florence2Run"},"widgets_values":["face","caption_to_phrase_grounding",true,false,1024,3,true,""]}],"links":[[196,83,0,72,0,"IMAGE"],[197,88,0,87,1,"FL2MODEL"],[200,87,0,90,0,"IMAGE"],[204,87,3,93,0,"JSON"],[210,72,0,87,0,"IMAGE"],[236,66,0,102,0,"SAM2MODEL"],[237,72,0,102,1,"IMAGE"],[242,102,0,104,0,"MASK"],[243,104,0,105,0,"IMAGE"],[244,72,0,106,0,"IMAGE"],[245,88,0,106,1,"FL2MODEL"],[246,106,3,107,0,"JSON"],[247,106,0,108,0,"IMAGE"],[248,66,0,109,0,"SAM2MODEL"],[250,107,0,109,3,"STRING"],[251,72,0,109,1,"IMAGE"],[252,109,0,110,0,"MASK"],[266,107,1,109,2,"BBOX"],[267,93,1,102,2,"BBOX"],[268,72,0,119,0,"IMAGE"],[271,119,0,120,0,"IMAGE"],[272,102,0,119,2,"MASK"],[273,104,0,119,1,"IMAGE"],[274,72,0,121,0,"IMAGE"],[275,109,0,121,2,"MASK"],[276,110,0,121,1,"IMAGE"],[277,121,0,123,0,"IMAGE"],[278,110,0,124,0,"IMAGE"],[283,93,0,102,3,"STRING"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.450000000000005,"offset":[568.5526346890568,1616.7566411448083]},"workspace_info":{"id":"jiF5Fx2ggG2bBIPgIhOtz","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}